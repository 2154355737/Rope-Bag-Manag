# 绳包管理系统 - 前端组件开发规范

## 📋 概述

本文档定义了绳包管理系统前端组件的开发规范，确保代码质量、一致性和可维护性。

## 🎯 设计原则

### 核心原则
1. **一致性优先**: 保持视觉和交互的一致性
2. **用户体验**: 以用户为中心的设计思维
3. **可访问性**: 支持无障碍访问
4. **性能优化**: 确保良好的加载和响应性能
5. **可维护性**: 代码清晰、易于理解和修改

### 设计理念
- **优雅统一**: 所有组件遵循统一的设计语言
- **细节把控**: 注重每个交互细节的完善
- **响应式设计**: 适配不同设备和屏幕尺寸
- **主题适配**: 完整支持多主题和深色模式

## 🏗️ 组件架构规范

### 1. 文件结构
```
src/components/
├── common/           # 通用组件
│   ├── Button/
│   │   ├── index.vue
│   │   ├── types.ts
│   │   └── README.md
├── business/         # 业务组件
│   ├── ResourceCard/
│   │   ├── index.vue
│   │   ├── types.ts
│   │   └── README.md
├── layout/          # 布局组件
└── icons/           # 图标组件
```

### 2. 组件命名规范
- **组件文件**: 使用 PascalCase，如 `ResourceCard.vue`
- **组件名称**: 使用 PascalCase，如 `ResourceCard`
- **属性名**: 使用 camelCase，如 `isLoading`
- **事件名**: 使用 kebab-case，如 `update-status`

### 3. 组件结构模板
```vue
<template>
  <div class="component-name" :class="componentClasses">
    <!-- 组件内容 -->
  </div>
</template>

<script setup lang="ts">
import { computed, ref } from 'vue'
import type { ComponentProps } from './types'

// Props 定义
interface Props extends ComponentProps {
  // 扩展属性
}

const props = withDefaults(defineProps<Props>(), {
  // 默认值
})

// Emits 定义
const emit = defineEmits<{
  'update:value': [value: any]
  'change': [value: any]
}>()

// 响应式数据
const isLoading = ref(false)

// 计算属性
const componentClasses = computed(() => ({
  'component-name--loading': isLoading.value,
  [`component-name--${props.variant}`]: props.variant
}))

// 方法
const handleAction = () => {
  emit('change', newValue)
}

// 暴露给父组件的方法
defineExpose({
  handleAction
})
</script>

<style scoped>
.component-name {
  /* 使用主题变量 */
  color: var(--text-primary);
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  padding: var(--space-4);
  transition: var(--transition-normal);
}

.component-name--loading {
  opacity: 0.6;
  pointer-events: none;
}
</style>
```

## 🎨 样式规范

### 1. CSS 变量使用
```css
/* ✅ 推荐：使用语义化主题变量 */
.my-component {
  color: var(--text-primary);
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  padding: var(--space-4);
  box-shadow: var(--shadow-sm);
  transition: var(--transition-normal);
}

/* ❌ 避免：硬编码颜色 */
.my-component {
  color: #333333;
  background: #ffffff;
}
```

### 2. 响应式设计
```css
.my-component {
  /* 移动端优先 */
  width: 100%;
  padding: var(--space-3);
}

/* 平板 */
@media (min-width: 768px) {
  .my-component {
    width: 50%;
    padding: var(--space-4);
  }
}

/* 桌面端 */
@media (min-width: 1024px) {
  .my-component {
    width: 33.333%;
    padding: var(--space-6);
  }
}
```

### 3. 深色模式适配
```css
.my-component {
  /* 基础样式 */
  color: var(--text-primary);
  background: var(--bg-card);
}

/* 深色模式特殊样式（如果需要） */
:global(html.dark) .my-component {
  /* 深色模式特定调整 */
  box-shadow: var(--shadow-dark);
}
```

## 🔧 TypeScript 规范

### 1. 类型定义
```typescript
// types.ts
export interface ComponentProps {
  /** 组件尺寸 */
  size?: 'small' | 'medium' | 'large'
  /** 组件变体 */
  variant?: 'primary' | 'secondary' | 'danger'
  /** 是否禁用 */
  disabled?: boolean
  /** 加载状态 */
  loading?: boolean
}

export interface ComponentEmits {
  /** 值更新事件 */
  'update:value': [value: any]
  /** 状态变化事件 */
  'change': [value: any, oldValue: any]
}
```

### 2. Props 验证
```typescript
const props = withDefaults(defineProps<Props>(), {
  size: 'medium',
  variant: 'primary',
  disabled: false,
  loading: false
})
```

## 🚀 性能优化规范

### 1. 懒加载组件
```typescript
// 路由级别懒加载
const ResourceDetail = () => import('../views/main/ResourceDetail.vue')

// 组件级别懒加载
const HeavyComponent = defineAsyncComponent(() => import('./HeavyComponent.vue'))
```

### 2. 计算属性优化
```typescript
// ✅ 推荐：使用计算属性缓存复杂计算
const expensiveValue = computed(() => {
  return props.items.filter(item => item.active).length
})

// ❌ 避免：在模板中进行复杂计算
// {{ items.filter(item => item.active).length }}
```

### 3. 事件处理优化
```typescript
// ✅ 推荐：使用防抖处理频繁事件
import { debounce } from 'lodash-es'

const handleSearch = debounce((query: string) => {
  // 搜索逻辑
}, 300)
```

## 📱 无障碍规范

### 1. 语义化HTML
```vue
<template>
  <!-- ✅ 推荐：使用语义化标签 -->
  <article class="resource-card">
    <header class="resource-header">
      <h3>{{ title }}</h3>
    </header>
    <main class="resource-content">
      <p>{{ description }}</p>
    </main>
    <footer class="resource-actions">
      <button type="button" :aria-label="`下载 ${title}`">
        下载
      </button>
    </footer>
  </article>
</template>
```

### 2. ARIA 属性
```vue
<template>
  <div
    role="button"
    :aria-pressed="isPressed"
    :aria-disabled="disabled"
    :aria-label="buttonLabel"
    @click="handleClick"
    @keydown.enter="handleClick"
    @keydown.space="handleClick"
    tabindex="0"
  >
    {{ text }}
  </div>
</template>
```

### 3. 键盘导航
```typescript
const handleKeydown = (event: KeyboardEvent) => {
  switch (event.key) {
    case 'Enter':
    case ' ':
      event.preventDefault()
      handleClick()
      break
    case 'Escape':
      handleClose()
      break
  }
}
```

## 🧪 测试规范

### 1. 组件测试结构
```typescript
// ComponentName.test.ts
import { mount } from '@vue/test-utils'
import ComponentName from './ComponentName.vue'

describe('ComponentName', () => {
  it('should render correctly', () => {
    const wrapper = mount(ComponentName, {
      props: {
        title: 'Test Title'
      }
    })
    
    expect(wrapper.text()).toContain('Test Title')
  })
  
  it('should emit event when clicked', async () => {
    const wrapper = mount(ComponentName)
    
    await wrapper.find('button').trigger('click')
    
    expect(wrapper.emitted('click')).toBeTruthy()
  })
})
```

## 📚 文档规范

### 1. 组件文档模板
```markdown
# ComponentName

## 概述
组件的简要描述和用途。

## 使用示例
\`\`\`vue
<template>
  <ComponentName
    :prop1="value1"
    :prop2="value2"
    @event1="handleEvent1"
  />
</template>
\`\`\`

## API

### Props
| 属性名 | 类型 | 默认值 | 描述 |
|--------|------|--------|------|
| prop1  | string | '' | 属性描述 |

### Events
| 事件名 | 参数 | 描述 |
|--------|------|------|
| event1 | (value: string) | 事件描述 |

### Slots
| 插槽名 | 描述 |
|--------|------|
| default | 默认内容 |
```

## 🔍 代码审查清单

### 提交前检查
- [ ] 组件命名符合规范
- [ ] 使用了正确的主题变量
- [ ] 支持深色模式
- [ ] 具有良好的无障碍性
- [ ] 性能优化合理
- [ ] TypeScript 类型完整
- [ ] 测试覆盖充分
- [ ] 文档完整准确

### 代码质量
- [ ] 没有硬编码的魔法数字
- [ ] 错误处理完善
- [ ] 边界情况考虑周全
- [ ] 代码简洁易读
- [ ] 注释清晰有用

## 🛠️ 开发工具配置

### 1. VSCode 扩展推荐
```json
{
  "recommendations": [
    "Vue.volar",
    "Vue.vscode-typescript-vue-plugin",
    "bradlc.vscode-tailwindcss",
    "esbenp.prettier-vscode",
    "dbaeumer.vscode-eslint"
  ]
}
```

### 2. 代码格式化配置
```json
// .prettierrc
{
  "semi": false,
  "singleQuote": true,
  "tabWidth": 2,
  "trailingComma": "es5",
  "printWidth": 100
}
```

## 📈 持续改进

### 定期审查
1. **每月组件审查**: 检查组件使用情况和性能
2. **季度重构评估**: 评估是否需要重构老旧组件
3. **年度架构升级**: 跟进技术栈更新

### 指标监控
- 组件复用率
- 性能指标
- 用户体验评分
- 开发效率

---

**文档版本**: v1.0.0  
**最后更新**: 2024年1月  
**维护团队**: 前端开发组 