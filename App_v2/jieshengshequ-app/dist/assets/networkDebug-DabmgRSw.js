var l=Object.defineProperty;var i=(t,o,e)=>o in t?l(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e;var r=(t,o,e)=>i(t,typeof o!="symbol"?o+"":o,e);class c{static async testConnection(){console.log("ğŸ” å¼€å§‹ç½‘ç»œè¿æ¥è¯Šæ–­..."),await this.testBasicConnectivity(),await this.testApiServer(),await this.testApiEndpoints(),console.log("âœ… ç½‘ç»œè¿æ¥è¯Šæ–­å®Œæˆ")}static async testBasicConnectivity(){console.log("ğŸ“¡ æµ‹è¯•åŸºç¡€ç½‘ç»œè¿æ¥...");try{const o=await fetch("https://www.baidu.com",{method:"HEAD",mode:"no-cors",cache:"no-cache"});console.log("âœ… äº’è”ç½‘è¿æ¥æ­£å¸¸")}catch(o){console.error("âŒ äº’è”ç½‘è¿æ¥å¤±è´¥:",o)}}static async testApiServer(){console.log("ğŸ”Œ æµ‹è¯•APIæœåŠ¡å™¨è¿æ¥...");try{const e=await fetch("http://39.105.113.219:15201",{method:"HEAD",mode:"cors",cache:"no-cache",headers:{Accept:"application/json"}});console.log(`âœ… æœåŠ¡å™¨å“åº”: ${e.status} ${e.statusText}`),console.log("ğŸ“‹ å“åº”å¤´:",Object.fromEntries(e.headers.entries()))}catch(o){console.error("âŒ æœåŠ¡å™¨è¿æ¥å¤±è´¥:",o),o instanceof TypeError&&o.message.includes("fetch")&&(console.error("ğŸš¨ å¯èƒ½çš„åŸå› :"),console.error("   1. æœåŠ¡å™¨æœªå¯åŠ¨æˆ–ä¸å¯è®¿é—®"),console.error("   2. ç½‘ç»œé˜²ç«å¢™é˜»æ­¢äº†è¿æ¥"),console.error("   3. CORSé…ç½®é—®é¢˜"),console.error("   4. Androidç½‘ç»œå®‰å…¨ç­–ç•¥é™åˆ¶"))}}static async testApiEndpoints(){console.log("ğŸ¯ æµ‹è¯•APIç«¯ç‚¹...");const o=["/health","/categories","/posts"];for(const e of o)try{const s=`${this.apiBase}${e}`;console.log(`ğŸ“ æµ‹è¯•ç«¯ç‚¹: ${s}`);const n=await fetch(s,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},cache:"no-cache"});if(console.log(`âœ… ${e}: ${n.status} ${n.statusText}`),n.ok){const a=await n.text();console.log(`ğŸ“¦ ${e} å“åº”é•¿åº¦: ${a.length} å­—ç¬¦`)}}catch(s){console.error(`âŒ ${e} å¤±è´¥:`,s)}}static getNetworkInfo(){console.log("ğŸ“± è®¾å¤‡ç½‘ç»œä¿¡æ¯:"),console.log("   User Agent:",navigator.userAgent),console.log("   Platform:",navigator.platform),console.log("   Online:",navigator.onLine),window.Capacitor?(console.log("ğŸ“± Capacitorç¯å¢ƒ:",window.Capacitor.getPlatform()),console.log("ğŸ“± åŸç”Ÿå¹³å°:",window.Capacitor.isNativePlatform())):console.log("ğŸŒ Webç¯å¢ƒ")}static async testCORS(){console.log("ğŸ”’ æµ‹è¯•CORSé…ç½®...");try{const o=await fetch(`${this.apiBase}/health`,{method:"OPTIONS",headers:{Origin:window.location.origin,"Access-Control-Request-Method":"GET","Access-Control-Request-Headers":"Content-Type, Authorization"}});console.log("âœ… CORSé¢„æ£€æˆåŠŸ:",o.status),console.log("ğŸ“‹ CORSå¤´:",{"Access-Control-Allow-Origin":o.headers.get("Access-Control-Allow-Origin"),"Access-Control-Allow-Methods":o.headers.get("Access-Control-Allow-Methods"),"Access-Control-Allow-Headers":o.headers.get("Access-Control-Allow-Headers")})}catch(o){console.error("âŒ CORSé¢„æ£€å¤±è´¥:",o)}}}r(c,"apiBase","http://39.105.113.219:15201/api/v1");typeof window<"u"&&setTimeout(()=>{c.getNetworkInfo(),c.testConnection(),c.testCORS()},2e3);export{c as NetworkDebugger};
