import{x as Ye,r as v,c as w,j as Ce,w as Xe,Z as et,y as c,A as t,az as ue,P as k,a6 as C,C as tt,Q as s,I as n,al as y,u as i,a4 as st,H as q,K as E,M as f,O as u,J as at,R as lt,V as b,D as ze,ax as ot,n as nt,z as d}from"../chunks/vue-vendor-BleHOoLr.js";import{q as xe,u as P,r as it,j as dt,s as rt,v as ut,l as N,f as O,w as De,x as $e,y as ct,z as vt,A as _t,B as pt,C as Se,m as mt,D as ft,F as gt,G as J,E as ht}from"../chunks/element-plus-BqgU8HW0.js";import{T as yt}from"../chunks/ThemeSwitcher-DAmAmwYA.js";import{a as g,g as W,_ as bt}from"../assets/index-BYq8Q9FJ.js";import{f as ce}from"../chunks/format-B9owEeWI.js";import{c as wt}from"../chunks/categories-CDxQep1u.js";import{g as kt}from"../chunks/announcements-CdsuAn1X.js";import"../chunks/utils-Dq7h7Pqt.js";const Ve={getFeed:r=>g.get("/v1/community/feed",{params:r}),getResources:r=>g.get("/v1/packages",{params:r}),getResource:r=>g.get(`/v1/packages/${r}`),downloadResource:r=>g.get(`/v1/packages/${r}/download`),createResource:r=>g.post("/v1/packages",r),updateResource:(r,_)=>g.put(`/v1/packages/${r}`,_),deleteResource:r=>g.delete(`/v1/packages/${r}`),batchDeleteResources:r=>g.post("/v1/packages/batch-delete",{ids:r}),updateResourceStatus:(r,_)=>g.put(`/v1/packages/${r}/status`,{status:_}),batchUpdateResourceStatus:(r,_)=>g.post("/v1/packages/batch-update-status",{ids:r,status:_}),getResourceStats:()=>g.get("/v1/packages/stats"),category:{getCategories:r=>g.get("/v1/categories",{params:r}),getCategory:r=>g.get(`/v1/categories/${r}`),createCategory:r=>g.post("/v1/categories",r),updateCategory:(r,_)=>g.put(`/v1/categories/${r}`,_),deleteCategory:r=>g.delete(`/v1/categories/${r}`),batchDeleteCategories:r=>g.post("/v1/categories/batch-delete",{ids:r}),updateCategoryStatus:(r,_)=>g.put(`/v1/categories/${r}/status`,{enabled:_})}},Ct={class:"home-container"},zt={class:"dynamic-background"},xt={class:"floating-particles"},Dt={class:"header"},$t={class:"header-content"},St={class:"search"},Vt={class:"actions"},Mt={key:1,class:"user-section"},Lt={class:"user-info"},Rt=["src"],Tt={class:"user-name"},At={class:"main"},Ft={class:"content-wrapper"},It={class:"main-content"},Ut={class:"new-layout"},Bt={class:"left-section"},Ht={class:"featured-resources"},qt={class:"section-header"},Et={class:"section-title"},Pt={class:"section-actions"},Nt={class:"featured-grid"},Jt=["onClick"],Qt={class:"featured-cover"},jt={class:"featured-icon"},Gt={class:"featured-badge"},Kt={class:"featured-content"},Zt={class:"featured-title"},Ot={class:"featured-desc"},Wt={class:"featured-meta"},Yt={class:"meta-author"},Xt={class:"meta-downloads"},es={key:1,class:"featured-empty"},ts={class:"right-section"},ss={class:"resources"},as={class:"section-header"},ls={class:"section-title"},os={class:"section-actions"},ns={class:"resource-count"},is={class:"view-switcher"},ds={class:"advanced-filters"},rs={class:"filter-row"},us={class:"filter-group"},cs={class:"filter-group"},vs={class:"filter-group"},_s={class:"filter-group"},ps={class:"filter-actions"},ms={class:"advanced-panel"},fs={class:"advanced-row"},gs={class:"filter-group"},hs={class:"filter-group"},ys={class:"filter-group"},bs={key:0,class:"empty-state"},ws={key:1,class:"resources-grid"},ks=["onClick"],Cs={class:"resource-icon"},zs={class:"resource-content"},xs={class:"resource-header"},Ds={class:"resource-title"},$s={class:"resource-badge"},Ss={class:"resource-desc"},Vs={class:"resource-footer"},Ms={class:"resource-meta"},Ls={class:"meta-item"},Rs={class:"meta-item"},Ts={class:"resource-actions"},As={key:2,class:"resources-list"},Fs=["onClick"],Is={class:"list-icon"},Us={class:"list-content"},Bs={class:"list-main"},Hs={class:"list-title"},qs={class:"list-desc"},Es={class:"list-meta"},Ps={class:"list-category"},Ns={class:"list-author"},Js={class:"list-date"},Qs={class:"list-actions"},js={class:"download-count"},Gs={key:3,class:"resources-cards"},Ks=["onClick"],Zs={class:"card-header"},Os={class:"card-icon"},Ws={class:"card-title-area"},Ys={class:"card-title"},Xs={class:"card-category"},ea={class:"card-desc"},ta={class:"card-footer"},sa={class:"card-meta"},aa={class:"meta-row"},la={class:"meta-row"},oa={class:"meta-row"},na={key:4,class:"pagination-wrapper"},ia={class:"bottom-section"},da={class:"notice-card"},ra={key:0,class:"empty-notice"},ua={key:1,class:"notice-list"},ca={class:"category-card"},va={class:"category-title"},_a={class:"category-list"},pa={class:"category-item-content"},ma={class:"category-count"},fa=["onClick"],ga={class:"category-item-content"},ha={class:"category-count"},ya={class:"footer"},ba={class:"footer-content"},wa={class:"footer-sections"},ka={class:"footer-section"},Ca={class:"footer-stats"},za={class:"stat-item"},xa={class:"stat-number"},Da={class:"stat-item"},$a={class:"stat-number"},Sa={class:"stat-item"},Va={class:"stat-number"},Ma={class:"footer-section"},La={class:"footer-links"},Ra={class:"footer-section"},Ta={class:"footer-links"},Aa=["onClick"],Fa={class:"footer-section"},Ia={class:"footer-contact"},Ua={class:"contact-item"},Ba={class:"contact-item"},Ha={class:"contact-item"},qa={class:"footer-bottom"},Ea={class:"footer-copyright"},Pa={class:"footer-legal"},Na=Ye({__name:"Home",setup(r){const _=ot(),U=v(""),V=v("all"),ve=v("latest"),_e=v("all"),oe=v(0),pe=v(!1),me=v(0),fe=v(0),Me=v(0),B=v(1),H=v(4),M=v([]),Q=w(()=>W()||{username:"用户"}),Y=w(()=>!!W()),Le=async()=>{try{const l=await kt();console.log("公告数据结构:",l),l.code===0&&l.data?Array.isArray(l.data)?M.value=l.data.map(e=>({id:e.id,text:e.title+": "+e.content})):l.data.list&&Array.isArray(l.data.list)?M.value=l.data.list.map(e=>({id:e.id,text:e.title+": "+e.content})):(console.warn("公告数据不是预期的数组格式:",l.data),M.value=[{id:1,text:"欢迎来到资源社区！"}]):(console.error("获取公告失败:",l.message),M.value=[{id:1,text:"欢迎来到资源社区！"},{id:2,text:"请遵守社区规范，文明发言。"},{id:3,text:"资源分享请确保无版权争议。"}])}catch(l){console.error("加载公告出错:",l),M.value=[{id:0,text:"欢迎来到资源社区！请遵守社区规范，文明发言。"}]}},j=v([]),D=v([]),ne=w(()=>D.value.slice().sort((l,e)=>e.download_count-l.download_count).slice(0,6)),ge=w(()=>{const l=[];for(let e=0;e<ne.value.length;e+=3)l.push(ne.value.slice(e,e+3));return l}),he=w(()=>{let l=D.value;if(V.value!=="all"&&(l=l.filter(e=>e.category_id===parseInt(V.value))),U.value){const e=U.value.toLowerCase();l=l.filter(a=>a.name.toLowerCase().includes(e)||a.description?.toLowerCase().includes(e)||a.author.toLowerCase().includes(e))}switch(ve.value){case"latest":l.sort((e,a)=>new Date(a.created_at).getTime()-new Date(e.created_at).getTime());break;case"downloads":l.sort((e,a)=>a.download_count-e.download_count);break;case"likes":l.sort((e,a)=>(a.like_count||0)-(e.like_count||0));break;case"favorites":l.sort((e,a)=>(a.favorite_count||0)-(e.favorite_count||0));break}return l}),X=async()=>{pe.value=!0;try{const l={};V.value!=="all"&&(l.category_id=parseInt(V.value)),U.value&&(l.search=U.value),l.sort=ve.value,_e.value!=="all"&&(l.type=_e.value),l.page=B.value,l.page_size=H.value,console.log("请求Feed参数:",l);const e=await Ve.getFeed(l);e.code===0&&e.data?(D.value=e.data.list,oe.value=e.data.total,me.value=D.value.reduce((a,p)=>a+(p.download_count||0),0),Me.value=D.value.reduce((a,p)=>a+(p.like_count||0),0),fe.value=Math.floor(Math.random()*1e3)+500):J.error(e.message||"加载资源失败")}catch(l){console.error("加载资源出错:",l),J.error("加载资源时发生错误")}finally{pe.value=!1}},Re=()=>{X()},ee=l=>{console.log("分类切换到:",l.props.name),V.value=l.props.name,X()},te=l=>{_.push(`/resource/${l}`)},ie=async l=>{try{const e=await Ve.downloadResource(l);e.code===0?(J.success("下载统计成功"),X()):J.error(e.msg||"下载失败")}catch(e){console.error("下载失败:",e),J.error("下载失败")}},ye=()=>{_.push("/login")},Te=()=>{console.log("isLoggedIn:",localStorage.getItem("isLoggedIn")),console.log("userInfo:",localStorage.getItem("userInfo"));const l=W&&W();if(!l){_.push("/login");return}l.role==="admin"||l.role==="moderator"?_.push("/admin"):l.role==="elder"?_.push("/elder"):l.role==="user"?_.push("/user"):_.push("/403")},be=()=>{const l=W();l?.role==="elder"?_.push("/elder/profile"):l?.role==="user"?_.push("/user/profile"):l?.role==="admin"?_.push("/admin/users"):_.push("/login")},Ae=async()=>{try{await ht.confirm("确定要退出登录吗？","确认退出",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),localStorage.removeItem("token"),localStorage.removeItem("userInfo"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("loginTime"),localStorage.removeItem("remember_me"),localStorage.removeItem("username"),document.cookie="auth_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="user_info=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="remember_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",J.success("已退出登录"),_.push("/login")}catch{}},se=l=>{if(!l)return"未分类";const e=j.value.find(a=>a.id===l);return e?e.name:"未分类"},ae=l=>({1:"#409EFF",2:"#67C23A",3:"#E6A23C",4:"#F56C6C",5:"#909399"})[l]||"#409EFF",Fe=l=>l.toLocaleString(),Ie=async()=>{try{const l=await wt.getCategories();l.code===0&&l.data?(j.value=l.data.list||[],console.log("获取到的分类:",j.value)):console.error("获取分类失败:",l.message)}catch(l){console.error("加载分类出错:",l)}};Ce(async()=>{await Ie(),await X(),await Le()});const Ue=()=>{window.scrollTo({top:0,behavior:"smooth"})},Be=l=>{const e=Math.random()*8+4,a=Math.random()*100,p=Math.random()*100,h=Math.random()*15,I=Math.random()*10+10;return{width:`${e}px`,height:`${e}px`,left:`${a}%`,top:`${p}%`,animationDelay:`${h}s`,animationDuration:`${I}s`}},He=l=>D.value.filter(e=>e.category_id===l).length,z=v("grid"),L=v(""),R=v(""),T=v(""),A=v(""),F=v(""),$=v(""),G=v("newest"),K=v(!1),qe=w(()=>L.value||R.value||T.value||A.value||F.value||$.value),Ee=w(()=>Array.from(new Set(D.value.map(l=>l.author)))),we=w(()=>{let l=he.value;if(L.value&&(l=l.filter(e=>e.author.toLowerCase().includes(L.value.toLowerCase()))),R.value&&(l=l.filter(e=>{const a=e.download_count||0;switch(R.value){case"0-10":return a>=0&&a<=10;case"11-50":return a>=11&&a<=50;case"51-100":return a>=51&&a<=100;case"100+":return a>100;default:return!0}})),T.value){const e=new Date,a=new Date,p=new Date;switch(T.value){case"today":a.setHours(0,0,0,0),p.setHours(23,59,59,999);break;case"week":a.setDate(e.getDate()-e.getDay()),p.setDate(e.getDate()+(6-e.getDay())),a.setHours(0,0,0,0),p.setHours(23,59,59,999);break;case"month":a.setDate(1),p.setMonth(e.getMonth()+1),p.setDate(0),a.setHours(0,0,0,0),p.setHours(23,59,59,999);break;case"quarter":a.setMonth(Math.floor(e.getMonth()/3)*3),p.setMonth(a.getMonth()+2),p.setDate(31),a.setDate(1),a.setHours(0,0,0,0),p.setHours(23,59,59,999);break}l=l.filter(h=>{const I=new Date(h.created_at);return I>=a&&I<=p})}if(A.value){const e=A.value.toLowerCase();l=l.filter(a=>a.name.toLowerCase().includes(e)||a.description?.toLowerCase().includes(e)||a.author.toLowerCase().includes(e))}switch(F.value&&(l=l.filter(e=>{const a=e.file_size||0;switch(F.value){case"small":return a<1024*1024;case"medium":return a>=1024*1024&&a<10*1024*1024;case"large":return a>=10*1024*1024;default:return!0}})),$.value&&($.value.split(",").map(e=>e.trim()),l=l.filter(e=>{const a=$.value.toLowerCase();return e.name.toLowerCase().includes(a)||e.description?.toLowerCase().includes(a)})),G.value){case"newest":l.sort((e,a)=>new Date(a.created_at).getTime()-new Date(e.created_at).getTime());break;case"oldest":l.sort((e,a)=>new Date(e.created_at).getTime()-new Date(a.created_at).getTime());break;case"most_downloaded":l.sort((e,a)=>a.download_count-e.download_count);break;case"least_downloaded":l.sort((e,a)=>e.download_count-a.download_count);break;case"name_asc":l.sort((e,a)=>e.name.localeCompare(a.name));break;case"name_desc":l.sort((e,a)=>a.name.localeCompare(e.name));break}return l}),ke=w(()=>we.value),de=w(()=>{const l=we.value,e=(B.value-1)*H.value,a=e+H.value;return l.slice(e,a)}),Pe=()=>{L.value="",R.value="",T.value="",A.value="",F.value="",$.value="",G.value="newest",K.value=!1,B.value=1};Xe([L,R,T,A,F,$,G],()=>{B.value=1});const Ne=()=>{K.value=!K.value},le=()=>{nt(()=>{const l=document.querySelector(".home-container"),e=document.querySelector(".dynamic-background"),a=document.querySelector(".gradient-layer");if(l&&e&&a){const p=l.scrollHeight,h=Math.max(p,window.innerHeight);e.style.height=`${h}px`,a.style.height=`${h}px`}})};return Ce(()=>{le(),window.addEventListener("resize",le);const l=new MutationObserver(le),e=document.querySelector(".home-container");e&&l.observe(e,{childList:!0,subtree:!0,attributes:!0})}),et(()=>{le()}),(l,e)=>{const a=y("el-icon"),p=y("el-input"),h=y("el-button"),I=y("el-avatar"),re=y("el-dropdown-item"),Je=y("el-dropdown-menu"),Qe=y("el-dropdown"),je=y("ChatDotRound"),Ge=y("el-carousel-item"),Ke=y("el-carousel"),Ze=y("el-button-group"),m=y("el-option"),Z=y("el-select"),Oe=y("el-collapse-transition"),We=y("el-pagination");return d(),c("div",Ct,[t("div",zt,[e[19]||(e[19]=ue('<div class="gradient-layer" data-v-63d6b24d></div><div class="geometric-shapes" data-v-63d6b24d><div class="shape triangle-1" data-v-63d6b24d></div><div class="shape triangle-2" data-v-63d6b24d></div><div class="shape circle-1" data-v-63d6b24d></div><div class="shape circle-2" data-v-63d6b24d></div><div class="shape square-1" data-v-63d6b24d></div><div class="shape circle-3" data-v-63d6b24d></div><div class="shape triangle-3" data-v-63d6b24d></div><div class="shape square-2" data-v-63d6b24d></div></div>',2)),t("div",xt,[(d(),c(k,null,C(20,o=>t("div",{class:"particle",key:o,style:tt(Be())},null,4)),64))]),e[20]||(e[20]=ue('<div class="ripple-effects" data-v-63d6b24d><div class="ripple ripple-1" data-v-63d6b24d></div><div class="ripple ripple-2" data-v-63d6b24d></div><div class="ripple ripple-3" data-v-63d6b24d></div><div class="ripple ripple-4" data-v-63d6b24d></div><div class="ripple ripple-5" data-v-63d6b24d></div></div>',1))]),t("header",Dt,[t("div",$t,[e[25]||(e[25]=t("div",{class:"logo"},[t("div",{class:"logo-icon"},"📚"),t("div",{class:"logo-text"},[t("h1",null,"资源社区"),t("p",null,"分享、发现、学习")])],-1)),t("div",St,[s(p,{modelValue:U.value,"onUpdate:modelValue":e[0]||(e[0]=o=>U.value=o),placeholder:"搜索资源...",size:"large",clearable:"",onKeyup:st(Re,["enter"])},{prefix:n(()=>[s(a,null,{default:n(()=>[s(i(xe))]),_:1})]),_:1},8,["modelValue"])]),t("div",Vt,[s(yt),Y.value?E("",!0):(d(),q(h,{key:0,type:"primary",size:"large",onClick:ye},{default:n(()=>[s(a,null,{default:n(()=>[s(i(P))]),_:1}),e[21]||(e[21]=f(" 登录 "))]),_:1,__:[21]})),Y.value?(d(),c("div",Mt,[s(Qe,{trigger:"click",placement:"bottom-end"},{dropdown:n(()=>[s(Je,{class:"user-dropdown"},{default:n(()=>[s(re,{onClick:be},{default:n(()=>[s(a,null,{default:n(()=>[s(i(P))]),_:1}),e[22]||(e[22]=f(" 个人资料 "))]),_:1,__:[22]}),s(re,{onClick:Te},{default:n(()=>[s(a,null,{default:n(()=>[s(i(dt))]),_:1}),e[23]||(e[23]=f(" 管理后台 "))]),_:1,__:[23]}),s(re,{divided:"",onClick:Ae},{default:n(()=>[s(a,null,{default:n(()=>[s(i(rt))]),_:1}),e[24]||(e[24]=f(" 退出登录 "))]),_:1,__:[24]})]),_:1})]),default:n(()=>[t("div",Lt,[Q.value.avatar_url?(d(),q(I,{key:0,size:32,class:"user-avatar",src:Q.value.avatar_url},{default:n(()=>[t("img",{src:Q.value.avatar_url},null,8,Rt)]),_:1},8,["src"])):(d(),q(I,{key:1,size:32,class:"user-avatar"},{default:n(()=>[s(a,null,{default:n(()=>[s(i(P))]),_:1})]),_:1})),t("span",Tt,u(Q.value.nickname||Q.value.username),1),s(a,{class:"dropdown-icon"},{default:n(()=>[s(i(it))]),_:1})])]),_:1})])):E("",!0)])])]),t("main",At,[t("div",Ft,[t("div",It,[t("div",Ut,[t("div",Bt,[t("div",Ht,[t("div",qt,[t("h2",Et,[s(a,null,{default:n(()=>[s(i(ut))]),_:1}),e[26]||(e[26]=f(" 精选资源 "))]),e[28]||(e[28]=t("p",{class:"section-subtitle"},"发现社区最受欢迎的优质资源",-1)),t("div",Pt,[s(h,{type:"primary",text:"",onClick:e[1]||(e[1]=o=>l.$router.push("/posts"))},{default:n(()=>[s(a,null,{default:n(()=>[s(je)]),_:1}),e[27]||(e[27]=f(" 社区帖子 "))]),_:1,__:[27]})])]),ne.value.length>0?(d(),q(Ke,{key:0,interval:5e3,arrow:ge.value.length>1?"hover":"never","indicator-position":"outside",class:"resource-carousel",height:"280px"},{default:n(()=>[(d(!0),c(k,null,C(ge.value,(o,x)=>(d(),q(Ge,{key:x,class:"carousel-item"},{default:n(()=>[t("div",Nt,[(d(!0),c(k,null,C(o,S=>(d(),c("div",{key:S.id,class:"featured-card",onClick:Ja=>te(S.id)},[t("div",Qt,[t("div",jt,[s(a,{size:"32",color:ae(S.category_id)},{default:n(()=>[s(i(N))]),_:2},1032,["color"])]),t("div",Gt,u(se(S.category_id)),1)]),t("div",Kt,[t("h3",Zt,u(S.name),1),t("p",Ot,u(S.description),1),t("div",Wt,[t("span",Yt,[s(a,null,{default:n(()=>[s(i(P))]),_:1}),f(" "+u(S.author),1)]),t("span",Xt,[s(a,null,{default:n(()=>[s(i(O))]),_:1}),f(" "+u(S.download_count),1)])])])],8,Jt))),128))])]),_:2},1024))),128))]),_:1},8,["arrow"])):(d(),c("div",es,e[29]||(e[29]=[t("div",{class:"empty-icon"},"⭐",-1),t("h3",null,"暂无精选资源",-1),t("p",null,"暂无精选资源，敬请期待",-1)])))])]),t("div",ts,[t("div",ss,[t("div",as,[t("h2",ls,[s(a,null,{default:n(()=>[s(i(De))]),_:1}),e[30]||(e[30]=f(" 全部资源 "))]),t("div",os,[t("span",ns,"共 "+u(he.value.length)+" 个资源",1),t("div",is,[s(Ze,null,{default:n(()=>[s(h,{type:z.value==="grid"?"primary":"default",size:"small",onClick:e[2]||(e[2]=o=>z.value="grid")},{default:n(()=>[s(a,null,{default:n(()=>[s(i($e))]),_:1})]),_:1},8,["type"]),s(h,{type:z.value==="list"?"primary":"default",size:"small",onClick:e[3]||(e[3]=o=>z.value="list")},{default:n(()=>[s(a,null,{default:n(()=>[s(i(ct))]),_:1})]),_:1},8,["type"]),s(h,{type:z.value==="card"?"primary":"default",size:"small",onClick:e[4]||(e[4]=o=>z.value="card")},{default:n(()=>[s(a,null,{default:n(()=>[s(i(N))]),_:1})]),_:1},8,["type"])]),_:1})])])]),t("div",ds,[t("div",rs,[t("div",us,[e[31]||(e[31]=t("label",{class:"filter-label"},"作者",-1)),s(Z,{modelValue:L.value,"onUpdate:modelValue":e[5]||(e[5]=o=>L.value=o),placeholder:"选择作者",clearable:"",size:"small",class:"filter-input"},{default:n(()=>[s(m,{label:"全部作者",value:""}),(d(!0),c(k,null,C(Ee.value,o=>(d(),q(m,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),t("div",cs,[e[32]||(e[32]=t("label",{class:"filter-label"},"下载量",-1)),s(Z,{modelValue:R.value,"onUpdate:modelValue":e[6]||(e[6]=o=>R.value=o),placeholder:"下载量范围",clearable:"",size:"small",class:"filter-input"},{default:n(()=>[s(m,{label:"全部",value:""}),s(m,{label:"0-10次",value:"0-10"}),s(m,{label:"11-50次",value:"11-50"}),s(m,{label:"51-100次",value:"51-100"}),s(m,{label:"100次以上",value:"100+"})]),_:1},8,["modelValue"])]),t("div",vs,[e[33]||(e[33]=t("label",{class:"filter-label"},"创建时间",-1)),s(Z,{modelValue:T.value,"onUpdate:modelValue":e[7]||(e[7]=o=>T.value=o),placeholder:"时间范围",clearable:"",size:"small",class:"filter-input"},{default:n(()=>[s(m,{label:"全部时间",value:""}),s(m,{label:"今天",value:"today"}),s(m,{label:"本周",value:"week"}),s(m,{label:"本月",value:"month"}),s(m,{label:"三个月内",value:"quarter"})]),_:1},8,["modelValue"])]),t("div",_s,[e[34]||(e[34]=t("label",{class:"filter-label"},"关键词",-1)),s(p,{modelValue:A.value,"onUpdate:modelValue":e[8]||(e[8]=o=>A.value=o),placeholder:"搜索关键词",clearable:"",size:"small",class:"filter-input"},{prefix:n(()=>[s(a,null,{default:n(()=>[s(i(xe))]),_:1})]),_:1},8,["modelValue"])]),t("div",ps,[s(h,{size:"small",onClick:Pe,disabled:!qe.value},{default:n(()=>[s(a,null,{default:n(()=>[s(i(vt))]),_:1}),e[35]||(e[35]=f(" 重置 "))]),_:1,__:[35]},8,["disabled"]),s(h,{type:"primary",size:"small",onClick:Ne},{default:n(()=>[s(a,null,{default:n(()=>[s(i(_t))]),_:1}),f(" "+u(K.value?"收起":"高级"),1)]),_:1})])]),s(Oe,null,{default:n(()=>[at(t("div",ms,[t("div",fs,[t("div",gs,[e[36]||(e[36]=t("label",{class:"filter-label"},"文件大小",-1)),s(Z,{modelValue:F.value,"onUpdate:modelValue":e[9]||(e[9]=o=>F.value=o),placeholder:"文件大小",clearable:"",size:"small",class:"filter-input"},{default:n(()=>[s(m,{label:"全部大小",value:""}),s(m,{label:"小于1MB",value:"small"}),s(m,{label:"1MB-10MB",value:"medium"}),s(m,{label:"大于10MB",value:"large"})]),_:1},8,["modelValue"])]),t("div",hs,[e[37]||(e[37]=t("label",{class:"filter-label"},"标签",-1)),s(p,{modelValue:$.value,"onUpdate:modelValue":e[10]||(e[10]=o=>$.value=o),placeholder:"搜索标签",clearable:"",size:"small",class:"filter-input"},{prefix:n(()=>[s(a,null,{default:n(()=>[s(i(pt))]),_:1})]),_:1},8,["modelValue"])]),t("div",ys,[e[38]||(e[38]=t("label",{class:"filter-label"},"排序方式",-1)),s(Z,{modelValue:G.value,"onUpdate:modelValue":e[11]||(e[11]=o=>G.value=o),placeholder:"排序方式",size:"small",class:"filter-input"},{default:n(()=>[s(m,{label:"最新创建",value:"newest"}),s(m,{label:"最早创建",value:"oldest"}),s(m,{label:"下载最多",value:"most_downloaded"}),s(m,{label:"下载最少",value:"least_downloaded"}),s(m,{label:"名称A-Z",value:"name_asc"}),s(m,{label:"名称Z-A",value:"name_desc"})]),_:1},8,["modelValue"])])])],512),[[lt,K.value]])]),_:1})]),D.value.length===0?(d(),c("div",bs,e[39]||(e[39]=[t("div",{class:"empty-icon"},"📦",-1),t("h3",null,"暂无资源",-1),t("p",null,"暂无资源，敬请期待",-1)]))):z.value==="grid"?(d(),c("div",ws,[(d(!0),c(k,null,C(de.value,o=>(d(),c("div",{key:o.id,class:"resource-card",onClick:x=>te(o.id)},[t("div",Cs,[s(a,{size:"28",color:ae(o.category_id)},{default:n(()=>[s(i(N))]),_:2},1032,["color"])]),t("div",zs,[t("div",xs,[t("h3",Ds,u(o.name),1),t("span",$s,u(se(o.category_id)),1)]),t("p",Ss,u(o.description),1),t("div",Vs,[t("div",Ms,[t("span",Ls,[s(a,null,{default:n(()=>[s(i(P))]),_:1}),f(" "+u(o.author),1)]),t("span",Rs,[s(a,null,{default:n(()=>[s(i(Se))]),_:1}),f(" "+u(i(ce)(o.created_at)),1)])]),t("div",Ts,[s(h,{type:"primary",size:"small",onClick:b(x=>ie(o.id),["stop"])},{default:n(()=>[s(a,null,{default:n(()=>[s(i(O))]),_:1}),e[40]||(e[40]=f(" 下载 "))]),_:2,__:[40]},1032,["onClick"])])])])],8,ks))),128))])):z.value==="list"?(d(),c("div",As,[(d(!0),c(k,null,C(de.value,o=>(d(),c("div",{key:o.id,class:"resource-list-item",onClick:x=>te(o.id)},[t("div",Is,[s(a,{size:"24",color:ae(o.category_id)},{default:n(()=>[s(i(N))]),_:2},1032,["color"])]),t("div",Us,[t("div",Bs,[t("h3",Hs,u(o.name),1),t("p",qs,u(o.description),1)]),t("div",Es,[t("span",Ps,u(se(o.category_id)),1),t("span",Ns,u(o.author),1),t("span",Js,u(i(ce)(o.created_at)),1)])]),t("div",Qs,[t("span",js,[s(a,null,{default:n(()=>[s(i(O))]),_:1}),f(" "+u(o.download_count),1)]),s(h,{type:"primary",size:"small",onClick:b(x=>ie(o.id),["stop"])},{default:n(()=>e[41]||(e[41]=[f(" 下载 ")])),_:2,__:[41]},1032,["onClick"])])],8,Fs))),128))])):z.value==="card"?(d(),c("div",Gs,[(d(!0),c(k,null,C(de.value,o=>(d(),c("div",{key:o.id,class:"resource-card-item",onClick:x=>te(o.id)},[t("div",Zs,[t("div",Os,[s(a,{size:"32",color:ae(o.category_id)},{default:n(()=>[s(i(N))]),_:2},1032,["color"])]),t("div",Ws,[t("h3",Ys,u(o.name),1),t("span",Xs,u(se(o.category_id)),1)])]),t("p",ea,u(o.description),1),t("div",ta,[t("div",sa,[t("div",aa,[s(a,null,{default:n(()=>[s(i(P))]),_:1}),t("span",null,u(o.author),1)]),t("div",la,[s(a,null,{default:n(()=>[s(i(Se))]),_:1}),t("span",null,u(i(ce)(o.created_at)),1)]),t("div",oa,[s(a,null,{default:n(()=>[s(i(O))]),_:1}),t("span",null,u(o.download_count)+" 次下载",1)])]),s(h,{type:"primary",onClick:b(x=>ie(o.id),["stop"])},{default:n(()=>[s(a,null,{default:n(()=>[s(i(O))]),_:1}),e[42]||(e[42]=f(" 下载资源 "))]),_:2,__:[42]},1032,["onClick"])])],8,Ks))),128))])):E("",!0),ke.value.length>H.value?(d(),c("div",na,[s(We,{"current-page":B.value,"onUpdate:currentPage":e[12]||(e[12]=o=>B.value=o),"page-size":H.value,"onUpdate:pageSize":e[13]||(e[13]=o=>H.value=o),"page-sizes":[4,8,12,16],total:ke.value.length,layout:"total, sizes, prev, pager, next, jumper",class:"resource-pagination",background:""},null,8,["current-page","page-size","total"])])):E("",!0)])]),t("div",ia,[t("div",da,[e[44]||(e[44]=t("h3",{class:"notice-title"},"社区公告",-1)),M.value.length===0?(d(),c("div",ra,e[43]||(e[43]=[t("p",null,"暂无公告信息",-1)]))):(d(),c("ul",ua,[(d(!0),c(k,null,C(M.value,o=>(d(),c("li",{key:o.id,class:"notice-item"},u(o.text),1))),128))]))]),t("div",ca,[t("h3",va,[s(a,null,{default:n(()=>[s(i(De))]),_:1}),e[45]||(e[45]=f(" 资源分类 "))]),t("div",_a,[t("div",{class:ze(["category-item",{active:V.value==="all"}]),onClick:e[14]||(e[14]=o=>ee({props:{name:"all"}}))},[t("div",pa,[s(a,null,{default:n(()=>[s(i($e))]),_:1}),e[46]||(e[46]=t("span",null,"全部",-1))]),t("span",ma,u(oe.value),1)],2),(d(!0),c(k,null,C(j.value,o=>(d(),c("div",{key:o.id,class:ze(["category-item",{active:V.value===o.id.toString()}]),onClick:x=>ee({props:{name:o.id.toString()}})},[t("div",ga,[s(a,null,{default:n(()=>[s(i(N))]),_:1}),t("span",null,u(o.name),1)]),t("span",ha,u(He(o.id)),1)],10,fa))),128))])])])])])])]),t("footer",ya,[t("div",ba,[t("div",wa,[t("div",ka,[e[50]||(e[50]=t("div",{class:"footer-logo"},[t("div",{class:"footer-logo-icon"},"📚"),t("div",{class:"footer-logo-text"},[t("h3",null,"资源社区"),t("p",null,"分享、发现、学习")])],-1)),e[51]||(e[51]=t("p",{class:"footer-desc"}," 一个致力于知识分享和资源交流的开放平台，汇聚优质学习资源，助力每个人的成长之路。 ",-1)),t("div",Ca,[t("div",za,[t("span",xa,u(oe.value),1),e[47]||(e[47]=t("span",{class:"stat-label"},"资源",-1))]),t("div",Da,[t("span",$a,u(fe.value),1),e[48]||(e[48]=t("span",{class:"stat-label"},"用户",-1))]),t("div",Sa,[t("span",Va,u(Fe(me.value)),1),e[49]||(e[49]=t("span",{class:"stat-label"},"下载",-1))])])]),t("div",Ma,[e[52]||(e[52]=t("h4",{class:"footer-title"},"快速链接",-1)),t("ul",La,[t("li",null,[t("a",{href:"#",onClick:b(Ue,["prevent"])},"回到顶部")]),t("li",null,[t("a",{href:"#",onClick:e[15]||(e[15]=b(o=>ee({props:{name:"all"}}),["prevent"]))},"全部资源")]),t("li",null,[Y.value?E("",!0):(d(),c("a",{key:0,href:"#",onClick:b(ye,["prevent"])},"用户登录"))]),t("li",null,[Y.value?(d(),c("a",{key:0,href:"#",onClick:b(be,["prevent"])},"个人中心")):E("",!0)])])]),t("div",Ra,[e[53]||(e[53]=t("h4",{class:"footer-title"},"资源分类",-1)),t("ul",Ta,[(d(!0),c(k,null,C(j.value.slice(0,5),o=>(d(),c("li",{key:o.id},[t("a",{href:"#",onClick:b(x=>ee({props:{name:o.id.toString()}}),["prevent"])},u(o.name),9,Aa)]))),128))])]),t("div",Fa,[e[57]||(e[57]=t("h4",{class:"footer-title"},"联系我们",-1)),t("div",Ia,[t("div",Ua,[s(a,null,{default:n(()=>[s(i(mt))]),_:1}),e[54]||(e[54]=t("span",null,"support@example.com",-1))]),t("div",Ba,[s(a,null,{default:n(()=>[s(i(ft))]),_:1}),e[55]||(e[55]=t("span",null,"400-123-4567",-1))]),t("div",Ha,[s(a,null,{default:n(()=>[s(i(gt))]),_:1}),e[56]||(e[56]=t("span",null,"北京市朝阳区",-1))])]),e[58]||(e[58]=ue('<div class="social-links" data-v-63d6b24d><a href="#" class="social-link" title="微信" data-v-63d6b24d><span data-v-63d6b24d>💬</span></a><a href="#" class="social-link" title="QQ" data-v-63d6b24d><span data-v-63d6b24d>🐧</span></a><a href="#" class="social-link" title="GitHub" data-v-63d6b24d><span data-v-63d6b24d>⚡</span></a><a href="#" class="social-link" title="邮箱" data-v-63d6b24d><span data-v-63d6b24d>📧</span></a></div>',1))])]),t("div",qa,[t("div",Ea,[t("p",null,"© "+u(new Date().getFullYear())+" 资源社区. All rights reserved.",1),e[59]||(e[59]=t("p",null,"Built with ❤️ using Vue 3 + Rust",-1))]),t("div",Pa,[t("a",{href:"#",onClick:e[16]||(e[16]=b(()=>{},["prevent"]))},"隐私政策"),e[60]||(e[60]=t("span",{class:"divider"},"|",-1)),t("a",{href:"#",onClick:e[17]||(e[17]=b(()=>{},["prevent"]))},"服务条款"),e[61]||(e[61]=t("span",{class:"divider"},"|",-1)),t("a",{href:"#",onClick:e[18]||(e[18]=b(()=>{},["prevent"]))},"帮助中心")])])])])])}}}),Xa=bt(Na,[["__scopeId","data-v-63d6b24d"]]);export{Xa as default};
