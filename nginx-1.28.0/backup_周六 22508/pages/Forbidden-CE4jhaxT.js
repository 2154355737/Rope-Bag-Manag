import{x as j,r as g,c as m,ax as E,j as F,y,A as s,Q as t,I as n,u as d,al as r,K as H,O as c,M as l,H as w,z as p}from"../chunks/vue-vendor-BleHOoLr.js";import{O,aj as P,n as U,ak as A,u as G,a2 as K,G as k}from"../chunks/element-plus-BqgU8HW0.js";import{g as Q,o as $,_ as J}from"../assets/index-BZGS9eVU.js";import"../chunks/utils-Dq7h7Pqt.js";const W={class:"forbidden-container"},X={class:"forbidden-content"},Y={class:"forbidden-icon"},Z={class:"forbidden-info"},ee={class:"forbidden-message"},te={key:0,class:"user-info"},ne={class:"permission-guide"},oe={class:"forbidden-actions"},se={class:"contact-admin"},ae={class:"security-notice"},le=j({__name:"Forbidden",setup(re){const u=E(),a=g(Q()),v=g(new Date().toLocaleString()),C=m(()=>{const o=u.currentRoute.value.query;if(o.error==="banned")return o.message||"æ‚¨çš„è´¦æˆ·å·²è¢«å°ç¦";if(!a.value)return"æ‚¨éœ€è¦ç™»å½•åæ‰èƒ½è®¿é—®æ­¤é¡µé¢";const e=a.value.ban_status?.toLowerCase();return e&&e!=="normal"?"æ‚¨çš„è´¦æˆ·çŠ¶æ€å¼‚å¸¸ï¼Œæ— æ³•è®¿é—®æ­¤é¡µé¢":"æ‚¨æ²¡æœ‰æƒé™è®¿é—®æ­¤é¡µé¢ï¼Œè¯·è”ç³»ç®¡ç†å‘˜è·å–ç›¸åº”æƒé™"}),h=m(()=>{if(!a.value)return"éœ€è¦ç™»å½•";const o=a.value.ban_status?.toLowerCase();return o&&o!=="normal"?"è´¦æˆ·çŠ¶æ€å¼‚å¸¸":"æƒé™ä¸è¶³"}),x=m(()=>{if(!a.value)return"æ­¤é¡µé¢éœ€è¦ç”¨æˆ·ç™»å½•åæ‰èƒ½è®¿é—®ï¼Œè¯·å…ˆç™»å½•æ‚¨çš„è´¦æˆ·ã€‚";const o=a.value.ban_status?.toLowerCase();if(o&&o!=="normal")return"æ‚¨çš„è´¦æˆ·å½“å‰çŠ¶æ€å¼‚å¸¸ï¼Œæ— æ³•æ­£å¸¸è®¿é—®ç³»ç»ŸåŠŸèƒ½ã€‚å¦‚æœ‰ç–‘é—®è¯·è”ç³»ç®¡ç†å‘˜ã€‚";const e=u.currentRoute.value.query.target;return e?.includes("/admin")?"æ­¤é¡µé¢ä»…é™ç³»ç»Ÿç®¡ç†å‘˜è®¿é—®ã€‚å¦‚éœ€ç®¡ç†å‘˜æƒé™ï¼Œè¯·è”ç³»è¶…çº§ç®¡ç†å‘˜ç”³è¯·ã€‚":e?.includes("/elder")?"æ­¤é¡µé¢ä»…é™å…ƒè€ç”¨æˆ·è®¿é—®ã€‚å…ƒè€æƒé™éœ€è¦é€šè¿‡ç¤¾åŒºè´¡çŒ®æˆ–ç®¡ç†å‘˜æŒ‡å®šè·å¾—ã€‚":"æ‚¨å½“å‰çš„ç”¨æˆ·è§’è‰²æ— æ³•è®¿é—®æ­¤é¡µé¢ã€‚ä¸åŒé¡µé¢éœ€è¦ä¸åŒçš„ç”¨æˆ·æƒé™ï¼Œè¯·ç¡®è®¤æ‚¨çš„è®¿é—®æƒé™ã€‚"});function B(o){return{admin:"ç³»ç»Ÿç®¡ç†å‘˜",elder:"å…ƒè€ç”¨æˆ·",moderator:"ç‰ˆä¸»",user:"æ™®é€šç”¨æˆ·",guest:"æ¸¸å®¢"}[o]||o}function M(o){return{normal:"success",Normal:"success",suspended:"warning",Suspended:"warning",banned:"danger",Banned:"danger"}[o]||"info"}function S(o){return{normal:"æ­£å¸¸",Normal:"æ­£å¸¸",suspended:"æš‚åœ",Suspended:"æš‚åœ",banned:"å°ç¦",Banned:"å°ç¦"}[o]||o}function N(){u.back()}function L(){u.push("/")}function R(){u.push("/login")}async function I(){try{await $(),k.success("å·²é€€å‡ºç™»å½•"),u.push("/login")}catch(o){console.error("é€€å‡ºç™»å½•å¤±è´¥:",o),k.error("é€€å‡ºç™»å½•å¤±è´¥")}}return F(()=>{console.warn("403è®¿é—®è¢«æ‹’ç»:",{user:a.value?.username,path:u.currentRoute.value.fullPath,time:v.value})}),(o,e)=>{const i=r("el-icon"),_=r("el-descriptions-item"),T=r("el-tag"),V=r("el-descriptions"),b=r("el-card"),q=r("el-alert"),f=r("el-button"),z=r("el-button-group"),D=r("el-text");return p(),y("div",W,[s("div",X,[s("div",Y,[t(i,{size:120,color:"#f56565"},{default:n(()=>[t(d(O))]),_:1})]),s("div",Z,[e[6]||(e[6]=s("h1",{class:"forbidden-title"},"403 - è®¿é—®è¢«æ‹’ç»",-1)),s("p",ee,c(C.value),1),a.value?(p(),y("div",te,[t(b,{shadow:"hover"},{header:n(()=>e[0]||(e[0]=[s("span",null,"å½“å‰ç”¨æˆ·ä¿¡æ¯",-1)])),default:n(()=>[t(V,{column:2,border:""},{default:n(()=>[t(_,{label:"ç”¨æˆ·å"},{default:n(()=>[l(c(a.value.username),1)]),_:1}),t(_,{label:"è§’è‰²"},{default:n(()=>[l(c(B(a.value.role)),1)]),_:1}),t(_,{label:"çŠ¶æ€"},{default:n(()=>[t(T,{type:M(a.value.ban_status)},{default:n(()=>[l(c(S(a.value.ban_status)),1)]),_:1},8,["type"])]),_:1}),t(_,{label:"è®¿é—®æ—¶é—´"},{default:n(()=>[l(c(v.value),1)]),_:1})]),_:1})]),_:1})])):H("",!0),s("div",ne,[t(q,{title:h.value,description:x.value,type:"warning",closable:!1,"show-icon":""},null,8,["title","description"])]),s("div",oe,[t(z,null,{default:n(()=>[t(f,{type:"primary",onClick:N},{default:n(()=>[t(i,null,{default:n(()=>[t(d(P))]),_:1}),e[1]||(e[1]=l(" è¿”å›ä¸Šä¸€é¡µ "))]),_:1,__:[1]}),t(f,{onClick:L},{default:n(()=>[t(i,null,{default:n(()=>[t(d(U))]),_:1}),e[2]||(e[2]=l(" è¿”å›é¦–é¡µ "))]),_:1,__:[2]}),a.value?(p(),w(f,{key:0,onClick:I},{default:n(()=>[t(i,null,{default:n(()=>[t(d(A))]),_:1}),e[3]||(e[3]=l(" åˆ‡æ¢è´¦æˆ· "))]),_:1,__:[3]})):(p(),w(f,{key:1,onClick:R},{default:n(()=>[t(i,null,{default:n(()=>[t(d(G))]),_:1}),e[4]||(e[4]=l(" ç™»å½• "))]),_:1,__:[4]}))]),_:1})]),s("div",se,[t(D,{type:"info",size:"small"},{default:n(()=>e[5]||(e[5]=[l(" å¦‚æœæ‚¨è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªé”™è¯¯ï¼Œè¯·è”ç³»ç³»ç»Ÿç®¡ç†å‘˜ ")])),_:1,__:[5]})])])]),s("div",ae,[t(b,{shadow:"never"},{header:n(()=>[t(i,null,{default:n(()=>[t(d(K))]),_:1}),e[7]||(e[7]=l(" å®‰å…¨æç¤º "))]),default:n(()=>[e[8]||(e[8]=s("ul",{class:"security-tips"},[s("li",null,"ğŸ”’ ç³»ç»Ÿå·²è®°å½•æ‚¨çš„è®¿é—®å°è¯•"),s("li",null,"âš ï¸ é‡å¤è¶Šæƒè®¿é—®å¯èƒ½å¯¼è‡´è´¦æˆ·è¢«é™åˆ¶"),s("li",null,"ğŸ“ å¦‚éœ€ç”³è¯·æƒé™ï¼Œè¯·è”ç³»ç³»ç»Ÿç®¡ç†å‘˜"),s("li",null,"ğŸ›¡ï¸ è¯·éµå®ˆç³»ç»Ÿä½¿ç”¨è§„èŒƒå’Œå®‰å…¨æ”¿ç­–")],-1))]),_:1,__:[8]})])])}}}),_e=J(le,[["__scopeId","data-v-8760be43"]]);export{_e as default};
