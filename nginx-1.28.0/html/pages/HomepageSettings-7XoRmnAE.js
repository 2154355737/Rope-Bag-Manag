import{p as Q,c as T,ad as X,K as k,E as q}from"../chunks/element-plus-Cc1YNc_4.js";import{s as N}from"../chunks/settings-CQEJtwx0.js";import{x as R,r as W,X as w,j as Y,y as g,A as s,Q as l,I as t,u as U,al as _,M as f,H as Z,K as ee,P as C,a6 as S,O as j,z as c}from"../chunks/vue-vendor-BleHOoLr.js";import{_ as le}from"../assets/index-B_N-aWSj.js";import"../chunks/utils-Dq7h7Pqt.js";const te={class:"admin-page homepage-settings"},oe={class:"page-header"},se={class:"header-content"},ae={class:"header-left"},ne={class:"header-icon"},de={class:"header-actions"},ie={class:"settings-content"},re={class:"carousel-items-editor"},ue={style:{display:"flex","justify-content":"space-between","align-items":"center"}},me={class:"footer-links-editor"},pe={style:{display:"flex","justify-content":"space-between","align-items":"center"}},_e={style:{display:"flex",gap:"10px","align-items":"center","margin-bottom":"10px"}},fe=R({__name:"HomepageSettings",setup(ce){const h=W(!1),n=w({hero_title:"绳包管理器",hero_subtitle:"专业的资源管理与分享平台",copyright_text:"© 2024 绳包管理器. All rights reserved.",footer_links:"{}",seo_keywords:"绳包管理器,资源管理,文件分享,社区",seo_description:"绳包管理器是一个专业的资源管理与分享平台，提供便捷的文件管理和社区交流功能。",seo_author:"绳包管理器团队",carousel_settings:"{}"}),y=w({}),m=w({enabled:!0,items:[{title:"欢迎使用绳包管理器",description:"专业的资源管理与分享平台，为您提供便捷的文件管理和社区交流功能。",image:"https://via.placeholder.com/800x400/667eea/ffffff?text=轮播图1",link:"/about",order:1},{title:"丰富的资源库",description:"海量优质资源，涵盖各种类型，满足您的不同需求。",image:"https://via.placeholder.com/800x400/764ba2/ffffff?text=轮播图2",link:"/resources",order:2}]}),O=()=>{try{const a=JSON.parse(n.footer_links||"{}");Object.assign(y,a)}catch{Object.assign(y,{community:{title:"社区",links:[{text:"关于我们",url:"/about"}]}})}},E=()=>{try{const a=JSON.parse(n.carousel_settings||"{}");a.enabled!==void 0&&(m.enabled=a.enabled),a.items&&(m.items=a.items)}catch{}},L=()=>{n.footer_links=JSON.stringify(y)},$=()=>{n.carousel_settings=JSON.stringify(m)},B=()=>{m.items.push({title:"新轮播图",description:"请输入描述",image:"https://via.placeholder.com/800x400/667eea/ffffff?text=新轮播图",link:"",order:m.items.length+1})},A=a=>{m.items.splice(a,1),m.items.forEach((e,r)=>{e.order=r+1})},J=()=>{const a=`group_${Date.now()}`;y[a]={title:"新分组",links:[{text:"新链接",url:"#"}]}},M=a=>{delete y[String(a)]},D=a=>{a.links.push({text:"新链接",url:"#"})},F=(a,e)=>{a.links.splice(e,1)},H=async()=>{try{const a=["hero_title","hero_subtitle","copyright_text","footer_links","seo_keywords","seo_description","seo_author","carousel_settings"];for(const e of a)try{const r=await N.getSetting(e);r.code===0&&r.data&&(n[e]=r.data.value)}catch(r){console.warn(`加载配置项 ${e} 失败:`,r)}O(),E()}catch(a){console.error("加载设置失败:",a),k.error("加载设置失败")}},I=async()=>{try{h.value=!0,L(),$();const a=Object.entries(n).map(([e,r])=>N.updateSetting(e,r));await Promise.all(a),k.success("设置保存成功")}catch(a){console.error("保存设置失败:",a),k.error("保存设置失败")}finally{h.value=!1}},G=async()=>{try{await q.confirm("确定要重置所有主页设置吗？此操作不可撤销。","确认重置",{type:"warning"}),Object.assign(n,{hero_title:"绳包管理器",hero_subtitle:"专业的资源管理与分享平台",copyright_text:"© 2024 绳包管理器. All rights reserved.",footer_links:"{}",seo_keywords:"绳包管理器,资源管理,文件分享,社区",seo_description:"绳包管理器是一个专业的资源管理与分享平台，提供便捷的文件管理和社区交流功能。",seo_author:"绳包管理器团队"}),O(),k.success("设置已重置")}catch{}};return Y(()=>{H()}),(a,e)=>{const r=_("el-icon"),p=_("el-button"),u=_("el-input"),i=_("el-form-item"),v=_("el-form"),V=_("el-card"),K=_("el-switch"),P=_("el-input-number");return c(),g("div",te,[s("div",oe,[s("div",se,[s("div",ae,[s("div",ne,[l(r,{size:32},{default:t(()=>[l(U(Q))]),_:1})]),e[7]||(e[7]=s("div",{class:"header-info"},[s("h1",{class:"page-title"},"主页设置"),s("p",{class:"page-subtitle"},"配置网站主页的显示内容和样式")],-1))]),s("div",de,[l(p,{type:"primary",onClick:I,loading:h.value},{default:t(()=>[l(r,null,{default:t(()=>[l(U(T))]),_:1}),e[8]||(e[8]=f(" 保存设置 "))]),_:1,__:[8]},8,["loading"]),l(p,{onClick:G,disabled:h.value},{default:t(()=>[l(r,null,{default:t(()=>[l(U(X))]),_:1}),e[9]||(e[9]=f(" 重置 "))]),_:1,__:[9]},8,["disabled"])])])]),s("div",ie,[l(V,null,{header:t(()=>e[10]||(e[10]=[s("span",null,"英雄区域设置",-1)])),default:t(()=>[l(v,{model:n,"label-width":"120px"},{default:t(()=>[l(i,{label:"主标题"},{default:t(()=>[l(u,{modelValue:n.hero_title,"onUpdate:modelValue":e[0]||(e[0]=o=>n.hero_title=o),placeholder:"请输入主页主标题",maxlength:"50","show-word-limit":""},null,8,["modelValue"]),e[11]||(e[11]=s("div",{class:"form-tip"},"显示在主页顶部的主标题",-1))]),_:1,__:[11]}),l(i,{label:"副标题"},{default:t(()=>[l(u,{modelValue:n.hero_subtitle,"onUpdate:modelValue":e[1]||(e[1]=o=>n.hero_subtitle=o),placeholder:"请输入主页副标题",maxlength:"100","show-word-limit":""},null,8,["modelValue"]),e[12]||(e[12]=s("div",{class:"form-tip"},"显示在主标题下方的描述文字",-1))]),_:1,__:[12]})]),_:1},8,["model"])]),_:1}),l(V,{style:{"margin-top":"20px"}},{header:t(()=>e[13]||(e[13]=[s("span",null,"轮播图设置",-1)])),default:t(()=>[l(v,{model:n,"label-width":"120px"},{default:t(()=>[l(i,{label:"轮播图开关"},{default:t(()=>[l(K,{modelValue:m.enabled,"onUpdate:modelValue":e[2]||(e[2]=o=>m.enabled=o),"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"]),e[14]||(e[14]=s("div",{class:"form-tip"},"控制是否在主页显示轮播图",-1))]),_:1,__:[14]}),m.enabled?(c(),Z(i,{key:0,label:"轮播图数据"},{default:t(()=>[s("div",re,[(c(!0),g(C,null,S(m.items,(o,b)=>(c(),g("div",{key:b,class:"carousel-item-editor"},[l(V,{shadow:"never",style:{"margin-bottom":"15px"}},{header:t(()=>[s("div",ue,[s("span",null,"轮播图 "+j(b+1),1),l(p,{type:"danger",size:"small",onClick:d=>A(b)},{default:t(()=>e[15]||(e[15]=[f(" 删除 ")])),_:2,__:[15]},1032,["onClick"])])]),default:t(()=>[l(i,{label:"标题"},{default:t(()=>[l(u,{modelValue:o.title,"onUpdate:modelValue":d=>o.title=d,placeholder:"请输入轮播图标题"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(i,{label:"描述"},{default:t(()=>[l(u,{modelValue:o.description,"onUpdate:modelValue":d=>o.description=d,type:"textarea",rows:2,placeholder:"请输入轮播图描述"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(i,{label:"图片链接"},{default:t(()=>[l(u,{modelValue:o.image,"onUpdate:modelValue":d=>o.image=d,placeholder:"请输入图片链接地址"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(i,{label:"跳转链接"},{default:t(()=>[l(u,{modelValue:o.link,"onUpdate:modelValue":d=>o.link=d,placeholder:"请输入点击跳转的链接（可选）"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(i,{label:"排序"},{default:t(()=>[l(P,{modelValue:o.order,"onUpdate:modelValue":d=>o.order=d,min:1,max:10},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]))),128)),l(p,{type:"success",onClick:B},{default:t(()=>e[16]||(e[16]=[f(" 添加轮播图 ")])),_:1,__:[16]})]),e[17]||(e[17]=s("div",{class:"form-tip"},"配置主页轮播图的内容和链接",-1))]),_:1,__:[17]})):ee("",!0)]),_:1},8,["model"])]),_:1}),l(V,{style:{"margin-top":"20px"}},{header:t(()=>e[18]||(e[18]=[s("span",null,"页脚设置",-1)])),default:t(()=>[l(v,{model:n,"label-width":"120px"},{default:t(()=>[l(i,{label:"版权信息"},{default:t(()=>[l(u,{modelValue:n.copyright_text,"onUpdate:modelValue":e[3]||(e[3]=o=>n.copyright_text=o),placeholder:"请输入版权信息",maxlength:"200","show-word-limit":""},null,8,["modelValue"]),e[19]||(e[19]=s("div",{class:"form-tip"},"显示在页面底部的版权信息",-1))]),_:1,__:[19]}),l(i,{label:"页脚链接"},{default:t(()=>[s("div",me,[(c(!0),g(C,null,S(y,(o,b)=>(c(),g("div",{key:b,class:"link-group-editor"},[l(V,{shadow:"never",style:{"margin-bottom":"15px"}},{header:t(()=>[s("div",pe,[s("span",null,j(o.title),1),l(p,{type:"danger",size:"small",onClick:d=>M(b)},{default:t(()=>e[20]||(e[20]=[f(" 删除分组 ")])),_:2,__:[20]},1032,["onClick"])])]),default:t(()=>[l(i,{label:"分组标题"},{default:t(()=>[l(u,{modelValue:o.title,"onUpdate:modelValue":d=>o.title=d,placeholder:"请输入分组标题"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),(c(!0),g(C,null,S(o.links,(d,z)=>(c(),g("div",{key:z,class:"link-item"},[s("div",_e,[l(u,{modelValue:d.text,"onUpdate:modelValue":x=>d.text=x,placeholder:"链接文字",style:{flex:"1"}},null,8,["modelValue","onUpdate:modelValue"]),l(u,{modelValue:d.url,"onUpdate:modelValue":x=>d.url=x,placeholder:"链接地址",style:{flex:"1"}},null,8,["modelValue","onUpdate:modelValue"]),l(p,{type:"danger",size:"small",onClick:x=>F(o,z)},{default:t(()=>e[21]||(e[21]=[f(" 删除 ")])),_:2,__:[21]},1032,["onClick"])])]))),128)),l(p,{type:"primary",size:"small",onClick:d=>D(o)},{default:t(()=>e[22]||(e[22]=[f(" 添加链接 ")])),_:2,__:[22]},1032,["onClick"])]),_:2},1024)]))),128)),l(p,{type:"success",onClick:J},{default:t(()=>e[23]||(e[23]=[f(" 添加新分组 ")])),_:1,__:[23]})]),e[24]||(e[24]=s("div",{class:"form-tip"},"配置页脚的链接分组和链接项",-1))]),_:1,__:[24]})]),_:1},8,["model"])]),_:1}),l(V,{style:{"margin-top":"20px"}},{header:t(()=>e[25]||(e[25]=[s("span",null,"SEO设置",-1)])),default:t(()=>[l(v,{model:n,"label-width":"120px"},{default:t(()=>[l(i,{label:"网站关键词"},{default:t(()=>[l(u,{modelValue:n.seo_keywords,"onUpdate:modelValue":e[4]||(e[4]=o=>n.seo_keywords=o),type:"textarea",rows:2,placeholder:"请输入网站关键词，用逗号分隔",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(i,{label:"网站描述"},{default:t(()=>[l(u,{modelValue:n.seo_description,"onUpdate:modelValue":e[5]||(e[5]=o=>n.seo_description=o),type:"textarea",rows:3,placeholder:"请输入网站描述",maxlength:"300","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(i,{label:"作者信息"},{default:t(()=>[l(u,{modelValue:n.seo_author,"onUpdate:modelValue":e[6]||(e[6]=o=>n.seo_author=o),placeholder:"请输入网站作者",maxlength:"50"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1})])])}}}),ve=le(fe,[["__scopeId","data-v-b699e73b"]]);export{ve as default};
