import{b as pe,U as fe,I as Re,c as He,T as Qe,u as qe,X as Je,Y as Ke,f as _e,Z as ge,L as be,$ as Oe,H as d,E as ye}from"../chunks/element-plus-hGoKm610.js";import{a as H,h as Ve,r as W,_ as We}from"../assets/index-D3Kp6etV.js";import{p as I}from"../chunks/packages-B3dEIScr.js";import{c as X}from"../chunks/categories-Cxelk8WM.js";import{x as Xe,r as c,c as Ye,j as Ze,y as Q,A as s,Q as a,I as o,u as b,al as V,M as u,O as f,P as ne,a6 as de,H as Y,J as Ge,ar as ea,K as aa,w as we,z as x}from"../chunks/vue-vendor-BleHOoLr.js";import"../chunks/utils-Dq7h7Pqt.js";const Z={get:A=>H.get(`/v1/cache/${A}`),set:(A,h,D)=>H.post("/v1/cache",{key:A,value:h,ttl:D}),delete:A=>H.delete(`/v1/cache/${A}`),clear:()=>H.delete("/v1/cache"),getStats:()=>H.get("/v1/cache/stats")},la={class:"package-manage-desktop"},ta={class:"page-header"},oa={class:"header-content"},sa={class:"header-left"},na={class:"header-icon"},da={class:"header-actions"},ua={class:"stats-section"},ra={class:"stats-grid"},ia={class:"stat-card"},va={class:"stat-icon"},ca={class:"stat-content"},ma={class:"stat-number"},pa={class:"stat-card"},fa={class:"stat-icon"},_a={class:"stat-content"},ga={class:"stat-number"},ba={class:"stat-card"},ya={class:"stat-icon"},Va={class:"stat-content"},wa={class:"stat-number"},Ca={class:"stat-card"},ka={class:"stat-icon"},ha={class:"stat-content"},xa={class:"stat-number"},Ua={class:"search-section"},Pa={class:"search-left"},Da={class:"search-right"},$a={class:"table-section"},za={class:"pagination-section"},Aa={key:0,class:"package-detail"},Ta={class:"detail-header"},Sa=["href"],Ia={class:"detail-actions"},Ma={class:"category-management"},Ba={class:"category-header"},La=Xe({__name:"PackageManage",setup(A){const h=c(""),D=c(""),M=c(""),G=c(!1),q=c(1),ee=c(20),B=c(!1),L=c(!1),E=c(!1),ae=c(!1),N=c(!1),j=c(!1),_=c(null),k=c([]),J=c(0),le=c(0),te=c(0),oe=c(0),$=c([]),i=c({name:"",author:"",version:"1.0.0",category_id:void 0,status:"正常",description:"",url:""}),C=c({name:"",description:"",enabled:!0}),r=c({id:0,name:"",author:"",version:"",category_id:void 0,status:"",description:"",url:""}),w=c({id:0,name:"",description:"",enabled:!0}),Ce=Ye(()=>{let l=k.value;return h.value&&(l=l.filter(e=>e.name.toLowerCase().includes(h.value.toLowerCase())||e.author.toLowerCase().includes(h.value.toLowerCase()))),M.value&&(l=l.filter(e=>e.type===M.value)),l}),ke=async l=>{try{const e=await I.getPackage(l);if(e.code===0&&e.data){const n=k.value.findIndex(v=>v.id===l);n!==-1&&(k.value[n].downloads=e.data.download_count,se())}}catch(e){console.error("刷新下载计数失败:",e)}};function he(){we([D,M],()=>{z()}),we(()=>k.value,()=>{se()},{deep:!0})}async function z(){try{G.value=!0,Z.delete("getPackages");const l={};D.value&&(l.status=D.value),h.value&&(l.search=h.value);const e=await I.getPackages(l);e.code===0&&e.data?(k.value=e.data.list?.map(n=>{let v="未分类";if(n.category_id){const g=$.value.find(m=>m.id===n.category_id);g&&(v=g.name)}return{id:n.id,name:n.name,author:n.author,version:n.version||"",category_id:n.category_id,type:v,status:n.status||"Active",description:n.description||"",downloads:n.download_count,uploadTime:n.created_at,lastUpdate:n.updated_at,url:n.file_url||""}})||[],console.log("处理后的绳包数据:",k.value),se()):d.error("获取绳包数据失败")}catch(l){console.error("获取绳包数据错误:",l),d.error("获取绳包数据失败")}finally{G.value=!1}}function se(){J.value=k.value.length,le.value=k.value.filter(e=>e.status==="正常"||e.status==="Active"||e.status==="已发布").length,te.value=k.value.filter(e=>e.status==="待审核"||e.status==="Inactive").length;const l=new Set(k.value.map(e=>e.author));oe.value=l.size,console.log("统计数据更新:",{总资源数:J.value,已发布:le.value,待审核:te.value,活跃用户:oe.value})}async function U(){try{Z.delete("getCategories");const l=await X.getCategories();l.code===0&&l.data?($.value=l.data.list||[],console.log("获取到的分类数据:",$.value)):d.error("获取分类数据失败")}catch(l){console.error("获取分类数据错误:",l),d.error("获取分类数据失败")}}function xe(){z()}async function Ue(){Z.delete("getPackages"),Z.delete("getCategories"),await Promise.all([z(),U()]),d.success("数据已刷新")}function Pe(){L.value=!0}const De=l=>{_.value=l,B.value=!0,Ve.logView("Package",l.id,`管理员查看绳包详情: ${l.name}`).catch(e=>console.error("记录查看行为失败:",e))},ue=async l=>{try{if(l.status!=="正常"&&l.status!=="Active"){d.warning(`资源 ${l.name} 状态不为正常，无法下载`);return}if(!l.url||l.url.trim()===""){d.warning(`资源 ${l.name} 没有项目链接，无法下载`);return}const e=await I.downloadPackage(l.id);e.code!==0&&console.warn("增加下载计数失败:",e.message),await W.logDownload(l.id),window.open(l.url,"_blank"),d.success(`开始下载 ${l.name}`),setTimeout(()=>{ke(l.id)},500)}catch(e){console.error("下载错误:",e),d.error("下载失败")}};function $e(l){r.value={id:l.id,name:l.name,author:l.author,version:l.version,category_id:l.category_id?Number(l.category_id):void 0,status:l.status||"Active",description:l.description,url:l.url},E.value=!0,Ve.logAction("EditPackage",`管理员打开编辑绳包: ${l.name}`,"Package",l.id).catch(e=>console.error("记录编辑行为失败:",e))}async function ze(){try{if(!r.value.name.trim()){d.error("请输入绳包名称");return}if(!r.value.author.trim()){d.error("请输入作者");return}if(!r.value.description.trim()){d.error("请输入描述");return}if(!r.value.url.trim()){d.error("请输入项目链接");return}let l="Active";switch(r.value.status){case"正常":case"已发布":l="Active";break;case"待审核":case"维护中":l="Inactive";break;case"已拒绝":l="Deleted";break}const e={name:r.value.name,version:r.value.version,description:r.value.description,category_id:r.value.category_id,status:l,file_url:r.value.url};console.log("更新绳包数据:",e);const n=await I.updatePackage(r.value.id,e);n.code===0?(d.success("绳包更新成功"),E.value=!1,setTimeout(async()=>{await U(),await z()},500)):d.error(n.message||"更新失败")}catch(l){console.error("更新绳包错误:",l),d.error("更新失败")}}async function Ae(l){try{await ye.confirm(`确定要删除绳包 ${l.name} 吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const e={id:l.id,name:l.name,author:l.author},n=await I.deletePackage(l.id);n.code===0?(d.success("绳包已删除"),setTimeout(async()=>{await z(),await U()},500)):d.error(n.message||"删除失败")}catch(e){e!=="cancel"&&(console.error("删除绳包错误:",e),d.error("删除失败"))}}async function Te(){try{if(!i.value.name.trim()){d.error("请输入绳包名称");return}if(!i.value.author.trim()){d.error("请输入作者");return}if(!i.value.description.trim()){d.error("请输入描述");return}if(!i.value.url.trim()){d.error("请输入项目链接");return}const l={name:i.value.name,author:i.value.author,version:i.value.version,description:i.value.description,category_id:i.value.category_id,file_url:i.value.url};console.log("创建绳包数据:",l);const e=await I.adminCreatePackage(l);e.code===0?(d.success("绳包添加成功"),L.value=!1,i.value={name:"",author:"",version:"1.0.0",category_id:void 0,status:"正常",description:"",url:""},setTimeout(async()=>{await U(),await z()},500)):d.error(e.message||"添加失败")}catch(l){console.error("添加绳包错误:",l),d.error("添加失败")}}async function Se(){try{if(!C.value.name.trim()){d.error("请输入分类名称");return}const l=await X.addCategory({name:C.value.name,description:C.value.description,enabled:C.value.enabled});l.code===0?(d.success("分类添加成功"),l.data&&l.data.id&&await W.logCreate(l.data.id,"Category"),N.value=!1,C.value={name:"",description:"",enabled:!0},await U()):d.error(l.message||"添加分类失败")}catch(l){console.error("添加分类出错:",l),d.error("添加分类失败")}}function Ie(l){w.value={id:l.id,name:l.name,description:l.description,enabled:l.enabled},j.value=!0}async function Me(){try{if(!w.value.name.trim()){d.error("请输入分类名称");return}const l=await X.updateCategory(w.value.id,{name:w.value.name,description:w.value.description,enabled:w.value.enabled});l.code===0?(d.success("分类更新成功"),await W.logUpdate(w.value.id,"Category"),j.value=!1,await U()):d.error(l.message||"更新分类失败")}catch(l){console.error("更新分类出错:",l),d.error("更新分类失败")}}async function Be(l){try{await ye.confirm(`确定要删除分类 ${l.name} 吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await W.logDelete(l.id,"Category");const e=await X.deleteCategory(l.id);e.code===0?(d.success("分类已删除"),await U()):d.error(e.message||"删除分类失败")}catch(e){e!=="cancel"&&(console.error("删除分类出错:",e),d.error("删除分类失败"))}}function re(l){return{正常:"正常",已发布:"已发布",待审核:"待审核",已拒绝:"已拒绝",维护中:"维护中",Active:"已发布",Pending:"待审核",Rejected:"已拒绝",Inactive:"已下架",Deleted:"已删除"}[l]||l}function ie(l){return{正常:"success",已发布:"success",待审核:"warning",已拒绝:"danger",维护中:"warning",已下架:"info",已删除:"danger",Active:"success",Pending:"warning",Rejected:"danger",Inactive:"info",Deleted:"danger"}[l]||"info"}function Ea(l){return l}function ve(l){return{教程:"primary",工具:"success",模板:"warning",其他:"info",未分类:"info"}[l]||"info"}function Le(l){ee.value=l,q.value=1}function Ee(l){q.value=l}function K(l){return new Date(l).toLocaleDateString("zh-CN")}return Ze(async()=>{await U(),await z(),he()}),(l,e)=>{const n=V("el-icon"),v=V("el-button"),g=V("el-input"),m=V("el-option"),T=V("el-select"),y=V("el-table-column"),F=V("el-tag"),ce=V("el-table"),Ne=V("el-pagination"),P=V("el-descriptions-item"),je=V("el-descriptions"),S=V("el-dialog"),p=V("el-form-item"),O=V("el-form"),me=V("el-switch"),Fe=ea("loading");return x(),Q("div",la,[s("div",ta,[s("div",oa,[s("div",sa,[s("div",na,[a(n,{size:32},{default:o(()=>[a(b(pe))]),_:1})]),e[39]||(e[39]=s("div",{class:"header-info"},[s("h1",{class:"page-title"},"资源管理"),s("p",{class:"page-subtitle"},"管理绳包资源和社区内容")],-1))]),s("div",da,[a(v,{type:"primary",onClick:Pe},{default:o(()=>[a(n,null,{default:o(()=>[a(b(fe))]),_:1}),e[40]||(e[40]=u(" 添加资源 "))]),_:1,__:[40]}),a(v,{onClick:e[0]||(e[0]=t=>ae.value=!0)},{default:o(()=>[a(n,null,{default:o(()=>[a(b(Re))]),_:1}),e[41]||(e[41]=u(" 分类管理 "))]),_:1,__:[41]})])])]),s("div",ua,[s("div",ra,[s("div",ia,[s("div",va,[a(n,{size:24},{default:o(()=>[a(b(pe))]),_:1})]),s("div",ca,[s("div",ma,f(J.value),1),e[42]||(e[42]=s("div",{class:"stat-label"},"总资源数",-1))])]),s("div",pa,[s("div",fa,[a(n,{size:24},{default:o(()=>[a(b(He))]),_:1})]),s("div",_a,[s("div",ga,f(le.value),1),e[43]||(e[43]=s("div",{class:"stat-label"},"已发布",-1))])]),s("div",ba,[s("div",ya,[a(n,{size:24},{default:o(()=>[a(b(Qe))]),_:1})]),s("div",Va,[s("div",wa,f(te.value),1),e[44]||(e[44]=s("div",{class:"stat-label"},"待审核",-1))])]),s("div",Ca,[s("div",ka,[a(n,{size:24},{default:o(()=>[a(b(qe))]),_:1})]),s("div",ha,[s("div",xa,f(oe.value),1),e[45]||(e[45]=s("div",{class:"stat-label"},"活跃用户",-1))])])])]),s("div",Ua,[s("div",Pa,[a(g,{modelValue:h.value,"onUpdate:modelValue":e[1]||(e[1]=t=>h.value=t),placeholder:"搜索绳包...","prefix-icon":"Search",clearable:"",style:{width:"300px"},onInput:xe},null,8,["modelValue"]),a(T,{modelValue:D.value,"onUpdate:modelValue":e[2]||(e[2]=t=>D.value=t),placeholder:"状态筛选",clearable:"",style:{width:"150px"}},{default:o(()=>[a(m,{label:"全部",value:""}),a(m,{label:"已发布",value:"Active"}),a(m,{label:"待审核",value:"Pending"}),a(m,{label:"已拒绝",value:"Rejected"}),a(m,{label:"已下架",value:"Inactive"}),a(m,{label:"已删除",value:"Deleted"})]),_:1},8,["modelValue"]),a(T,{modelValue:M.value,"onUpdate:modelValue":e[3]||(e[3]=t=>M.value=t),placeholder:"分类筛选",clearable:"",style:{width:"150px"}},{default:o(()=>[a(m,{label:"全部",value:""}),(x(!0),Q(ne,null,de($.value,t=>(x(),Y(m,{key:t.id,label:t.name,value:t.name,disabled:!t.enabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])]),s("div",Da,[a(v,{onClick:Ue},{default:o(()=>[a(n,null,{default:o(()=>[a(b(Je))]),_:1}),e[46]||(e[46]=u(" 刷新 "))]),_:1,__:[46]})])]),s("div",$a,[Ge((x(),Y(ce,{data:Ce.value,style:{width:"100%"},"header-cell-style":{background:"var(--bg-secondary)",color:"var(--text-primary)"},"row-style":{background:"var(--bg-card)"},border:"",stripe:""},{default:o(()=>[a(y,{prop:"id",label:"ID",width:"80"}),a(y,{prop:"name",label:"名称",width:"200"}),a(y,{prop:"author",label:"作者",width:"120"}),a(y,{prop:"version",label:"版本",width:"100"}),a(y,{prop:"type",label:"分类",width:"100"},{default:o(({row:t})=>[a(F,{type:ve(t.type)},{default:o(()=>[u(f(t.type),1)]),_:2},1032,["type"])]),_:1}),a(y,{prop:"status",label:"状态",width:"100"},{default:o(({row:t})=>[a(F,{type:ie(t.status)},{default:o(()=>[u(f(re(t.status)),1)]),_:2},1032,["type"])]),_:1}),a(y,{prop:"downloads",label:"下载次数",width:"120"}),a(y,{prop:"uploadTime",label:"上传时间",width:"150"},{default:o(({row:t})=>[u(f(K(t.uploadTime)),1)]),_:1}),a(y,{prop:"lastUpdate",label:"最后更新",width:"150"},{default:o(({row:t})=>[u(f(K(t.lastUpdate)),1)]),_:1}),a(y,{prop:"description",label:"描述","min-width":"200","show-overflow-tooltip":""}),a(y,{label:"操作",width:"250",fixed:"right"},{default:o(({row:t})=>[a(v,{size:"small",type:"primary",onClick:R=>De(t)},{default:o(()=>[a(n,null,{default:o(()=>[a(b(Ke))]),_:1}),e[47]||(e[47]=u(" 查看 "))]),_:2,__:[47]},1032,["onClick"]),a(v,{size:"small",type:"success",onClick:R=>ue(t)},{default:o(()=>[a(n,null,{default:o(()=>[a(b(_e))]),_:1}),e[48]||(e[48]=u(" 下载 "))]),_:2,__:[48]},1032,["onClick"]),a(v,{size:"small",type:"warning",onClick:R=>$e(t)},{default:o(()=>[a(n,null,{default:o(()=>[a(b(ge))]),_:1}),e[49]||(e[49]=u(" 编辑 "))]),_:2,__:[49]},1032,["onClick"]),a(v,{size:"small",type:"danger",onClick:R=>Ae(t)},{default:o(()=>[a(n,null,{default:o(()=>[a(b(be))]),_:1}),e[50]||(e[50]=u(" 删除 "))]),_:2,__:[50]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Fe,G.value]])]),s("div",za,[a(Ne,{"current-page":q.value,"onUpdate:currentPage":e[4]||(e[4]=t=>q.value=t),"page-size":ee.value,"onUpdate:pageSize":e[5]||(e[5]=t=>ee.value=t),"page-sizes":[10,20,50,100],total:J.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:Le,onCurrentChange:Ee},null,8,["current-page","page-size","total"])]),a(S,{modelValue:B.value,"onUpdate:modelValue":e[8]||(e[8]=t=>B.value=t),title:"绳包详情",width:"800px","close-on-click-modal":!1},{default:o(()=>[_.value?(x(),Q("div",Aa,[s("div",Ta,[s("h3",null,f(_.value.name),1),a(F,{type:ie(_.value.status)},{default:o(()=>[u(f(re(_.value.status)),1)]),_:1},8,["type"])]),a(je,{column:2,border:""},{default:o(()=>[a(P,{label:"作者"},{default:o(()=>[u(f(_.value.author),1)]),_:1}),a(P,{label:"版本"},{default:o(()=>[u(f(_.value.version),1)]),_:1}),a(P,{label:"类型"},{default:o(()=>[a(F,{type:ve(_.value.type)},{default:o(()=>[u(f(_.value.type),1)]),_:1},8,["type"])]),_:1}),a(P,{label:"下载次数"},{default:o(()=>[u(f(_.value.downloads),1)]),_:1}),a(P,{label:"上传时间"},{default:o(()=>[u(f(K(_.value.uploadTime)),1)]),_:1}),a(P,{label:"最后更新"},{default:o(()=>[u(f(K(_.value.lastUpdate)),1)]),_:1}),a(P,{label:"描述",span:2},{default:o(()=>[u(f(_.value.description),1)]),_:1}),a(P,{label:"项目链接",span:2},{default:o(()=>[s("a",{href:_.value.url,target:"_blank"},f(_.value.url),9,Sa)]),_:1})]),_:1}),s("div",Ia,[a(v,{type:"primary",onClick:e[6]||(e[6]=t=>{ue(_.value),B.value=!1}),disabled:_.value.status!=="正常"&&_.value.status!=="Active"},{default:o(()=>[a(n,null,{default:o(()=>[a(b(_e))]),_:1}),e[51]||(e[51]=u(" 下载绳包 "))]),_:1,__:[51]},8,["disabled"]),a(v,{onClick:e[7]||(e[7]=t=>B.value=!1)},{default:o(()=>[a(n,null,{default:o(()=>[a(b(Oe))]),_:1}),e[52]||(e[52]=u(" 关闭 "))]),_:1,__:[52]})])])):aa("",!0)]),_:1},8,["modelValue"]),a(S,{modelValue:L.value,"onUpdate:modelValue":e[17]||(e[17]=t=>L.value=t),title:"添加资源",width:"600px","close-on-click-modal":!1},{footer:o(()=>[a(v,{onClick:e[16]||(e[16]=t=>L.value=!1)},{default:o(()=>e[53]||(e[53]=[u("取消")])),_:1,__:[53]}),a(v,{type:"primary",onClick:Te},{default:o(()=>e[54]||(e[54]=[u("添加")])),_:1,__:[54]})]),default:o(()=>[a(O,{model:i.value,"label-width":"100px"},{default:o(()=>[a(p,{label:"名称"},{default:o(()=>[a(g,{modelValue:i.value.name,"onUpdate:modelValue":e[9]||(e[9]=t=>i.value.name=t),placeholder:"请输入资源名称"},null,8,["modelValue"])]),_:1}),a(p,{label:"作者"},{default:o(()=>[a(g,{modelValue:i.value.author,"onUpdate:modelValue":e[10]||(e[10]=t=>i.value.author=t),placeholder:"请输入作者"},null,8,["modelValue"])]),_:1}),a(p,{label:"版本"},{default:o(()=>[a(g,{modelValue:i.value.version,"onUpdate:modelValue":e[11]||(e[11]=t=>i.value.version=t),placeholder:"请输入版本号"},null,8,["modelValue"])]),_:1}),a(p,{label:"分类"},{default:o(()=>[a(T,{modelValue:i.value.category_id,"onUpdate:modelValue":e[12]||(e[12]=t=>i.value.category_id=t),placeholder:"选择分类"},{default:o(()=>[(x(!0),Q(ne,null,de($.value,t=>(x(),Y(m,{key:t.id,label:t.name,value:t.id,disabled:!t.enabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(p,{label:"状态"},{default:o(()=>[a(T,{modelValue:i.value.status,"onUpdate:modelValue":e[13]||(e[13]=t=>i.value.status=t),placeholder:"选择状态"},{default:o(()=>[a(m,{label:"正常",value:"正常"}),a(m,{label:"已发布",value:"已发布"}),a(m,{label:"待审核",value:"待审核"}),a(m,{label:"已拒绝",value:"已拒绝"}),a(m,{label:"维护中",value:"维护中"})]),_:1},8,["modelValue"])]),_:1}),a(p,{label:"描述"},{default:o(()=>[a(g,{modelValue:i.value.description,"onUpdate:modelValue":e[14]||(e[14]=t=>i.value.description=t),type:"textarea",rows:3,placeholder:"请输入描述"},null,8,["modelValue"])]),_:1}),a(p,{label:"项目链接"},{default:o(()=>[a(g,{modelValue:i.value.url,"onUpdate:modelValue":e[15]||(e[15]=t=>i.value.url=t),placeholder:"请输入项目链接"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(S,{modelValue:E.value,"onUpdate:modelValue":e[26]||(e[26]=t=>E.value=t),title:"编辑资源",width:"600px","close-on-click-modal":!1},{footer:o(()=>[a(v,{onClick:e[25]||(e[25]=t=>E.value=!1)},{default:o(()=>e[55]||(e[55]=[u("取消")])),_:1,__:[55]}),a(v,{type:"primary",onClick:ze},{default:o(()=>e[56]||(e[56]=[u("保存")])),_:1,__:[56]})]),default:o(()=>[a(O,{model:r.value,"label-width":"100px"},{default:o(()=>[a(p,{label:"名称"},{default:o(()=>[a(g,{modelValue:r.value.name,"onUpdate:modelValue":e[18]||(e[18]=t=>r.value.name=t),placeholder:"请输入资源名称"},null,8,["modelValue"])]),_:1}),a(p,{label:"作者"},{default:o(()=>[a(g,{modelValue:r.value.author,"onUpdate:modelValue":e[19]||(e[19]=t=>r.value.author=t),placeholder:"请输入作者"},null,8,["modelValue"])]),_:1}),a(p,{label:"版本"},{default:o(()=>[a(g,{modelValue:r.value.version,"onUpdate:modelValue":e[20]||(e[20]=t=>r.value.version=t),placeholder:"请输入版本号"},null,8,["modelValue"])]),_:1}),a(p,{label:"分类"},{default:o(()=>[a(T,{modelValue:r.value.category_id,"onUpdate:modelValue":e[21]||(e[21]=t=>r.value.category_id=t),placeholder:"选择分类"},{default:o(()=>[(x(!0),Q(ne,null,de($.value,t=>(x(),Y(m,{key:t.id,label:t.name,value:t.id,disabled:!t.enabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(p,{label:"状态"},{default:o(()=>[a(T,{modelValue:r.value.status,"onUpdate:modelValue":e[22]||(e[22]=t=>r.value.status=t),placeholder:"选择状态"},{default:o(()=>[a(m,{label:"正常",value:"正常"}),a(m,{label:"已发布",value:"已发布"}),a(m,{label:"待审核",value:"待审核"}),a(m,{label:"已拒绝",value:"已拒绝"}),a(m,{label:"维护中",value:"维护中"})]),_:1},8,["modelValue"])]),_:1}),a(p,{label:"描述"},{default:o(()=>[a(g,{modelValue:r.value.description,"onUpdate:modelValue":e[23]||(e[23]=t=>r.value.description=t),type:"textarea",rows:3,placeholder:"请输入描述"},null,8,["modelValue"])]),_:1}),a(p,{label:"项目链接"},{default:o(()=>[a(g,{modelValue:r.value.url,"onUpdate:modelValue":e[24]||(e[24]=t=>r.value.url=t),placeholder:"请输入项目链接"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(S,{modelValue:ae.value,"onUpdate:modelValue":e[38]||(e[38]=t=>ae.value=t),title:"分类管理",width:"800px","close-on-click-modal":!1},{default:o(()=>[s("div",Ma,[s("div",Ba,[a(v,{type:"primary",onClick:e[27]||(e[27]=t=>N.value=!0)},{default:o(()=>[a(n,null,{default:o(()=>[a(b(fe))]),_:1}),e[57]||(e[57]=u(" 添加分类 "))]),_:1,__:[57]})]),a(ce,{data:$.value,style:{width:"100%"},stripe:""},{default:o(()=>[a(y,{prop:"name",label:"分类名称",width:"150"}),a(y,{prop:"description",label:"描述","min-width":"200"}),a(y,{prop:"count",label:"资源数量",width:"100"}),a(y,{prop:"enabled",label:"状态",width:"100"},{default:o(({row:t})=>[a(F,{type:t.enabled?"success":"info"},{default:o(()=>[u(f(t.enabled?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),a(y,{label:"操作",width:"200"},{default:o(({row:t})=>[a(v,{size:"small",onClick:R=>Ie(t)},{default:o(()=>[a(n,null,{default:o(()=>[a(b(ge))]),_:1}),e[58]||(e[58]=u(" 编辑 "))]),_:2,__:[58]},1032,["onClick"]),a(v,{size:"small",type:"danger",onClick:R=>Be(t)},{default:o(()=>[a(n,null,{default:o(()=>[a(b(be))]),_:1}),e[59]||(e[59]=u(" 删除 "))]),_:2,__:[59]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),a(S,{modelValue:N.value,"onUpdate:modelValue":e[32]||(e[32]=t=>N.value=t),title:"添加分类",width:"500px","append-to-body":""},{footer:o(()=>[a(v,{onClick:e[31]||(e[31]=t=>N.value=!1)},{default:o(()=>e[60]||(e[60]=[u("取消")])),_:1,__:[60]}),a(v,{type:"primary",onClick:Se},{default:o(()=>e[61]||(e[61]=[u("添加")])),_:1,__:[61]})]),default:o(()=>[a(O,{model:C.value,"label-width":"100px"},{default:o(()=>[a(p,{label:"分类名称"},{default:o(()=>[a(g,{modelValue:C.value.name,"onUpdate:modelValue":e[28]||(e[28]=t=>C.value.name=t),placeholder:"请输入分类名称"},null,8,["modelValue"])]),_:1}),a(p,{label:"描述"},{default:o(()=>[a(g,{modelValue:C.value.description,"onUpdate:modelValue":e[29]||(e[29]=t=>C.value.description=t),type:"textarea",rows:3,placeholder:"请输入分类描述"},null,8,["modelValue"])]),_:1}),a(p,{label:"状态"},{default:o(()=>[a(me,{modelValue:C.value.enabled,"onUpdate:modelValue":e[30]||(e[30]=t=>C.value.enabled=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(S,{modelValue:j.value,"onUpdate:modelValue":e[37]||(e[37]=t=>j.value=t),title:"编辑分类",width:"500px","append-to-body":""},{footer:o(()=>[a(v,{onClick:e[36]||(e[36]=t=>j.value=!1)},{default:o(()=>e[62]||(e[62]=[u("取消")])),_:1,__:[62]}),a(v,{type:"primary",onClick:Me},{default:o(()=>e[63]||(e[63]=[u("保存")])),_:1,__:[63]})]),default:o(()=>[a(O,{model:w.value,"label-width":"100px"},{default:o(()=>[a(p,{label:"分类名称"},{default:o(()=>[a(g,{modelValue:w.value.name,"onUpdate:modelValue":e[33]||(e[33]=t=>w.value.name=t),placeholder:"请输入分类名称"},null,8,["modelValue"])]),_:1}),a(p,{label:"描述"},{default:o(()=>[a(g,{modelValue:w.value.description,"onUpdate:modelValue":e[34]||(e[34]=t=>w.value.description=t),type:"textarea",rows:3,placeholder:"请输入分类描述"},null,8,["modelValue"])]),_:1}),a(p,{label:"状态"},{default:o(()=>[a(me,{modelValue:w.value.enabled,"onUpdate:modelValue":e[35]||(e[35]=t=>w.value.enabled=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])}}}),qa=We(La,[["__scopeId","data-v-a44fa983"]]);export{qa as default};
