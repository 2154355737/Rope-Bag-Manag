import{r as p,X as Gt,x as Wt,c as $,w as Xt,S as Yt,j as Zt,y as u,A as s,O as _,u as d,Q as a,K as h,I as r,al as x,H as z,a4 as es,P,a6 as L,M as g,D as B,J as at,R as ot,V as $e,C as ts,ax as ss,n as Ce,z as i}from"../chunks/vue-vendor-BleHOoLr.js";import{g as as}from"../chunks/tags-BVMB1T7b.js";import{p as lt}from"../chunks/packages-DTwnlaPG.js";import{s as Me}from"../chunks/settings-CQEJtwx0.js";import{v as nt,u as X,w as Ie,k as os,s as ls,x as ns,y as rs,o as rt,e as is,z as cs,A as ne,B as it,C as us,D as De,f as Fe,F as ds,G as _s,H as Re,j as ps,I as vs,m as gs,J as fs,K as w,E as ms}from"../chunks/element-plus-Cc1YNc_4.js";import{T as hs}from"../chunks/ThemeSwitcher-D6lf2E-3.js";import{a as S,g as re,u as ys,_ as ks}from"../assets/index-B_N-aWSj.js";import{c as ws}from"../chunks/categories-BGQr79qD.js";import{g as Cs}from"../chunks/announcements-CE3N8tQe.js";import{g as ct}from"../chunks/posts-B23axQf4.js";import{h as Ss}from"../chunks/downloadErrorHandler-m_fOD5Af.js";import"../chunks/utils-Dq7h7Pqt.js";const A=p(null),Ee=p(!1),R=Gt({hero_title:"ç»³åŒ…ç®¡ç†å™¨",hero_subtitle:"ä¸“ä¸šçš„èµ„æºç®¡ç†ä¸Žåˆ†äº«å¹³å°",copyright_text:"Â© 2024 ç»³åŒ…ç®¡ç†å™¨. All rights reserved.",footer_links:"{}",seo_keywords:"ç»³åŒ…ç®¡ç†å™¨,èµ„æºç®¡ç†,æ–‡ä»¶åˆ†äº«,ç¤¾åŒº",seo_description:"ç»³åŒ…ç®¡ç†å™¨æ˜¯ä¸€ä¸ªä¸“ä¸šçš„èµ„æºç®¡ç†ä¸Žåˆ†äº«å¹³å°ï¼Œæä¾›ä¾¿æ·çš„æ–‡ä»¶ç®¡ç†å’Œç¤¾åŒºäº¤æµåŠŸèƒ½ã€‚",seo_author:"ç»³åŒ…ç®¡ç†å™¨å›¢é˜Ÿ"});function bs(){return{communitySettings:A,systemSettings:R,isLoading:Ee,loadCommunitySettings:async()=>{if(A.value)return A.value;Ee.value=!0;try{const k=await Me.getPublicCommunitySettings();if(k.code===0&&k.data)return A.value=k.data,k.data}catch(k){console.error("åŠ è½½ç¤¾åŒºè®¾ç½®å¤±è´¥:",k)}finally{Ee.value=!1}return null},loadSystemSettings:async()=>{try{const k=["hero_title","hero_subtitle","copyright_text","footer_links","seo_keywords","seo_description","seo_author"],b=k.map(I=>Me.getSetting(I).catch(()=>({code:-1,data:null})));(await Promise.all(b)).forEach((I,ie)=>{if(I.code===0&&I.data){const V=k[ie];let Se=I.data.value;R[V]=Se}})}catch(k){console.error("åŠ è½½ç³»ç»Ÿè®¾ç½®å¤±è´¥:",k)}},getSetting:(k,b=null)=>k in R?R[k]:A.value&&k in A.value?A.value[k]:b,getHeroTitle:()=>A.value?.hero_title||R.hero_title||"ç»³åŒ…ç®¡ç†å™¨",getHeroSubtitle:()=>A.value?.hero_subtitle||R.hero_subtitle||"ä¸“ä¸šçš„èµ„æºç®¡ç†ä¸Žåˆ†äº«å¹³å°",getCopyright:()=>R.copyright_text||"Â© 2024 ç»³åŒ…ç®¡ç†å™¨. All rights reserved.",getSEOInfo:()=>({keywords:R.seo_keywords,description:R.seo_description,author:R.seo_author}),shouldShowSection:k=>(A.value?.homepage_sections||["hero_section","stats_section","popular_tags","recent_resources","community_posts","announcements"]).includes(k),getPaginationConfig:()=>({resourcesPerPage:A.value?.resources_per_page||12,postsPerPage:A.value?.posts_per_page||10})}}const xs={getFeed:v=>S.get("/v1/community/feed",{params:v}),getResources:v=>S.get("/v1/packages",{params:v}),getResource:v=>S.get(`/v1/packages/${v}`),downloadResource:v=>S.get(`/v1/packages/${v}/download`),createResource:v=>S.post("/v1/packages",v),updateResource:(v,f)=>S.put(`/v1/packages/${v}`,f),deleteResource:v=>S.delete(`/v1/packages/${v}`),batchDeleteResources:v=>S.post("/v1/packages/batch-delete",{ids:v}),updateResourceStatus:(v,f)=>S.put(`/v1/packages/${v}/status`,{status:f}),batchUpdateResourceStatus:(v,f)=>S.post("/v1/packages/batch-update-status",{ids:v,status:f}),getResourceStats:()=>S.get("/v1/packages/stats"),category:{getCategories:v=>S.get("/v1/categories",{params:v}),getCategory:v=>S.get(`/v1/categories/${v}`),createCategory:v=>S.post("/v1/categories",v),updateCategory:(v,f)=>S.put(`/v1/categories/${v}`,f),deleteCategory:v=>S.delete(`/v1/categories/${v}`),batchDeleteCategories:v=>S.post("/v1/categories/batch-delete",{ids:v}),updateCategoryStatus:(v,f)=>S.put(`/v1/categories/${v}/status`,{enabled:f})}},zs={class:"home-container"},Ts={class:"top-header"},Ps={class:"header-wrapper"},Ls={class:"header-left"},As={class:"brand"},$s={class:"brand-text"},Is={class:"header-center"},Ds={class:"search-container"},Fs={key:1},Rs={key:0,class:"search-suggestions"},Es=["onClick"],Ms={class:"suggestion-icon"},Us={class:"suggestion-text"},Vs={class:"suggestion-type"},Bs={class:"header-right"},Hs={class:"header-actions"},Ns={key:1,class:"user-menu"},qs={class:"user-trigger"},Os={class:"user-name"},Js={class:"main-content"},Ks={class:"content-wrapper"},js={key:0,class:"carousel-section"},Qs={class:"carousel-container"},Gs=["onClick"],Ws={class:"slide-background"},Xs=["src","alt"],Ys={class:"slide-content"},Zs={key:0,class:"content-right"},ea={class:"preview-container"},ta=["src","alt"],sa={class:"three-column-section"},aa={class:"column-wrapper"},oa={class:"left-column"},la={class:"nav-panel"},na={class:"panel-content"},ra={class:"quick-nav"},ia={class:"nav-count"},ca=["onClick"],ua={class:"nav-count"},da={class:"announcement-panel"},_a={class:"panel-content"},pa={key:0,class:"empty-state"},va={key:1,class:"announcement-list"},ga={class:"announcement-content"},fa={class:"announcement-text"},ma={class:"announcement-time"},ha={class:"center-column"},ya={class:"content-panel"},ka={class:"content-header"},wa={class:"header-left"},Ca={class:"content-count"},Sa={key:0},ba={key:1},xa={class:"header-right"},za={class:"content-controls"},Ta={class:"content-display"},Pa={key:0,class:"loading-state"},La={key:1},Aa={key:0,class:"empty-state"},$a=["onClick"],Ia={class:"card-header"},Da={class:"card-icon"},Fa={class:"card-title"},Ra={class:"title-row"},Ea={key:0,class:"status-badges"},Ma={class:"card-category"},Ua={class:"card-actions"},Va={class:"card-body"},Ba={class:"card-description"},Ha={key:0,class:"card-tags"},Na={class:"card-footer"},qa={class:"footer-meta"},Oa={class:"meta-author"},Ja={class:"meta-downloads"},Ka={class:"meta-time"},ja={class:"footer-actions"},Qa={key:2,class:"pagination-wrapper"},Ga={key:2},Wa={key:0,class:"empty-state"},Xa=["onClick"],Ya={class:"post-header"},Za={class:"post-avatar"},eo={class:"post-author"},to={class:"author-name"},so={class:"post-time"},ao={class:"post-category"},oo={class:"post-content"},lo={class:"post-title-row"},no={class:"post-title"},ro={key:0,class:"status-badges"},io={class:"post-excerpt"},co={class:"post-footer"},uo={class:"post-stats"},_o={class:"stat-item"},po={class:"stat-item"},vo={class:"stat-item"},go={class:"post-actions"},fo={key:2,class:"pagination-wrapper"},mo={class:"right-column"},ho={class:"stats-panel"},yo={class:"panel-header"},ko={class:"panel-content"},wo={key:0,class:"loading-state"},Co={key:1,class:"empty-state"},So={key:2,class:"popular-content-list"},bo=["onClick"],xo={class:"item-rank"},zo={class:"item-content"},To={class:"item-title"},Po={class:"item-stats"},Lo={class:"stat-item"},Ao={key:0,class:"stat-item"},$o={key:1,class:"stat-item"},Io={class:"activity-panel"},Do={class:"panel-header"},Fo={class:"panel-actions"},Ro={class:"panel-content"},Eo={key:0,class:"loading-state"},Mo={key:1,class:"empty-state"},Uo={key:2,class:"activity-list"},Vo=["onClick"],Bo={key:0,class:"activity-avatar"},Ho={class:"activity-text"},No={class:"activity-target"},qo={class:"activity-target"},Oo={class:"activity-time"},Jo={class:"tags-panel"},Ko={class:"panel-header"},jo={class:"panel-content"},Qo={key:0,class:"loading-state"},Go={key:1,class:"empty-state"},Wo={key:2,class:"hot-tags"},Xo={class:"tag-count"},Yo={class:"site-footer"},Zo={class:"footer-content"},el={class:"footer-info"},tl={class:"footer-brand"},sl={class:"footer-links"},al=["href"],ol={class:"footer-bottom"},ll={class:"footer-social"},nl=Wt({__name:"Home",setup(v){const f=ss(),{systemSettings:H,loadSystemSettings:Ue,loadCommunitySettings:Ve}=bs(),Be=$(()=>{try{return JSON.parse(H.footer_links||"{}")}catch{return{community:{title:"ç¤¾åŒº",links:[{text:"å…³äºŽæˆ‘ä»¬",url:"/about"}]},developer:{title:"å¼€å‘è€…",links:[{text:"API æ–‡æ¡£",url:"/api-docs"}]},support:{title:"æ”¯æŒ",links:[{text:"è”ç³»æˆ‘ä»¬",url:"/contact"}]}}}}),T=p(""),E=p("all"),J=p("latest"),k=p("all"),b=p("resources"),Y=p(!0),I=p(!0),ie=p(0),V=p(!1),Se=p(0),ut=p(0),dt=p(0),D=p(1),K=p(12),j=p([]),be=$(()=>re()||{username:"ç”¨æˆ·"}),xe=$(()=>!!re()),_t=async()=>{try{console.log("ðŸ”” å¼€å§‹èŽ·å–å…¬å‘Šæ•°æ®...");const e=await Cs();console.log("ðŸ”” å…¬å‘ŠAPIå“åº”:",e),e.code===0&&e.data?Array.isArray(e.data)?j.value=e.data.map(t=>({id:t.id,text:t.title+": "+t.content,created_at:t.created_at||new Date().toISOString()})):e.data.list&&Array.isArray(e.data.list)?j.value=e.data.list.map(t=>({id:t.id,text:t.title+": "+t.content,created_at:t.created_at||new Date().toISOString()})):console.warn("å…¬å‘Šæ•°æ®ä¸æ˜¯é¢„æœŸçš„æ•°ç»„æ ¼å¼:",e.data):console.error("èŽ·å–å…¬å‘Šå¤±è´¥:",e.message)}catch(e){console.error("âŒ åŠ è½½å…¬å‘Šå‡ºé”™:",e),e.response?(console.error("APIé”™è¯¯å“åº”:",e.response.data),w.warning(`èŽ·å–å…¬å‘Šå¤±è´¥: ${e.response.data?.message||e.message}`)):w.warning("èŽ·å–å…¬å‘Šå¤±è´¥ï¼šç½‘ç»œè¿žæŽ¥é”™è¯¯")}},Z=p([]),M=p([]),Q=p([]),He=p(0),ee=p(1),ce=p(5),Ne=$(()=>M.value.slice().sort((e,t)=>t.download_count-e.download_count).slice(0,6)),te=p({enabled:!0,items:[]}),pt=async()=>{try{const e=await Me.getSetting("carousel_settings");if(e.code===0&&e.data){const t=JSON.parse(e.data.value||"{}");te.value={enabled:t.enabled!==!1,items:t.items||[]}}}catch(e){console.warn("åŠ è½½è½®æ’­å›¾è®¾ç½®å¤±è´¥:",e),te.value={enabled:!0,items:[{title:"ç»³åŒ…ç®¡ç†ç³»ç»Ÿ",description:"ä¸“ä¸šçš„ç»³åŒ…èµ„æºç®¡ç†å¹³å°",image:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=1200&h=380&fit=crop",tags:["å®Œå…¨å…è´¹","æœ€æ–°æŠ€æœ¯","ä¸°å¯ŒåŠŸèƒ½"],link:"/packages"}]}}},vt=e=>{e.link?e.link.startsWith("http")?window.open(e.link,"_blank"):f.push(e.link):w.info(`äº†è§£æ›´å¤šå…³äºŽï¼š${e.title}`)};$(()=>{const e=[];for(let t=0;t<Ne.value.length;t+=3)e.push(Ne.value.slice(t,t+3));return e});const se=$(()=>{let e=[...M.value];if(E.value!=="all"&&(e=e.filter(t=>t.category_id===parseInt(E.value))),T.value){const t=T.value.toLowerCase();e=e.filter(l=>l.name.toLowerCase().includes(t)||l.description?.toLowerCase().includes(t)||l.author.toLowerCase().includes(t))}return e.sort((t,l)=>{if(t.is_pinned&&!l.is_pinned)return-1;if(!t.is_pinned&&l.is_pinned)return 1;if(t.is_featured&&!l.is_featured)return-1;if(!t.is_featured&&l.is_featured)return 1;switch(J.value){case"latest":return new Date(l.created_at).getTime()-new Date(t.created_at).getTime();case"downloads":return l.download_count-t.download_count;case"likes":return(l.like_count||0)-(t.like_count||0);case"favorites":return(l.favorite_count||0)-(t.favorite_count||0);default:return 0}}),e}),ze=async()=>{try{const e={page:ee.value,page_size:ce.value,status:"Published"},t=await ct(e);t.code===0&&t.data?(await Ce(),Q.value=t.data.list,He.value=t.data.total):console.error("èŽ·å–å¸–å­å¤±è´¥:",t.message)}catch(e){console.error("åŠ è½½å¸–å­å‡ºé”™:",e)}},ae=async()=>{V.value=!0;try{const e={};E.value!=="all"&&(e.category_id=parseInt(E.value)),T.value&&(e.search=T.value),e.sort=J.value,k.value!=="all"&&(e.type=k.value),e.page=D.value,e.pageSize=K.value,console.log("è¯·æ±‚èµ„æºå‚æ•°:",e);const t=await lt.getPackages(e);t.code===0&&t.data?(await Ce(),M.value=t.data.list,ie.value=t.data.total,Ce(()=>{Se.value=M.value.reduce((l,n)=>l+(n.download_count||0),0),dt.value=M.value.reduce((l,n)=>l+(n.like_count||0),0),ut.value=Math.floor(Math.random()*1e3)+500})):w.error(t.message||"åŠ è½½èµ„æºå¤±è´¥")}catch(e){console.error("åŠ è½½èµ„æºå‡ºé”™:",e),w.error("åŠ è½½èµ„æºæ—¶å‘ç”Ÿé”™è¯¯")}finally{V.value=!1}},N=()=>{D.value=1,ae()},gt=((e,t)=>{let l;return(...n)=>{clearTimeout(l),l=setTimeout(()=>e.apply(null,n),t)}})(()=>{N()},500),ft=()=>{T.value.trim()?gt():N()},ue=p(!1),qe=$(()=>{if(!T.value.trim())return[];const e=T.value.toLowerCase(),t=[];return M.value.forEach(l=>{l.name.toLowerCase().includes(e)&&t.push({type:"resource",text:l.name,icon:"ðŸ“¦"})}),Z.value.forEach(l=>{l.name.toLowerCase().includes(e)&&t.push({type:"category",text:l.name,icon:"ðŸ·ï¸"})}),t.filter((l,n,c)=>n===c.findIndex(m=>m.text===l.text)).slice(0,5)}),mt=e=>{T.value=e,ue.value=!1,N()},ht=()=>{setTimeout(()=>{ue.value=!1},200)},Oe=e=>{console.log("åˆ†ç±»åˆ‡æ¢åˆ°:",e.props.name),E.value=e.props.name,ae()},Je=e=>{f.push(`/resource/${e}`)},Ke=async e=>{try{const t=await xs.downloadResource(e);if(t.code===0){w.success("ä¸‹è½½ç»Ÿè®¡æˆåŠŸ");const l=M.value.find(n=>n.id===e);ys.logDownload("Package",e,`ä¸‹è½½äº†èµ„æº: ${l?.name||"æœªçŸ¥èµ„æº"}`).catch(n=>console.error("è®°å½•ä¸‹è½½è¡Œä¸ºå¤±è´¥:",n)),ae()}else w.error(t.msg||"ä¸‹è½½å¤±è´¥")}catch(t){Ss(t,"ä¸‹è½½å¤±è´¥")}},yt=()=>{f.push("/login")},kt=()=>{Y.value=!Y.value},wt=()=>{I.value=!I.value},Ct=()=>{console.log("isLoggedIn:",localStorage.getItem("isLoggedIn")),console.log("userInfo:",localStorage.getItem("userInfo"));const e=re&&re();if(!e){f.push("/login");return}e.role==="admin"||e.role==="moderator"?f.push("/admin"):e.role==="elder"?f.push("/elder"):e.role==="user"?f.push("/user"):f.push("/403")},St=()=>{const e=re();e?.role==="elder"?f.push("/elder/profile"):e?.role==="user"?f.push("/user/profile"):e?.role==="admin"?f.push("/admin/users"):f.push("/login")},bt=async()=>{try{await ms.confirm("ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ","ç¡®è®¤é€€å‡º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}),localStorage.removeItem("token"),localStorage.removeItem("userInfo"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("loginTime"),localStorage.removeItem("remember_me"),localStorage.removeItem("username"),document.cookie="auth_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="user_info=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="remember_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",w.success("å·²é€€å‡ºç™»å½•"),f.push("/login")}catch{}},xt=e=>{if(!e)return"æœªåˆ†ç±»";const t=Z.value.find(l=>l.id===e);return t?t.name:"æœªåˆ†ç±»"},zt=e=>({1:"#409EFF",2:"#67C23A",3:"#E6A23C",4:"#F56C6C",5:"#909399"})[e]||"#409EFF",Te=e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toLocaleString(),Tt=async()=>{try{const e=await ws.getCategories();e.code===0&&e.data?(Z.value=e.data.list||[],console.log("èŽ·å–åˆ°çš„åˆ†ç±»:",Z.value)):console.error("èŽ·å–åˆ†ç±»å¤±è´¥:",e.message)}catch(e){console.error("åŠ è½½åˆ†ç±»å‡ºé”™:",e)}},Pt=()=>{const e=document.getElementById("posts-section");e&&e.scrollIntoView({behavior:"smooth"})},Lt=e=>M.value.filter(t=>t.category_id===e).length,je=p("grid"),de=p(""),_e=p(""),pe=p(""),ve=p(""),ge=p(""),oe=p(""),Qe=p("newest");p(!1),$(()=>de.value||_e.value||pe.value||ve.value||ge.value||oe.value),$(()=>Array.from(new Set(M.value.map(e=>e.author)))),p(null);const At=$(()=>{let e=se.value;if(de.value){const n=de.value.toLowerCase();e=e.filter(c=>c.author.toLowerCase().includes(n))}if(_e.value&&(e=e.filter(n=>{const c=n.download_count||0;switch(_e.value){case"0-10":return c>=0&&c<=10;case"11-50":return c>=11&&c<=50;case"51-100":return c>=51&&c<=100;case"100+":return c>100;default:return!0}})),pe.value){const n=Date.now(),c=pe.value;e=e.filter(m=>{const y=new Date(m.created_at).getTime(),F=24*60*60*1e3;switch(c){case"today":return n-y<=F;case"week":return n-y<=7*F;case"month":return n-y<=30*F;case"quarter":return n-y<=90*F;default:return!0}})}if(ve.value){const n=ve.value.toLowerCase();e=e.filter(c=>c.name.toLowerCase().includes(n)||c.description?.toLowerCase().includes(n)||c.author.toLowerCase().includes(n))}switch(ge.value&&(e=e.filter(n=>{const c=n.file_size||0;switch(ge.value){case"small":return c<1024*1024;case"medium":return c>=1024*1024&&c<10*1024*1024;case"large":return c>=10*1024*1024;default:return!0}})),oe.value&&(oe.value.split(",").map(n=>n.trim()),e=e.filter(n=>{const c=oe.value.toLowerCase();return n.name.toLowerCase().includes(c)||n.description?.toLowerCase().includes(c)})),Qe.value){case"newest":e=[...e].sort((n,c)=>n.is_pinned&&!c.is_pinned||!n.is_pinned&&c.is_pinned?n.is_pinned?-1:1:n.is_featured&&!c.is_featured||!n.is_featured&&c.is_featured?n.is_featured?-1:1:new Date(c.created_at).getTime()-new Date(n.created_at).getTime());break;case"oldest":e.sort((n,c)=>new Date(n.created_at).getTime()-new Date(c.created_at).getTime());break;case"most_downloaded":e.sort((n,c)=>c.download_count-n.download_count);break;case"least_downloaded":e.sort((n,c)=>n.download_count-c.download_count);break;case"name_asc":e.sort((n,c)=>n.name.localeCompare(c.name));break;case"name_desc":e.sort((n,c)=>c.name.localeCompare(n.name));break}const t=(D.value-1)*K.value,l=t+K.value;return e.slice(t,l)});let G=null;Xt([de,_e,pe,ve,ge,oe,Qe],()=>{G&&clearTimeout(G),G=window.setTimeout(()=>{D.value=1},100)});let q=null;const Pe=()=>{q&&clearTimeout(q),q=window.setTimeout(()=>{Ce(()=>{const e=document.querySelector(".home-container"),t=document.querySelector(".dynamic-background"),l=document.querySelector(".gradient-layer");if(e&&t&&l){const n=e.scrollHeight,c=Math.max(n,window.innerHeight);t.style.height=`${c}px`,l.style.height=`${c}px`}q=null})},100)};Yt(()=>{window.removeEventListener("resize",Pe),q&&(clearTimeout(q),q=null),G&&(clearTimeout(G),G=null)});const W=p([]),fe=p(!1),Ge=async()=>{fe.value=!0;try{console.log("ðŸŽ­ å¼€å§‹èŽ·å–ç¤¾åŒºåŠ¨æ€...");const e=await fetch("http://localhost:15201/api/v1/community/activities?page=1&page_size=20",{method:"GET",headers:{"Content-Type":"application/json"}}).then(t=>t.json());if(console.log("ðŸŽ­ ç¤¾åŒºåŠ¨æ€APIå“åº”:",e),console.log("ðŸŽ­ å“åº”æ•°æ®ç»“æž„:",JSON.stringify(e,null,2)),e.code===0){let t=e.data?.actions||e.data||[];if(console.log("ðŸŽ­ æå–çš„actionsæ•°æ®:",t),Array.isArray(t)&&t.length>0){console.log("ðŸŽ­ åŽŸå§‹actionsæ•°æ®:",t);const l=t.filter(n=>["Upload","Create","Comment","Download","Like","Share","Edit","Register"].includes(n.action_type)).map(n=>{const{username:c,actionText:m,target:y,avatar:F}=It(n);return{id:n.id,username:c,action:m,target:y,user_avatar:F,created_at:n.created_at}}).slice(0,10);W.value=l,console.log("ðŸŽ­ è®¾ç½®çš„ç¤¾åŒºåŠ¨æ€:",l)}else console.log("ðŸŽ­ æ²¡æœ‰èŽ·å–åˆ°æœ‰æ•ˆçš„actionsæ•°æ®"),W.value=[]}else console.log("ðŸŽ­ APIå“åº”codeä¸ä¸º0:",e.code,e.message),W.value=[]}catch(e){console.error("âŒ èŽ·å–ç¤¾åŒºåŠ¨æ€å¤±è´¥:",e),W.value=[],e.response?(console.error("APIé”™è¯¯å“åº”:",e.response.data),w.warning(`èŽ·å–ç¤¾åŒºåŠ¨æ€å¤±è´¥: ${e.response.data?.message||e.message}`)):w.warning("èŽ·å–ç¤¾åŒºåŠ¨æ€å¤±è´¥ï¼šç½‘ç»œè¿žæŽ¥é”™è¯¯")}finally{fe.value=!1}},$t=(e,t)=>{const l=["Login","Logout","Search","Click"],n=["ip_address","user_agent","session","token","password","è®¿é—®é¡µé¢","ç‚¹å‡»äº†","æœç´¢äº†"];return l.includes(e)?!0:t?n.some(c=>t.toLowerCase().includes(c.toLowerCase())):!1},It=e=>{let t=null,l=null;e.user_id===null||e.user_id===-1||!e.username||e.username==="null"?t=null:e.nickname?t=e.nickname:e.username?t=e.username:t=`ç”¨æˆ·${e.user_id}`,e.avatar&&(l=e.avatar);let n=t?Dt(e.action_type):Ft(e.action_type),c="æŸä¸ªå†…å®¹";if(e.details){if(e.action_type==="PageView"){const m=e.details.match(/è®¿é—®é¡µé¢[:ï¼š]\s*(.+)/);if(m){const y=m[1];c={"/admin":"ç®¡ç†åŽå°","/admin/posts":"å¸–å­ç®¡ç†","/admin/packages":"èµ„æºç®¡ç†","/admin/categories":"åˆ†ç±»ç®¡ç†","/admin/users":"ç”¨æˆ·ç®¡ç†","/posts":"å¸–å­åˆ—è¡¨","/packages":"èµ„æºåˆ—è¡¨","/categories":"åˆ†ç±»é¡µé¢","/home":"é¦–é¡µ"}[y]||y.replace("/","")}else c="æŸä¸ªé¡µé¢"}else if(!$t(e.action_type,e.details))if(e.details.includes("å¸–å­:")||e.details.includes("æ–‡ç« :")){const m=e.details.match(/(?:å¸–å­|æ–‡ç« )[:ï¼š]\s*(.+)/);m&&(c=m[1].slice(0,20)+(m[1].length>20?"...":""))}else if(e.details.includes("èµ„æº:")||e.details.includes("åŒ…:")){const m=e.details.match(/(?:èµ„æº|åŒ…)[:ï¼š]\s*(.+)/);m&&(c=m[1].slice(0,20)+(m[1].length>20?"...":""))}else if(e.details.includes("è¯„è®º:")){const m=e.details.match(/è¯„è®º[:ï¼š]\s*(.+)/);m&&(c=`"${m[1].slice(0,30)}${m[1].length>30?"...":""}"`)}else{const m=e.details.split(/\s+/).filter(y=>y.length>1&&!y.includes("ç”¨æˆ·")&&!y.includes("æ“ä½œ"));m.length>0&&(c=m[0].slice(0,15)+(m[0].length>15?"...":""))}}return{username:t,actionText:n,target:c,avatar:l}},Dt=e=>({Register:"æ³¨å†Œäº†è´¦å·",Upload:"ä¸Šä¼ äº†èµ„æº",Download:"ä¸‹è½½äº†",Comment:"è¯„è®ºäº†",Like:"ç‚¹èµžäº†",Share:"åˆ†äº«äº†",Edit:"ç¼–è¾‘äº†",Delete:"åˆ é™¤äº†",Create:"åˆ›å»ºäº†",Update:"æ›´æ–°äº†",Post:"å‘å¸ƒäº†å¸–å­",Reply:"å›žå¤äº†",PageView:"è®¿é—®äº†",Login:"ç™»å½•äº†ç³»ç»Ÿ",Logout:"é€€å‡ºäº†ç³»ç»Ÿ"})[e]||`${e.toLowerCase()}`,Ft=e=>({Register:"è¢«æ³¨å†Œ",Upload:"è¢«ä¸Šä¼ ",Download:"è¢«ä¸‹è½½",Comment:"è¢«è¯„è®º",Like:"è¢«ç‚¹èµž",Share:"è¢«åˆ†äº«",Edit:"è¢«ç¼–è¾‘",Delete:"è¢«åˆ é™¤",Create:"è¢«åˆ›å»º",Update:"è¢«æ›´æ–°",Post:"è¢«å‘å¸ƒ",Reply:"è¢«å›žå¤",PageView:"è¢«è®¿é—®",Login:"è¢«ç™»å½•",Logout:"è¢«é€€å‡º"})[e]||`è¢«${e.toLowerCase()}`,me=e=>{if(!e)return"åˆšåˆš";const t=new Date(e),n=new Date().getTime()-t.getTime(),c=Math.floor(n/(1e3*60)),m=Math.floor(n/(1e3*60*60)),y=Math.floor(n/(1e3*60*60*24));return c<1?"åˆšåˆš":c<60?`${c}åˆ†é’Ÿå‰`:m<24?`${m}å°æ—¶å‰`:y<30?`${y}å¤©å‰`:t.toLocaleDateString()},Rt=()=>{D.value=1},Et=()=>{T.value="",E.value="all",J.value="created_at",D.value=1,ae()},Mt=e=>{K.value=e,D.value=1},Ut=e=>{D.value=e},Vt=e=>{ce.value=e,ee.value=1,ze()},Bt=e=>{ee.value=e,ze()},Ht=e=>{T.value=e,N()},We=()=>{if(!xe.value){w.warning("è¯·å…ˆç™»å½•"),f.push("/login");return}f.push("/posts/create")},Nt=e=>{f.push(`/posts/${e}`)};$(()=>Q.value.length);const qt=()=>{j.value=j.value.map(e=>({...e,created_at:e.created_at||new Date().toISOString()}))},Le=p([]),he=p(!1),Ae=p([]),ye=p(!1),Xe=async()=>{he.value=!0;try{console.log("ðŸ·ï¸ å¼€å§‹èŽ·å–çƒ­é—¨æ ‡ç­¾...");const e=await as();if(console.log("ðŸ·ï¸ æ ‡ç­¾APIå“åº”:",e),e.code===0&&e.data){const t=["#4096ff","#9254de","#f759ab","#36cfc9","#52c41a","#faad14","#ff4d4f","#7356f1","#13c2c2","#fa541c","#eb2f96","#722ed1","#1677ff","#fadb14","#a0d911","#f5222d","#fa8c16","#a0d911","#52c41a","#13c2c2"];Le.value=e.data.map((l,n)=>({id:l.id,name:l.name,count:l.use_count||0,color:t[n%t.length],description:l.description}))}}catch(e){console.error("âŒ èŽ·å–çƒ­é—¨æ ‡ç­¾å¤±è´¥:",e),e.response?(console.error("APIé”™è¯¯å“åº”:",e.response.data),w.warning(`èŽ·å–çƒ­é—¨æ ‡ç­¾å¤±è´¥: ${e.response.data?.message||e.message}`)):w.warning("èŽ·å–çƒ­é—¨æ ‡ç­¾å¤±è´¥ï¼šç½‘ç»œè¿žæŽ¥é”™è¯¯")}finally{he.value=!1}},Ye=async()=>{ye.value=!0;try{const[e,t]=await Promise.all([lt.getPackages({pageSize:10,status:"Active"}),ct({page_size:10})]),l=[];e.code===0&&e.data?.list&&e.data.list.forEach(n=>{l.push({id:n.id,type:"resource",title:n.name,views:n.download_count||0,downloads:n.download_count||0,likes:n.like_count||0})}),t.code===0&&t.data?.list&&t.data.list.forEach(n=>{l.push({id:n.id,type:"post",title:n.title,views:n.view_count||0,likes:n.like_count||0})}),Ae.value=l.sort((n,c)=>c.views-n.views).slice(0,8)}catch(e){console.error("èŽ·å–çƒ­é—¨å†…å®¹å¤±è´¥:",e),w.warning("èŽ·å–çƒ­é—¨å†…å®¹å¤±è´¥")}finally{ye.value=!1}},Ot=e=>e===0?"rank-first":e===1?"rank-second":e===2?"rank-third":"rank-normal";p(0);const Jt=e=>{e.type==="resource"?f.push(`/resource/${e.id}`):f.push(`/posts/${e.id}`)},Kt=e=>{const t=e.action.toLowerCase();t.includes("ä¸Šä¼ ")||t.includes("èµ„æº")?(f.push("/category"),w.success("æŸ¥çœ‹æœ€æ–°èµ„æº")):t.includes("å¸–å­")||t.includes("å‘å¸ƒäº†å¸–å­")?(f.push("/posts"),w.success("æŸ¥çœ‹ç¤¾åŒºå¸–å­")):t.includes("è¯„è®º")||t.includes("ç‚¹èµž")?(f.push("/posts"),w.success("æŸ¥çœ‹ç¤¾åŒºè®¨è®º")):t.includes("ä¸‹è½½")?(f.push("/category"),w.success("æŸ¥çœ‹çƒ­é—¨èµ„æº")):(f.push("/posts"),w.info("æŸ¥çœ‹ç¤¾åŒºåŠ¨æ€"))};return Zt(async()=>{console.log("ðŸš€ å¼€å§‹åˆå§‹åŒ–Homeé¡µé¢..."),Pe(),window.addEventListener("resize",Pe),qt();try{console.log("âš™ï¸ å¼€å§‹åŠ è½½ç³»ç»Ÿé…ç½®..."),await Ue().catch(e=>console.error("ç³»ç»Ÿè®¾ç½®åŠ è½½å¤±è´¥:",e)),await Ve().catch(e=>console.error("ç¤¾åŒºè®¾ç½®åŠ è½½å¤±è´¥:",e)),await pt().catch(e=>console.error("è½®æ’­å›¾è®¾ç½®åŠ è½½å¤±è´¥:",e)),console.log("âœ… Homeé¡µé¢åˆå§‹åŒ–å®Œæˆ!"),setTimeout(async()=>{console.log("ðŸ“¦ å¼€å§‹åŠ è½½åŸºç¡€æ•°æ®..."),await Tt().catch(e=>console.error("åˆ†ç±»åŠ è½½å¤±è´¥:",e)),await ae().catch(e=>console.error("èµ„æºåŠ è½½å¤±è´¥:",e)),await ze().catch(e=>console.error("å¸–å­åŠ è½½å¤±è´¥:",e)),console.log("ðŸ”¥ å¼€å§‹åŠ è½½çƒ­é—¨æ•°æ®..."),await Xe().catch(e=>console.error("çƒ­é—¨æ ‡ç­¾åŠ è½½å¤±è´¥:",e)),await Ye().catch(e=>console.error("çƒ­é—¨å†…å®¹åŠ è½½å¤±è´¥:",e)),await Ge().catch(e=>console.error("ç¤¾åŒºåŠ¨æ€åŠ è½½å¤±è´¥:",e)),await _t().catch(e=>console.error("å…¬å‘ŠåŠ è½½å¤±è´¥:",e)),console.log("ðŸŽ‰ æ‰€æœ‰æ•°æ®åŠ è½½å®Œæˆ!")},100)}catch(e){console.error("âŒ åˆå§‹åŒ–è¿‡ç¨‹ä¸­å‡ºé”™:",e)}}),(e,t)=>{const l=x("el-icon"),n=x("el-button"),c=x("el-input"),m=x("el-avatar"),y=x("el-dropdown-item"),F=x("el-dropdown-menu"),Ze=x("el-dropdown"),jt=x("el-carousel-item"),Qt=x("el-carousel"),et=x("el-collapse-transition"),ke=x("el-empty"),U=x("el-option"),tt=x("el-select"),we=x("el-skeleton"),O=x("el-tag"),st=x("el-pagination");return i(),u("div",zs,[t[38]||(t[38]=s("div",{class:"background-layer"},[s("div",{class:"gradient-bg"}),s("div",{class:"pattern-overlay"})],-1)),s("header",Ts,[s("div",Ps,[s("div",Ls,[s("div",As,[t[9]||(t[9]=s("div",{class:"brand-icon"},"ðŸ˜ï¸",-1)),s("div",$s,[s("h1",null,_(d(H).hero_title),1),s("span",null,_(d(H).hero_subtitle),1)])])]),s("div",Is,[s("div",Ds,[a(c,{modelValue:T.value,"onUpdate:modelValue":t[0]||(t[0]=o=>T.value=o),placeholder:"æœç´¢èµ„æºã€å¸–å­ã€ç”¨æˆ·...",size:"large",clearable:"",onKeyup:es(N,["enter"]),onInput:ft,onClear:N,onFocus:t[1]||(t[1]=o=>ue.value=!0),onBlur:ht,class:"main-search"},{prefix:r(()=>[a(l,null,{default:r(()=>[a(d(nt))]),_:1})]),suffix:r(()=>[a(n,{type:"primary",text:"",onClick:N,loading:V.value,disabled:!T.value.trim()},{default:r(()=>[V.value?h("",!0):(i(),z(l,{key:0},{default:r(()=>[a(d(nt))]),_:1})),V.value?h("",!0):(i(),u("span",Fs,"æœç´¢"))]),_:1},8,["loading","disabled"])]),_:1},8,["modelValue"]),ue.value&&qe.value.length>0?(i(),u("div",Rs,[(i(!0),u(P,null,L(qe.value,o=>(i(),u("div",{key:o.text,class:"suggestion-item",onClick:C=>mt(o.text)},[s("span",Ms,_(o.icon),1),s("span",Us,_(o.text),1),s("span",Vs,_(o.type==="resource"?"èµ„æº":"åˆ†ç±»"),1)],8,Es))),128))])):h("",!0)])]),s("div",Bs,[s("div",Hs,[a(hs),xe.value?h("",!0):(i(),z(n,{key:0,type:"primary",size:"default",onClick:yt},{default:r(()=>[a(l,null,{default:r(()=>[a(d(X))]),_:1}),t[10]||(t[10]=g(" ç™»å½• "))]),_:1,__:[10]})),xe.value?(i(),u("div",Ns,[a(Ze,{trigger:"click",placement:"bottom-end"},{dropdown:r(()=>[a(F,null,{default:r(()=>[a(y,{onClick:St},{default:r(()=>[a(l,null,{default:r(()=>[a(d(X))]),_:1}),t[11]||(t[11]=g(" ä¸ªäººä¸­å¿ƒ "))]),_:1,__:[11]}),a(y,{onClick:Ct},{default:r(()=>[a(l,null,{default:r(()=>[a(d(os))]),_:1}),t[12]||(t[12]=g(" ç®¡ç†åŽå° "))]),_:1,__:[12]}),a(y,{divided:"",onClick:bt},{default:r(()=>[a(l,null,{default:r(()=>[a(d(ls))]),_:1}),t[13]||(t[13]=g(" é€€å‡ºç™»å½• "))]),_:1,__:[13]})]),_:1})]),default:r(()=>[s("div",qs,[a(m,{size:36,src:be.value.avatar_url},{default:r(()=>[a(l,null,{default:r(()=>[a(d(X))]),_:1})]),_:1},8,["src"]),s("span",Os,_(be.value.nickname||be.value.username),1),a(l,{class:"dropdown-arrow"},{default:r(()=>[a(d(Ie))]),_:1})])]),_:1})])):h("",!0)])])])]),s("main",Js,[s("div",Ks,[te.value.enabled&&te.value.items.length>0?(i(),u("section",js,[s("div",Qs,[a(Qt,{interval:5e3,"indicator-position":"none",arrow:"hover",height:"380px",class:"hero-carousel",autoplay:!0,loop:!0},{default:r(()=>[(i(!0),u(P,null,L(te.value.items,(o,C)=>(i(),z(jt,{key:C,class:"carousel-item"},{default:r(()=>[s("div",{class:"carousel-slide",onClick:le=>vt(o)},[s("div",Ws,[s("img",{src:o.image||"/api/placeholder/1200/380",alt:o.title||"è½®æ’­å›¾ç‰‡",class:"background-image"},null,8,Xs),t[14]||(t[14]=s("div",{class:"background-overlay"},null,-1))]),s("div",Ys,[o.preview?(i(),u("div",Zs,[s("div",ea,[s("img",{src:o.preview,alt:o.title+" é¢„è§ˆ",class:"preview-image"},null,8,ta)])])):h("",!0)])],8,Gs)]),_:2},1024))),128))]),_:1})])])):h("",!0),s("section",sa,[s("div",aa,[s("aside",oa,[s("div",la,[s("div",{class:"panel-header",onClick:kt},[s("h3",null,[a(l,null,{default:r(()=>[a(d(ns))]),_:1}),t[15]||(t[15]=g(" å†…å®¹åˆ†ç±» "))]),a(l,{class:B(["collapse-icon",{collapsed:!Y.value}])},{default:r(()=>[a(d(Ie))]),_:1},8,["class"])]),a(et,null,{default:r(()=>[at(s("div",na,[s("div",ra,[s("div",{class:B(["nav-item",{active:E.value==="all"}]),onClick:t[2]||(t[2]=o=>Oe({props:{name:"all"}}))},[a(l,null,{default:r(()=>[a(d(rs))]),_:1}),t[16]||(t[16]=s("span",null,"å…¨éƒ¨èµ„æº",-1)),s("div",ia,_(ie.value),1)],2),(i(!0),u(P,null,L(Z.value,o=>(i(),u("div",{key:o.id,class:B(["nav-item",{active:E.value===o.id.toString()}]),onClick:C=>Oe({props:{name:o.id.toString()}})},[a(l,null,{default:r(()=>[a(d(rt))]),_:1}),s("span",null,_(o.name),1),s("div",ua,_(Lt(o.id)),1)],10,ca))),128))])],512),[[ot,Y.value]])]),_:1})]),s("div",da,[s("div",{class:"panel-header",onClick:wt},[s("h3",null,[a(l,null,{default:r(()=>[a(d(is))]),_:1}),t[17]||(t[17]=g(" ç¤¾åŒºå…¬å‘Š "))]),a(l,{class:B(["collapse-icon",{collapsed:!I.value}])},{default:r(()=>[a(d(Ie))]),_:1},8,["class"])]),a(et,null,{default:r(()=>[at(s("div",_a,[j.value.length===0?(i(),u("div",pa,[a(ke,{description:"æš‚æ— å…¬å‘Š","image-size":80})])):(i(),u("div",va,[(i(!0),u(P,null,L(j.value.slice(0,5),o=>(i(),u("div",{key:o.id,class:"announcement-item"},[t[18]||(t[18]=s("div",{class:"announcement-dot"},null,-1)),s("div",ga,[s("div",fa,_(o.text),1),s("div",ma,_(me(o.created_at)),1)])]))),128))]))],512),[[ot,I.value]])]),_:1})])]),s("main",ha,[s("div",ya,[s("div",ka,[s("div",wa,[t[19]||(t[19]=s("h2",null,"ç¤¾åŒºå†…å®¹",-1)),s("span",Ca,[b.value==="resources"?(i(),u("span",Sa,"å…± "+_(se.value.length)+" ä¸ªèµ„æº",1)):(i(),u("span",ba,"å…± "+_(Q.value.length)+" ä¸ªå¸–å­",1))])]),s("div",xa,[s("div",za,[a(tt,{modelValue:b.value,"onUpdate:modelValue":t[3]||(t[3]=o=>b.value=o),placeholder:"å†…å®¹ç±»åž‹"},{default:r(()=>[a(U,{label:"èµ„æº",value:"resources"}),a(U,{label:"å¸–å­",value:"posts"})]),_:1},8,["modelValue"]),a(tt,{modelValue:J.value,"onUpdate:modelValue":t[4]||(t[4]=o=>J.value=o),placeholder:"æŽ’åºæ–¹å¼",onChange:Rt},{default:r(()=>[a(U,{label:"æœ€æ–°å‘å¸ƒ",value:"created_at"}),b.value==="resources"?(i(),z(U,{key:0,label:"ä¸‹è½½æœ€å¤š",value:"download_count"})):h("",!0),b.value==="posts"?(i(),z(U,{key:1,label:"æœ€å¤šæŸ¥çœ‹",value:"view_count"})):h("",!0),b.value==="posts"?(i(),z(U,{key:2,label:"æœ€å¤šç‚¹èµž",value:"like_count"})):h("",!0),b.value==="resources"?(i(),z(U,{key:3,label:"è¯„åˆ†æœ€é«˜",value:"rating"})):h("",!0),b.value==="resources"?(i(),z(U,{key:4,label:"åç§°æŽ’åº",value:"name"})):h("",!0),b.value==="posts"?(i(),z(U,{key:5,label:"æ ‡é¢˜æŽ’åº",value:"title"})):h("",!0)]),_:1},8,["modelValue"]),b.value==="posts"?(i(),z(n,{key:0,type:"primary",onClick:We},{default:r(()=>[a(l,null,{default:r(()=>[a(d(cs))]),_:1}),t[20]||(t[20]=g(" å‘å¸ƒå¸–å­ "))]),_:1,__:[20]})):h("",!0)])])]),s("div",Ta,[V.value?(i(),u("div",Pa,[a(we,{rows:6,animated:""})])):b.value==="resources"?(i(),u("div",La,[se.value.length===0?(i(),u("div",Aa,[a(ke,{description:"æš‚æ— èµ„æº","image-size":120},{default:r(()=>[a(n,{type:"primary",onClick:Et},{default:r(()=>t[21]||(t[21]=[g(" é‡ç½®ç­›é€‰ ")])),_:1,__:[21]})]),_:1})])):(i(),u("div",{key:1,class:B(["resource-grid",[je.value]])},[(i(!0),u(P,null,L(At.value,o=>(i(),u("div",{key:o.id,class:"resource-card",onClick:C=>Je(o.id)},[s("div",Ia,[s("div",Da,[a(l,{size:"20",color:zt(o.category_id)},{default:r(()=>[a(d(rt))]),_:2},1032,["color"])]),s("div",Fa,[s("div",Ra,[s("h4",null,_(o.name),1),o.is_featured||o.is_pinned?(i(),u("div",Ea,[o.is_pinned?(i(),z(O,{key:0,type:"danger",size:"small",effect:"dark"},{default:r(()=>[a(l,null,{default:r(()=>[a(d(ne))]),_:1}),t[22]||(t[22]=g(" ç½®é¡¶ "))]),_:1,__:[22]})):h("",!0),o.is_featured?(i(),z(O,{key:1,type:"warning",size:"small",effect:"dark"},{default:r(()=>[a(l,null,{default:r(()=>[a(d(it))]),_:1}),t[23]||(t[23]=g(" ç²¾åŽ "))]),_:1,__:[23]})):h("",!0)])):h("",!0)]),s("span",Ma,_(xt(o.category_id)),1)]),s("div",Ua,[a(Ze,{trigger:"click"},{dropdown:r(()=>[a(F,null,{default:r(()=>[a(y,{onClick:$e(C=>Je(o.id),["stop"])},{default:r(()=>[a(l,null,{default:r(()=>[a(d(De))]),_:1}),t[24]||(t[24]=g(" æŸ¥çœ‹è¯¦æƒ… "))]),_:2,__:[24]},1032,["onClick"]),a(y,{onClick:$e(C=>Ke(o.id),["stop"])},{default:r(()=>[a(l,null,{default:r(()=>[a(d(Fe))]),_:1}),t[25]||(t[25]=g(" ç«‹å³ä¸‹è½½ "))]),_:2,__:[25]},1032,["onClick"])]),_:2},1024)]),default:r(()=>[a(n,{link:"",size:"small"},{default:r(()=>[a(l,null,{default:r(()=>[a(d(us))]),_:1})]),_:1})]),_:2},1024)])]),s("div",Va,[s("p",Ba,_(o.description),1),o.tags&&o.tags.length>0?(i(),u("div",Ha,[(i(!0),u(P,null,L(o.tags.slice(0,3),C=>(i(),z(O,{key:C,size:"small",effect:"plain"},{default:r(()=>[g(_(C),1)]),_:2},1024))),128))])):h("",!0)]),s("div",Na,[s("div",qa,[s("span",Oa,[a(l,null,{default:r(()=>[a(d(X))]),_:1}),g(" "+_(o.author),1)]),s("span",Ja,[a(l,null,{default:r(()=>[a(d(Fe))]),_:1}),g(" "+_(o.download_count),1)]),s("span",Ka,[a(l,null,{default:r(()=>[a(d(ds))]),_:1}),g(" "+_(me(o.created_at)),1)])]),s("div",ja,[a(n,{type:"primary",size:"small",onClick:$e(C=>Ke(o.id),["stop"])},{default:r(()=>t[26]||(t[26]=[g(" ä¸‹è½½ ")])),_:2,__:[26]},1032,["onClick"])])])],8,$a))),128))],2)),se.value.length>0?(i(),u("div",Qa,[a(st,{"current-page":D.value,"onUpdate:currentPage":t[5]||(t[5]=o=>D.value=o),"page-size":K.value,"onUpdate:pageSize":t[6]||(t[6]=o=>K.value=o),"page-sizes":[12,24,48,96],total:se.value.length,layout:"total, sizes, prev, pager, next, jumper",background:"",onSizeChange:Mt,onCurrentChange:Ut},null,8,["current-page","page-size","total"])])):h("",!0)])):b.value==="posts"?(i(),u("div",Ga,[Q.value.length===0?(i(),u("div",Wa,[a(ke,{description:"æš‚æ— å¸–å­","image-size":120},{default:r(()=>[a(n,{type:"primary",onClick:We},{default:r(()=>t[27]||(t[27]=[g(" å‘å¸ƒå¸–å­ ")])),_:1,__:[27]})]),_:1})])):(i(),u("div",{key:1,class:B(["posts-grid",[je.value]])},[(i(!0),u(P,null,L(Q.value,o=>(i(),u("div",{key:o.id,class:"post-card",onClick:C=>Nt(o.id)},[s("div",Ya,[s("div",Za,[a(m,{size:36,src:o.author_avatar},{default:r(()=>[a(l,null,{default:r(()=>[a(d(X))]),_:1})]),_:2},1032,["src"])]),s("div",eo,[s("div",to,_(o.author_name),1),s("div",so,_(me(o.created_at)),1)]),s("div",ao,[a(O,{size:"small"},{default:r(()=>[g(_(o.category),1)]),_:2},1024)])]),s("div",oo,[s("div",lo,[s("h3",no,_(o.title),1),o.is_pinned||o.is_featured?(i(),u("div",ro,[o.is_pinned?(i(),z(O,{key:0,type:"danger",size:"small",effect:"dark"},{default:r(()=>[a(l,null,{default:r(()=>[a(d(ne))]),_:1}),t[28]||(t[28]=g(" ç½®é¡¶ "))]),_:1,__:[28]})):h("",!0),o.is_featured?(i(),z(O,{key:1,type:"warning",size:"small",effect:"dark"},{default:r(()=>[a(l,null,{default:r(()=>[a(d(it))]),_:1}),t[29]||(t[29]=g(" ç²¾åŽ "))]),_:1,__:[29]})):h("",!0)])):h("",!0)]),s("p",io,_(o.content.substring(0,120))+"...",1)]),s("div",co,[s("div",uo,[s("span",_o,[a(l,null,{default:r(()=>[a(d(De))]),_:1}),g(" "+_(o.view_count),1)]),s("span",po,[a(l,null,{default:r(()=>[a(d(_s))]),_:1}),g(" "+_(o.comment_count),1)]),s("span",vo,[a(l,null,{default:r(()=>[a(d(ne))]),_:1}),g(" "+_(o.like_count),1)])]),s("div",go,[a(n,{link:"",size:"small"},{default:r(()=>t[30]||(t[30]=[g(" é˜…è¯»æ›´å¤š ")])),_:1,__:[30]})])])],8,Xa))),128))],2)),Q.value.length>0?(i(),u("div",fo,[a(st,{"current-page":ee.value,"onUpdate:currentPage":t[7]||(t[7]=o=>ee.value=o),"page-size":ce.value,"onUpdate:pageSize":t[8]||(t[8]=o=>ce.value=o),"page-sizes":[12,24,48,96],total:He.value,layout:"total, sizes, prev, pager, next, jumper",background:"",onSizeChange:Vt,onCurrentChange:Bt},null,8,["current-page","page-size","total"])])):h("",!0)])):h("",!0)])])]),s("aside",mo,[s("div",ho,[s("div",yo,[s("h3",null,[a(l,null,{default:r(()=>[a(d(ne))]),_:1}),t[31]||(t[31]=g(" çƒ­é—¨å†…å®¹ "))]),a(n,{link:"",size:"small",loading:ye.value,onClick:Ye,class:"refresh-btn"},{default:r(()=>[a(l,null,{default:r(()=>[a(d(Re))]),_:1})]),_:1},8,["loading"])]),s("div",ko,[ye.value?(i(),u("div",wo,[a(we,{rows:4,animated:""})])):Ae.value.length===0?(i(),u("div",Co,t[32]||(t[32]=[s("p",null,"æš‚æ— çƒ­é—¨å†…å®¹",-1)]))):(i(),u("div",So,[(i(!0),u(P,null,L(Ae.value,(o,C)=>(i(),u("div",{key:`${o.type}-${o.id}`,class:"popular-item-new",onClick:le=>Jt(o)},[s("div",xo,[s("span",{class:B(["rank-number",Ot(C)])},_(C+1),3)]),s("div",zo,[s("div",To,_(o.title),1),s("div",Po,[s("span",Lo,[a(l,null,{default:r(()=>[a(d(De))]),_:1}),g(" "+_(Te(o.views)),1)]),o.type==="resource"?(i(),u("span",Ao,[a(l,null,{default:r(()=>[a(d(Fe))]),_:1}),g(" "+_(Te(o.downloads??0)),1)])):(i(),u("span",$o,[a(l,null,{default:r(()=>[a(d(ne))]),_:1}),g(" "+_(Te(o.likes??0)),1)]))])])],8,bo))),128))]))])]),s("div",Io,[s("div",Do,[s("h3",null,[a(l,null,{default:r(()=>[a(d(ps))]),_:1}),t[33]||(t[33]=g(" ç¤¾åŒºåŠ¨æ€ "))]),s("div",Fo,[a(n,{link:"",size:"small",loading:fe.value,onClick:Ge,class:"refresh-btn"},{default:r(()=>[a(l,null,{default:r(()=>[a(d(Re))]),_:1})]),_:1},8,["loading"]),a(n,{link:"",size:"small",onClick:Pt},{default:r(()=>t[34]||(t[34]=[g(" æŸ¥çœ‹æ›´å¤š ")])),_:1,__:[34]})])]),s("div",Ro,[fe.value?(i(),u("div",Eo,[a(we,{rows:3,animated:""})])):W.value.length===0?(i(),u("div",Mo,[a(ke,{description:"æš‚æ— åŠ¨æ€","image-size":80})])):(i(),u("div",Uo,[(i(!0),u(P,null,L(W.value.slice(0,8),o=>(i(),u("div",{key:o.id,class:"activity-item",onClick:C=>Kt(o)},[o.username&&o.username!=="null"?(i(),u("div",Bo,[a(m,{size:32,src:o.user_avatar},{default:r(()=>[a(l,null,{default:r(()=>[a(d(X))]),_:1})]),_:2},1032,["src"])])):h("",!0),s("div",{class:B(["activity-content",{"no-avatar":!o.username||o.username==="null"}])},[s("div",Ho,[o.username&&o.username!=="null"?(i(),u(P,{key:0},[s("strong",null,_(o.username),1),g(" "+_(o.action)+" ",1),s("span",No,_(o.target),1)],64)):(i(),u(P,{key:1},[s("span",qo,_(o.target),1),g(" "+_(o.action),1)],64))]),s("div",Oo,_(me(o.created_at)),1)],2)],8,Vo))),128))]))])]),s("div",Jo,[s("div",Ko,[s("h3",null,[a(l,null,{default:r(()=>[a(d(vs))]),_:1}),t[35]||(t[35]=g(" çƒ­é—¨æ ‡ç­¾ "))]),a(n,{link:"",size:"small",loading:he.value,onClick:Xe,class:"refresh-btn"},{default:r(()=>[a(l,null,{default:r(()=>[a(d(Re))]),_:1})]),_:1},8,["loading"])]),s("div",jo,[he.value?(i(),u("div",Qo,[a(we,{rows:3,animated:""})])):Le.value.length===0?(i(),u("div",Go,t[36]||(t[36]=[s("p",null,"æš‚æ— çƒ­é—¨æ ‡ç­¾",-1)]))):(i(),u("div",Wo,[(i(!0),u(P,null,L(Le.value.slice(0,15),o=>(i(),z(O,{key:o.id||o.name,size:"small",class:"tag-item",style:ts({backgroundColor:o.color,borderColor:"transparent",color:"#FFFFFF","--el-tag-bg-color":o.color,"--el-tag-border-color":"transparent","--el-tag-text-color":"#FFFFFF",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),onClick:C=>Ht(o.name)},{default:r(()=>[g(_(o.name)+" ",1),s("span",Xo,"("+_(o.count)+")",1)]),_:2},1032,["style","onClick"]))),128))]))])])])])])])]),s("footer",Yo,[s("div",Zo,[s("div",el,[s("div",tl,[t[37]||(t[37]=s("div",{class:"brand-icon"},"ðŸ˜ï¸",-1)),s("div",null,[s("h3",null,_(d(H).hero_title),1),s("p",null,_(d(H).hero_subtitle),1)])]),s("div",sl,[(i(!0),u(P,null,L(Be.value,(o,C)=>(i(),u("div",{key:C,class:"link-group"},[s("h4",null,_(o.title),1),(i(!0),u(P,null,L(o.links,le=>(i(),u("a",{key:le.text,href:le.url},_(le.text),9,al))),128))]))),128))])]),s("div",ol,[s("p",null,_(d(H).copyright_text),1),s("div",ll,[a(n,{link:"",size:"small"},{default:r(()=>[a(l,null,{default:r(()=>[a(d(gs))]),_:1})]),_:1}),a(n,{link:"",size:"small"},{default:r(()=>[a(l,null,{default:r(()=>[a(d(fs))]),_:1})]),_:1})])])])])])}}}),kl=ks(nl,[["__scopeId","data-v-7c06cd19"]]);export{kl as default};
