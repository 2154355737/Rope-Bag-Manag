import{x as rt,r as v,c as z,j as $e,w as dt,Z as ct,y as u,A as t,az as ue,P as k,a6 as w,C as ut,Q as s,I as n,al as y,u as i,a4 as vt,H as M,K as $,M as _,O as r,J as _t,R as pt,V as b,D as xe,ax as mt,n as ft,z as d}from"../chunks/vue-vendor-BleHOoLr.js";import{q as Se,u as U,r as gt,j as ht,s as yt,v as Ve,i as ve,l as N,f as O,w as Me,x as Te,y as kt,z as wt,A as bt,B as Ct,C as Le,D as zt,F as Dt,m as $t,G as xt,H as St,I as J,E as Vt}from"../chunks/element-plus-D5w7-vkF.js";import{T as Mt}from"../chunks/ThemeSwitcher-pQAR8D_t.js";import{a as h,g as W,_ as Tt}from"../assets/index-C3B7XhMB.js";import{f as _e}from"../chunks/format-B9owEeWI.js";import{c as Lt}from"../chunks/categories-C_kqqGHD.js";import{g as Rt}from"../chunks/announcements-DrCQCRr5.js";import{g as At}from"../chunks/posts-BBHJFdnE.js";import"../chunks/utils-Dq7h7Pqt.js";const Re={getFeed:c=>h.get("/v1/community/feed",{params:c}),getResources:c=>h.get("/v1/packages",{params:c}),getResource:c=>h.get(`/v1/packages/${c}`),downloadResource:c=>h.get(`/v1/packages/${c}/download`),createResource:c=>h.post("/v1/packages",c),updateResource:(c,p)=>h.put(`/v1/packages/${c}`,p),deleteResource:c=>h.delete(`/v1/packages/${c}`),batchDeleteResources:c=>h.post("/v1/packages/batch-delete",{ids:c}),updateResourceStatus:(c,p)=>h.put(`/v1/packages/${c}/status`,{status:p}),batchUpdateResourceStatus:(c,p)=>h.post("/v1/packages/batch-update-status",{ids:c,status:p}),getResourceStats:()=>h.get("/v1/packages/stats"),category:{getCategories:c=>h.get("/v1/categories",{params:c}),getCategory:c=>h.get(`/v1/categories/${c}`),createCategory:c=>h.post("/v1/categories",c),updateCategory:(c,p)=>h.put(`/v1/categories/${c}`,p),deleteCategory:c=>h.delete(`/v1/categories/${c}`),batchDeleteCategories:c=>h.post("/v1/categories/batch-delete",{ids:c}),updateCategoryStatus:(c,p)=>h.put(`/v1/categories/${c}/status`,{enabled:p})}},It={class:"home-container"},Ft={class:"dynamic-background"},Bt={class:"floating-particles"},Ht={class:"header"},Ut={class:"header-content"},qt={class:"search"},Pt={class:"actions"},Et={key:1,class:"user-section"},Nt={class:"user-info"},Jt=["src"],Qt={class:"user-name"},jt={class:"main"},Gt={class:"content-wrapper"},Kt={class:"main-content"},Zt={class:"new-layout"},Ot={class:"left-section"},Wt={class:"featured-resources"},Yt={class:"section-header"},Xt={class:"section-title"},es={class:"section-actions"},ts={class:"featured-grid"},ss=["onClick"],as={class:"featured-cover"},ls={class:"featured-icon"},os={class:"featured-badge"},ns={class:"featured-content"},is={class:"featured-title"},rs={class:"featured-desc"},ds={class:"featured-meta"},cs={class:"meta-author"},us={class:"meta-downloads"},vs={key:1,class:"featured-empty"},_s={class:"right-section"},ps={class:"resources"},ms={class:"section-header"},fs={class:"section-title"},gs={class:"section-actions"},hs={class:"resource-count"},ys={class:"view-switcher"},ks={class:"advanced-filters"},ws={class:"filter-row"},bs={class:"filter-group"},Cs={class:"filter-group"},zs={class:"filter-group"},Ds={class:"filter-group"},$s={class:"filter-actions"},xs={class:"advanced-panel"},Ss={class:"advanced-row"},Vs={class:"filter-group"},Ms={class:"filter-group"},Ts={class:"filter-group"},Ls={key:0,class:"empty-state"},Rs={key:1,class:"resources-grid"},As=["onClick"],Is={class:"resource-icon"},Fs={class:"resource-content"},Bs={class:"resource-header"},Hs={class:"resource-title"},Us={class:"resource-badge"},qs={class:"resource-desc"},Ps={class:"resource-footer"},Es={class:"resource-meta"},Ns={class:"meta-item"},Js={class:"meta-item"},Qs={class:"resource-actions"},js={key:2,class:"resources-list"},Gs=["onClick"],Ks={class:"list-icon"},Zs={class:"list-content"},Os={class:"list-main"},Ws={class:"list-title"},Ys={class:"list-desc"},Xs={class:"list-meta"},ea={class:"list-category"},ta={class:"list-author"},sa={class:"list-date"},aa={class:"list-actions"},la={class:"download-count"},oa={key:3,class:"resources-cards"},na=["onClick"],ia={class:"card-header"},ra={class:"card-icon"},da={class:"card-title-area"},ca={class:"card-title"},ua={class:"card-category"},va={class:"card-desc"},_a={class:"card-footer"},pa={class:"card-meta"},ma={class:"meta-row"},fa={class:"meta-row"},ga={class:"meta-row"},ha={key:4,class:"pagination-wrapper"},ya={class:"bottom-section"},ka={class:"notice-card"},wa={key:0,class:"empty-notice"},ba={key:1,class:"notice-list"},Ca={class:"category-card"},za={class:"category-title"},Da={class:"category-list"},$a={class:"category-item-content"},xa={class:"category-count"},Sa=["onClick"],Va={class:"category-item-content"},Ma={class:"category-count"},Ta={id:"posts-section",class:"posts-section"},La={class:"posts-container"},Ra={class:"section-header"},Aa={class:"section-title"},Ia={class:"section-actions"},Fa={key:0,class:"posts-grid"},Ba=["onClick"],Ha={class:"post-header"},Ua={class:"post-title"},qa={key:0,class:"post-status"},Pa={class:"post-content"},Ea={class:"post-excerpt"},Na={class:"post-footer"},Ja={class:"post-meta"},Qa={class:"meta-item"},ja={class:"meta-item"},Ga={class:"meta-item"},Ka={class:"meta-item"},Za={class:"post-date"},Oa={key:1,class:"empty-posts"},Wa={class:"footer"},Ya={class:"footer-content"},Xa={class:"footer-sections"},el={class:"footer-section"},tl={class:"footer-stats"},sl={class:"stat-item"},al={class:"stat-number"},ll={class:"stat-item"},ol={class:"stat-number"},nl={class:"stat-item"},il={class:"stat-number"},rl={class:"footer-section"},dl={class:"footer-links"},cl={class:"footer-section"},ul={class:"footer-links"},vl=["onClick"],_l={class:"footer-section"},pl={class:"footer-contact"},ml={class:"contact-item"},fl={class:"contact-item"},gl={class:"contact-item"},hl={class:"footer-bottom"},yl={class:"footer-copyright"},kl={class:"footer-legal"},wl=rt({__name:"Home",setup(c){const p=mt(),q=v(""),T=v("all"),pe=v("latest"),me=v("all"),oe=v(0),fe=v(!1),ge=v(0),he=v(0),Ae=v(0),P=v(1),E=v(4),L=v([]),Q=z(()=>W()||{username:"用户"}),Y=z(()=>!!W()),Ie=async()=>{try{const a=await Rt();console.log("公告数据结构:",a),a.code===0&&a.data?Array.isArray(a.data)?L.value=a.data.map(e=>({id:e.id,text:e.title+": "+e.content})):a.data.list&&Array.isArray(a.data.list)?L.value=a.data.list.map(e=>({id:e.id,text:e.title+": "+e.content})):(console.warn("公告数据不是预期的数组格式:",a.data),L.value=[{id:1,text:"欢迎来到资源社区！"}]):(console.error("获取公告失败:",a.message),L.value=[{id:1,text:"欢迎来到资源社区！"},{id:2,text:"请遵守社区规范，文明发言。"},{id:3,text:"资源分享请确保无版权争议。"}])}catch(a){console.error("加载公告出错:",a),L.value=[{id:0,text:"欢迎来到资源社区！请遵守社区规范，文明发言。"}]}},j=v([]),x=v([]),ne=v([]),Fe=v(0),Be=v(1),He=v(5),ie=z(()=>x.value.slice().sort((a,e)=>e.download_count-a.download_count).slice(0,6)),ye=z(()=>{const a=[];for(let e=0;e<ie.value.length;e+=3)a.push(ie.value.slice(e,e+3));return a}),ke=z(()=>{let a=x.value;if(T.value!=="all"&&(a=a.filter(e=>e.category_id===parseInt(T.value))),q.value){const e=q.value.toLowerCase();a=a.filter(l=>l.name.toLowerCase().includes(e)||l.description?.toLowerCase().includes(e)||l.author.toLowerCase().includes(e))}switch(pe.value){case"latest":a.sort((e,l)=>new Date(l.created_at).getTime()-new Date(e.created_at).getTime());break;case"downloads":a.sort((e,l)=>l.download_count-e.download_count);break;case"likes":a.sort((e,l)=>(l.like_count||0)-(e.like_count||0));break;case"favorites":a.sort((e,l)=>(l.favorite_count||0)-(e.favorite_count||0));break}return a}),Ue=async()=>{try{const a={page:Be.value,page_size:He.value,status:"Published"},e=await At(a);e.code===0&&e.data?(ne.value=e.data.list,Fe.value=e.data.total):console.error("获取帖子失败:",e.message)}catch(a){console.error("加载帖子出错:",a)}},X=async()=>{fe.value=!0;try{const a={};T.value!=="all"&&(a.category_id=parseInt(T.value)),q.value&&(a.search=q.value),a.sort=pe.value,me.value!=="all"&&(a.type=me.value),a.page=P.value,a.page_size=E.value,console.log("请求Feed参数:",a);const e=await Re.getFeed(a);e.code===0&&e.data?(x.value=e.data.list,oe.value=e.data.total,ge.value=x.value.reduce((l,m)=>l+(m.download_count||0),0),Ae.value=x.value.reduce((l,m)=>l+(m.like_count||0),0),he.value=Math.floor(Math.random()*1e3)+500):J.error(e.message||"加载资源失败")}catch(a){console.error("加载资源出错:",a),J.error("加载资源时发生错误")}finally{fe.value=!1}},qe=()=>{X()},ee=a=>{console.log("分类切换到:",a.props.name),T.value=a.props.name,X()},te=a=>{p.push(`/resource/${a}`)},re=async a=>{try{const e=await Re.downloadResource(a);e.code===0?(J.success("下载统计成功"),X()):J.error(e.msg||"下载失败")}catch(e){console.error("下载失败:",e),J.error("下载失败")}},we=()=>{p.push("/login")},Pe=()=>{console.log("isLoggedIn:",localStorage.getItem("isLoggedIn")),console.log("userInfo:",localStorage.getItem("userInfo"));const a=W&&W();if(!a){p.push("/login");return}a.role==="admin"||a.role==="moderator"?p.push("/admin"):a.role==="elder"?p.push("/elder"):a.role==="user"?p.push("/user"):p.push("/403")},be=()=>{const a=W();a?.role==="elder"?p.push("/elder/profile"):a?.role==="user"?p.push("/user/profile"):a?.role==="admin"?p.push("/admin/users"):p.push("/login")},Ee=async()=>{try{await Vt.confirm("确定要退出登录吗？","确认退出",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),localStorage.removeItem("token"),localStorage.removeItem("userInfo"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("loginTime"),localStorage.removeItem("remember_me"),localStorage.removeItem("username"),document.cookie="auth_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="user_info=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="remember_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",J.success("已退出登录"),p.push("/login")}catch{}},se=a=>{if(!a)return"未分类";const e=j.value.find(l=>l.id===a);return e?e.name:"未分类"},ae=a=>({1:"#409EFF",2:"#67C23A",3:"#E6A23C",4:"#F56C6C",5:"#909399"})[a]||"#409EFF",Ne=a=>new Date(a).toLocaleDateString("zh-CN"),Je=a=>a.toLocaleString(),Qe=async()=>{try{const a=await Lt.getCategories();a.code===0&&a.data?(j.value=a.data.list||[],console.log("获取到的分类:",j.value)):console.error("获取分类失败:",a.message)}catch(a){console.error("加载分类出错:",a)}};$e(async()=>{await Qe(),await X(),await Ue(),await Ie()});const je=()=>{window.scrollTo({top:0,behavior:"smooth"})},Ge=()=>{const a=document.getElementById("posts-section");a&&a.scrollIntoView({behavior:"smooth"})},Ke=a=>{const e=Math.random()*8+4,l=Math.random()*100,m=Math.random()*100,g=Math.random()*15,H=Math.random()*10+10;return{width:`${e}px`,height:`${e}px`,left:`${l}%`,top:`${m}%`,animationDelay:`${g}s`,animationDuration:`${H}s`}},Ze=a=>x.value.filter(e=>e.category_id===a).length,D=v("grid"),R=v(""),A=v(""),I=v(""),F=v(""),B=v(""),S=v(""),G=v("newest"),K=v(!1),Oe=z(()=>R.value||A.value||I.value||F.value||B.value||S.value),We=z(()=>Array.from(new Set(x.value.map(a=>a.author)))),Ce=z(()=>{let a=ke.value;if(R.value&&(a=a.filter(e=>e.author.toLowerCase().includes(R.value.toLowerCase()))),A.value&&(a=a.filter(e=>{const l=e.download_count||0;switch(A.value){case"0-10":return l>=0&&l<=10;case"11-50":return l>=11&&l<=50;case"51-100":return l>=51&&l<=100;case"100+":return l>100;default:return!0}})),I.value){const e=new Date,l=new Date,m=new Date;switch(I.value){case"today":l.setHours(0,0,0,0),m.setHours(23,59,59,999);break;case"week":l.setDate(e.getDate()-e.getDay()),m.setDate(e.getDate()+(6-e.getDay())),l.setHours(0,0,0,0),m.setHours(23,59,59,999);break;case"month":l.setDate(1),m.setMonth(e.getMonth()+1),m.setDate(0),l.setHours(0,0,0,0),m.setHours(23,59,59,999);break;case"quarter":l.setMonth(Math.floor(e.getMonth()/3)*3),m.setMonth(l.getMonth()+2),m.setDate(31),l.setDate(1),l.setHours(0,0,0,0),m.setHours(23,59,59,999);break}a=a.filter(g=>{const H=new Date(g.created_at);return H>=l&&H<=m})}if(F.value){const e=F.value.toLowerCase();a=a.filter(l=>l.name.toLowerCase().includes(e)||l.description?.toLowerCase().includes(e)||l.author.toLowerCase().includes(e))}switch(B.value&&(a=a.filter(e=>{const l=e.file_size||0;switch(B.value){case"small":return l<1024*1024;case"medium":return l>=1024*1024&&l<10*1024*1024;case"large":return l>=10*1024*1024;default:return!0}})),S.value&&(S.value.split(",").map(e=>e.trim()),a=a.filter(e=>{const l=S.value.toLowerCase();return e.name.toLowerCase().includes(l)||e.description?.toLowerCase().includes(l)})),G.value){case"newest":a.sort((e,l)=>new Date(l.created_at).getTime()-new Date(e.created_at).getTime());break;case"oldest":a.sort((e,l)=>new Date(e.created_at).getTime()-new Date(l.created_at).getTime());break;case"most_downloaded":a.sort((e,l)=>l.download_count-e.download_count);break;case"least_downloaded":a.sort((e,l)=>e.download_count-l.download_count);break;case"name_asc":a.sort((e,l)=>e.name.localeCompare(l.name));break;case"name_desc":a.sort((e,l)=>l.name.localeCompare(e.name));break}return a}),ze=z(()=>Ce.value),de=z(()=>{const a=Ce.value,e=(P.value-1)*E.value,l=e+E.value;return a.slice(e,l)}),Ye=()=>{R.value="",A.value="",I.value="",F.value="",B.value="",S.value="",G.value="newest",K.value=!1,P.value=1};dt([R,A,I,F,B,S,G],()=>{P.value=1});const Xe=()=>{K.value=!K.value},le=()=>{ft(()=>{const a=document.querySelector(".home-container"),e=document.querySelector(".dynamic-background"),l=document.querySelector(".gradient-layer");if(a&&e&&l){const m=a.scrollHeight,g=Math.max(m,window.innerHeight);e.style.height=`${g}px`,l.style.height=`${g}px`}})};return $e(()=>{le(),window.addEventListener("resize",le);const a=new MutationObserver(le),e=document.querySelector(".home-container");e&&a.observe(e,{childList:!0,subtree:!0,attributes:!0})}),ct(()=>{le()}),(a,e)=>{const l=y("el-icon"),m=y("el-input"),g=y("el-button"),H=y("el-avatar"),ce=y("el-dropdown-item"),et=y("el-dropdown-menu"),tt=y("el-dropdown"),st=y("el-carousel-item"),at=y("el-carousel"),lt=y("el-button-group"),f=y("el-option"),Z=y("el-select"),ot=y("el-collapse-transition"),nt=y("el-pagination"),De=y("el-tag"),it=y("el-empty");return d(),u("div",It,[t("div",Ft,[e[19]||(e[19]=ue('<div class="gradient-layer" data-v-67272e40></div><div class="geometric-shapes" data-v-67272e40><div class="shape triangle-1" data-v-67272e40></div><div class="shape triangle-2" data-v-67272e40></div><div class="shape circle-1" data-v-67272e40></div><div class="shape circle-2" data-v-67272e40></div><div class="shape square-1" data-v-67272e40></div><div class="shape circle-3" data-v-67272e40></div><div class="shape triangle-3" data-v-67272e40></div><div class="shape square-2" data-v-67272e40></div></div>',2)),t("div",Bt,[(d(),u(k,null,w(20,o=>t("div",{class:"particle",key:o,style:ut(Ke())},null,4)),64))]),e[20]||(e[20]=ue('<div class="ripple-effects" data-v-67272e40><div class="ripple ripple-1" data-v-67272e40></div><div class="ripple ripple-2" data-v-67272e40></div><div class="ripple ripple-3" data-v-67272e40></div><div class="ripple ripple-4" data-v-67272e40></div><div class="ripple ripple-5" data-v-67272e40></div></div>',1))]),t("header",Ht,[t("div",Ut,[e[25]||(e[25]=t("div",{class:"logo"},[t("div",{class:"logo-icon"},"📚"),t("div",{class:"logo-text"},[t("h1",null,"资源社区"),t("p",null,"分享、发现、学习")])],-1)),t("div",qt,[s(m,{modelValue:q.value,"onUpdate:modelValue":e[0]||(e[0]=o=>q.value=o),placeholder:"搜索资源...",size:"large",clearable:"",onKeyup:vt(qe,["enter"])},{prefix:n(()=>[s(l,null,{default:n(()=>[s(i(Se))]),_:1})]),_:1},8,["modelValue"])]),t("div",Pt,[s(Mt),Y.value?$("",!0):(d(),M(g,{key:0,type:"primary",size:"large",onClick:we},{default:n(()=>[s(l,null,{default:n(()=>[s(i(U))]),_:1}),e[21]||(e[21]=_(" 登录 "))]),_:1,__:[21]})),Y.value?(d(),u("div",Et,[s(tt,{trigger:"click",placement:"bottom-end"},{dropdown:n(()=>[s(et,{class:"user-dropdown"},{default:n(()=>[s(ce,{onClick:be},{default:n(()=>[s(l,null,{default:n(()=>[s(i(U))]),_:1}),e[22]||(e[22]=_(" 个人资料 "))]),_:1,__:[22]}),s(ce,{onClick:Pe},{default:n(()=>[s(l,null,{default:n(()=>[s(i(ht))]),_:1}),e[23]||(e[23]=_(" 管理后台 "))]),_:1,__:[23]}),s(ce,{divided:"",onClick:Ee},{default:n(()=>[s(l,null,{default:n(()=>[s(i(yt))]),_:1}),e[24]||(e[24]=_(" 退出登录 "))]),_:1,__:[24]})]),_:1})]),default:n(()=>[t("div",Nt,[Q.value.avatar_url?(d(),M(H,{key:0,size:32,class:"user-avatar",src:Q.value.avatar_url},{default:n(()=>[t("img",{src:Q.value.avatar_url},null,8,Jt)]),_:1},8,["src"])):(d(),M(H,{key:1,size:32,class:"user-avatar"},{default:n(()=>[s(l,null,{default:n(()=>[s(i(U))]),_:1})]),_:1})),t("span",Qt,r(Q.value.nickname||Q.value.username),1),s(l,{class:"dropdown-icon"},{default:n(()=>[s(i(gt))]),_:1})])]),_:1})])):$("",!0)])])]),t("main",jt,[t("div",Gt,[t("div",Kt,[t("div",Zt,[t("div",Ot,[t("div",Wt,[t("div",Yt,[t("h2",Xt,[s(l,null,{default:n(()=>[s(i(Ve))]),_:1}),e[26]||(e[26]=_(" 精选资源 "))]),e[28]||(e[28]=t("p",{class:"section-subtitle"},"发现社区最受欢迎的优质资源",-1)),t("div",es,[s(g,{type:"primary",text:"",onClick:Ge},{default:n(()=>[s(l,null,{default:n(()=>[s(i(ve))]),_:1}),e[27]||(e[27]=_(" 社区帖子 "))]),_:1,__:[27]})])]),ie.value.length>0?(d(),M(at,{key:0,interval:5e3,arrow:ye.value.length>1?"hover":"never","indicator-position":"outside",class:"resource-carousel",height:"280px"},{default:n(()=>[(d(!0),u(k,null,w(ye.value,(o,C)=>(d(),M(st,{key:C,class:"carousel-item"},{default:n(()=>[t("div",ts,[(d(!0),u(k,null,w(o,V=>(d(),u("div",{key:V.id,class:"featured-card",onClick:bl=>te(V.id)},[t("div",as,[t("div",ls,[s(l,{size:"32",color:ae(V.category_id)},{default:n(()=>[s(i(N))]),_:2},1032,["color"])]),t("div",os,r(se(V.category_id)),1)]),t("div",ns,[t("h3",is,r(V.name),1),t("p",rs,r(V.description),1),t("div",ds,[t("span",cs,[s(l,null,{default:n(()=>[s(i(U))]),_:1}),_(" "+r(V.author),1)]),t("span",us,[s(l,null,{default:n(()=>[s(i(O))]),_:1}),_(" "+r(V.download_count),1)])])])],8,ss))),128))])]),_:2},1024))),128))]),_:1},8,["arrow"])):(d(),u("div",vs,e[29]||(e[29]=[t("div",{class:"empty-icon"},"⭐",-1),t("h3",null,"暂无精选资源",-1),t("p",null,"暂无精选资源，敬请期待",-1)])))])]),t("div",_s,[t("div",ps,[t("div",ms,[t("h2",fs,[s(l,null,{default:n(()=>[s(i(Me))]),_:1}),e[30]||(e[30]=_(" 全部资源 "))]),t("div",gs,[t("span",hs,"共 "+r(ke.value.length)+" 个资源",1),t("div",ys,[s(lt,null,{default:n(()=>[s(g,{type:D.value==="grid"?"primary":"default",size:"small",onClick:e[1]||(e[1]=o=>D.value="grid")},{default:n(()=>[s(l,null,{default:n(()=>[s(i(Te))]),_:1})]),_:1},8,["type"]),s(g,{type:D.value==="list"?"primary":"default",size:"small",onClick:e[2]||(e[2]=o=>D.value="list")},{default:n(()=>[s(l,null,{default:n(()=>[s(i(kt))]),_:1})]),_:1},8,["type"]),s(g,{type:D.value==="card"?"primary":"default",size:"small",onClick:e[3]||(e[3]=o=>D.value="card")},{default:n(()=>[s(l,null,{default:n(()=>[s(i(N))]),_:1})]),_:1},8,["type"])]),_:1})])])]),t("div",ks,[t("div",ws,[t("div",bs,[e[31]||(e[31]=t("label",{class:"filter-label"},"作者",-1)),s(Z,{modelValue:R.value,"onUpdate:modelValue":e[4]||(e[4]=o=>R.value=o),placeholder:"选择作者",clearable:"",size:"small",class:"filter-input"},{default:n(()=>[s(f,{label:"全部作者",value:""}),(d(!0),u(k,null,w(We.value,o=>(d(),M(f,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),t("div",Cs,[e[32]||(e[32]=t("label",{class:"filter-label"},"下载量",-1)),s(Z,{modelValue:A.value,"onUpdate:modelValue":e[5]||(e[5]=o=>A.value=o),placeholder:"下载量范围",clearable:"",size:"small",class:"filter-input"},{default:n(()=>[s(f,{label:"全部",value:""}),s(f,{label:"0-10次",value:"0-10"}),s(f,{label:"11-50次",value:"11-50"}),s(f,{label:"51-100次",value:"51-100"}),s(f,{label:"100次以上",value:"100+"})]),_:1},8,["modelValue"])]),t("div",zs,[e[33]||(e[33]=t("label",{class:"filter-label"},"创建时间",-1)),s(Z,{modelValue:I.value,"onUpdate:modelValue":e[6]||(e[6]=o=>I.value=o),placeholder:"时间范围",clearable:"",size:"small",class:"filter-input"},{default:n(()=>[s(f,{label:"全部时间",value:""}),s(f,{label:"今天",value:"today"}),s(f,{label:"本周",value:"week"}),s(f,{label:"本月",value:"month"}),s(f,{label:"三个月内",value:"quarter"})]),_:1},8,["modelValue"])]),t("div",Ds,[e[34]||(e[34]=t("label",{class:"filter-label"},"关键词",-1)),s(m,{modelValue:F.value,"onUpdate:modelValue":e[7]||(e[7]=o=>F.value=o),placeholder:"搜索关键词",clearable:"",size:"small",class:"filter-input"},{prefix:n(()=>[s(l,null,{default:n(()=>[s(i(Se))]),_:1})]),_:1},8,["modelValue"])]),t("div",$s,[s(g,{size:"small",onClick:Ye,disabled:!Oe.value},{default:n(()=>[s(l,null,{default:n(()=>[s(i(wt))]),_:1}),e[35]||(e[35]=_(" 重置 "))]),_:1,__:[35]},8,["disabled"]),s(g,{type:"primary",size:"small",onClick:Xe},{default:n(()=>[s(l,null,{default:n(()=>[s(i(bt))]),_:1}),_(" "+r(K.value?"收起":"高级"),1)]),_:1})])]),s(ot,null,{default:n(()=>[_t(t("div",xs,[t("div",Ss,[t("div",Vs,[e[36]||(e[36]=t("label",{class:"filter-label"},"文件大小",-1)),s(Z,{modelValue:B.value,"onUpdate:modelValue":e[8]||(e[8]=o=>B.value=o),placeholder:"文件大小",clearable:"",size:"small",class:"filter-input"},{default:n(()=>[s(f,{label:"全部大小",value:""}),s(f,{label:"小于1MB",value:"small"}),s(f,{label:"1MB-10MB",value:"medium"}),s(f,{label:"大于10MB",value:"large"})]),_:1},8,["modelValue"])]),t("div",Ms,[e[37]||(e[37]=t("label",{class:"filter-label"},"标签",-1)),s(m,{modelValue:S.value,"onUpdate:modelValue":e[9]||(e[9]=o=>S.value=o),placeholder:"搜索标签",clearable:"",size:"small",class:"filter-input"},{prefix:n(()=>[s(l,null,{default:n(()=>[s(i(Ct))]),_:1})]),_:1},8,["modelValue"])]),t("div",Ts,[e[38]||(e[38]=t("label",{class:"filter-label"},"排序方式",-1)),s(Z,{modelValue:G.value,"onUpdate:modelValue":e[10]||(e[10]=o=>G.value=o),placeholder:"排序方式",size:"small",class:"filter-input"},{default:n(()=>[s(f,{label:"最新创建",value:"newest"}),s(f,{label:"最早创建",value:"oldest"}),s(f,{label:"下载最多",value:"most_downloaded"}),s(f,{label:"下载最少",value:"least_downloaded"}),s(f,{label:"名称A-Z",value:"name_asc"}),s(f,{label:"名称Z-A",value:"name_desc"})]),_:1},8,["modelValue"])])])],512),[[pt,K.value]])]),_:1})]),x.value.length===0?(d(),u("div",Ls,e[39]||(e[39]=[t("div",{class:"empty-icon"},"📦",-1),t("h3",null,"暂无资源",-1),t("p",null,"暂无资源，敬请期待",-1)]))):D.value==="grid"?(d(),u("div",Rs,[(d(!0),u(k,null,w(de.value,o=>(d(),u("div",{key:o.id,class:"resource-card",onClick:C=>te(o.id)},[t("div",Is,[s(l,{size:"28",color:ae(o.category_id)},{default:n(()=>[s(i(N))]),_:2},1032,["color"])]),t("div",Fs,[t("div",Bs,[t("h3",Hs,r(o.name),1),t("span",Us,r(se(o.category_id)),1)]),t("p",qs,r(o.description),1),t("div",Ps,[t("div",Es,[t("span",Ns,[s(l,null,{default:n(()=>[s(i(U))]),_:1}),_(" "+r(o.author),1)]),t("span",Js,[s(l,null,{default:n(()=>[s(i(Le))]),_:1}),_(" "+r(i(_e)(o.created_at)),1)])]),t("div",Qs,[s(g,{type:"primary",size:"small",onClick:b(C=>re(o.id),["stop"])},{default:n(()=>[s(l,null,{default:n(()=>[s(i(O))]),_:1}),e[40]||(e[40]=_(" 下载 "))]),_:2,__:[40]},1032,["onClick"])])])])],8,As))),128))])):D.value==="list"?(d(),u("div",js,[(d(!0),u(k,null,w(de.value,o=>(d(),u("div",{key:o.id,class:"resource-list-item",onClick:C=>te(o.id)},[t("div",Ks,[s(l,{size:"24",color:ae(o.category_id)},{default:n(()=>[s(i(N))]),_:2},1032,["color"])]),t("div",Zs,[t("div",Os,[t("h3",Ws,r(o.name),1),t("p",Ys,r(o.description),1)]),t("div",Xs,[t("span",ea,r(se(o.category_id)),1),t("span",ta,r(o.author),1),t("span",sa,r(i(_e)(o.created_at)),1)])]),t("div",aa,[t("span",la,[s(l,null,{default:n(()=>[s(i(O))]),_:1}),_(" "+r(o.download_count),1)]),s(g,{type:"primary",size:"small",onClick:b(C=>re(o.id),["stop"])},{default:n(()=>e[41]||(e[41]=[_(" 下载 ")])),_:2,__:[41]},1032,["onClick"])])],8,Gs))),128))])):D.value==="card"?(d(),u("div",oa,[(d(!0),u(k,null,w(de.value,o=>(d(),u("div",{key:o.id,class:"resource-card-item",onClick:C=>te(o.id)},[t("div",ia,[t("div",ra,[s(l,{size:"32",color:ae(o.category_id)},{default:n(()=>[s(i(N))]),_:2},1032,["color"])]),t("div",da,[t("h3",ca,r(o.name),1),t("span",ua,r(se(o.category_id)),1)])]),t("p",va,r(o.description),1),t("div",_a,[t("div",pa,[t("div",ma,[s(l,null,{default:n(()=>[s(i(U))]),_:1}),t("span",null,r(o.author),1)]),t("div",fa,[s(l,null,{default:n(()=>[s(i(Le))]),_:1}),t("span",null,r(i(_e)(o.created_at)),1)]),t("div",ga,[s(l,null,{default:n(()=>[s(i(O))]),_:1}),t("span",null,r(o.download_count)+" 次下载",1)])]),s(g,{type:"primary",onClick:b(C=>re(o.id),["stop"])},{default:n(()=>[s(l,null,{default:n(()=>[s(i(O))]),_:1}),e[42]||(e[42]=_(" 下载资源 "))]),_:2,__:[42]},1032,["onClick"])])],8,na))),128))])):$("",!0),ze.value.length>E.value?(d(),u("div",ha,[s(nt,{"current-page":P.value,"onUpdate:currentPage":e[11]||(e[11]=o=>P.value=o),"page-size":E.value,"onUpdate:pageSize":e[12]||(e[12]=o=>E.value=o),"page-sizes":[4,8,12,16],total:ze.value.length,layout:"total, sizes, prev, pager, next, jumper",class:"resource-pagination",background:""},null,8,["current-page","page-size","total"])])):$("",!0)])]),t("div",ya,[t("div",ka,[e[44]||(e[44]=t("h3",{class:"notice-title"},"社区公告",-1)),L.value.length===0?(d(),u("div",wa,e[43]||(e[43]=[t("p",null,"暂无公告信息",-1)]))):(d(),u("ul",ba,[(d(!0),u(k,null,w(L.value,o=>(d(),u("li",{key:o.id,class:"notice-item"},r(o.text),1))),128))]))]),t("div",Ca,[t("h3",za,[s(l,null,{default:n(()=>[s(i(Me))]),_:1}),e[45]||(e[45]=_(" 资源分类 "))]),t("div",Da,[t("div",{class:xe(["category-item",{active:T.value==="all"}]),onClick:e[13]||(e[13]=o=>ee({props:{name:"all"}}))},[t("div",$a,[s(l,null,{default:n(()=>[s(i(Te))]),_:1}),e[46]||(e[46]=t("span",null,"全部",-1))]),t("span",xa,r(oe.value),1)],2),(d(!0),u(k,null,w(j.value,o=>(d(),u("div",{key:o.id,class:xe(["category-item",{active:T.value===o.id.toString()}]),onClick:C=>ee({props:{name:o.id.toString()}})},[t("div",Va,[s(l,null,{default:n(()=>[s(i(N))]),_:1}),t("span",null,r(o.name),1)]),t("span",Ma,r(Ze(o.id)),1)],10,Sa))),128))])])])])])])]),t("section",Ta,[t("div",La,[t("div",Ra,[t("h2",Aa,[s(l,null,{default:n(()=>[s(i(ve))]),_:1}),e[47]||(e[47]=_(" 社区帖子 "))]),e[49]||(e[49]=t("p",{class:"section-subtitle"},"最新的社区动态和讨论",-1)),t("div",Ia,[s(g,{type:"primary",onClick:e[14]||(e[14]=o=>a.$router.push("/posts"))},{default:n(()=>[e[48]||(e[48]=_(" 查看全部 ")),s(l,null,{default:n(()=>[s(i(zt))]),_:1})]),_:1,__:[48]})])]),ne.value.length>0?(d(),u("div",Fa,[(d(!0),u(k,null,w(ne.value,o=>(d(),u("div",{key:o.id,class:"post-card",onClick:C=>a.$router.push(`/posts/${o.id}`)},[t("div",Ha,[t("h3",Ua,r(o.title),1),o.is_pinned||o.is_featured?(d(),u("div",qa,[o.is_pinned?(d(),M(De,{key:0,type:"danger",size:"small"},{default:n(()=>e[50]||(e[50]=[_("置顶")])),_:1,__:[50]})):$("",!0),o.is_featured?(d(),M(De,{key:1,type:"warning",size:"small"},{default:n(()=>e[51]||(e[51]=[_("精选")])),_:1,__:[51]})):$("",!0)])):$("",!0)]),t("div",Pa,[t("p",Ea,r(o.content.substring(0,150))+r(o.content.length>150?"...":""),1)]),t("div",Na,[t("div",Ja,[t("span",Qa,[s(l,null,{default:n(()=>[s(i(U))]),_:1}),_(" "+r(o.author_name||"用户"),1)]),t("span",ja,[s(l,null,{default:n(()=>[s(i(Dt))]),_:1}),_(" "+r(o.view_count),1)]),t("span",Ga,[s(l,null,{default:n(()=>[s(i(Ve))]),_:1}),_(" "+r(o.like_count),1)]),t("span",Ka,[s(l,null,{default:n(()=>[s(i(ve))]),_:1}),_(" "+r(o.comment_count),1)])]),t("div",Za,r(Ne(o.created_at)),1)])],8,Ba))),128))])):(d(),u("div",Oa,[s(it,{description:"暂无帖子"})]))])]),t("footer",Wa,[t("div",Ya,[t("div",Xa,[t("div",el,[e[55]||(e[55]=t("div",{class:"footer-logo"},[t("div",{class:"footer-logo-icon"},"📚"),t("div",{class:"footer-logo-text"},[t("h3",null,"资源社区"),t("p",null,"分享、发现、学习")])],-1)),e[56]||(e[56]=t("p",{class:"footer-desc"}," 一个致力于知识分享和资源交流的开放平台，汇聚优质学习资源，助力每个人的成长之路。 ",-1)),t("div",tl,[t("div",sl,[t("span",al,r(oe.value),1),e[52]||(e[52]=t("span",{class:"stat-label"},"资源",-1))]),t("div",ll,[t("span",ol,r(he.value),1),e[53]||(e[53]=t("span",{class:"stat-label"},"用户",-1))]),t("div",nl,[t("span",il,r(Je(ge.value)),1),e[54]||(e[54]=t("span",{class:"stat-label"},"下载",-1))])])]),t("div",rl,[e[57]||(e[57]=t("h4",{class:"footer-title"},"快速链接",-1)),t("ul",dl,[t("li",null,[t("a",{href:"#",onClick:b(je,["prevent"])},"回到顶部")]),t("li",null,[t("a",{href:"#",onClick:e[15]||(e[15]=b(o=>ee({props:{name:"all"}}),["prevent"]))},"全部资源")]),t("li",null,[Y.value?$("",!0):(d(),u("a",{key:0,href:"#",onClick:b(we,["prevent"])},"用户登录"))]),t("li",null,[Y.value?(d(),u("a",{key:0,href:"#",onClick:b(be,["prevent"])},"个人中心")):$("",!0)])])]),t("div",cl,[e[58]||(e[58]=t("h4",{class:"footer-title"},"资源分类",-1)),t("ul",ul,[(d(!0),u(k,null,w(j.value.slice(0,5),o=>(d(),u("li",{key:o.id},[t("a",{href:"#",onClick:b(C=>ee({props:{name:o.id.toString()}}),["prevent"])},r(o.name),9,vl)]))),128))])]),t("div",_l,[e[62]||(e[62]=t("h4",{class:"footer-title"},"联系我们",-1)),t("div",pl,[t("div",ml,[s(l,null,{default:n(()=>[s(i($t))]),_:1}),e[59]||(e[59]=t("span",null,"support@example.com",-1))]),t("div",fl,[s(l,null,{default:n(()=>[s(i(xt))]),_:1}),e[60]||(e[60]=t("span",null,"400-123-4567",-1))]),t("div",gl,[s(l,null,{default:n(()=>[s(i(St))]),_:1}),e[61]||(e[61]=t("span",null,"北京市朝阳区",-1))])]),e[63]||(e[63]=ue('<div class="social-links" data-v-67272e40><a href="#" class="social-link" title="微信" data-v-67272e40><span data-v-67272e40>💬</span></a><a href="#" class="social-link" title="QQ" data-v-67272e40><span data-v-67272e40>🐧</span></a><a href="#" class="social-link" title="GitHub" data-v-67272e40><span data-v-67272e40>⚡</span></a><a href="#" class="social-link" title="邮箱" data-v-67272e40><span data-v-67272e40>📧</span></a></div>',1))])]),t("div",hl,[t("div",yl,[t("p",null,"© "+r(new Date().getFullYear())+" 资源社区. All rights reserved.",1),e[64]||(e[64]=t("p",null,"Built with ❤️ using Vue 3 + Rust",-1))]),t("div",kl,[t("a",{href:"#",onClick:e[16]||(e[16]=b(()=>{},["prevent"]))},"隐私政策"),e[65]||(e[65]=t("span",{class:"divider"},"|",-1)),t("a",{href:"#",onClick:e[17]||(e[17]=b(()=>{},["prevent"]))},"服务条款"),e[66]||(e[66]=t("span",{class:"divider"},"|",-1)),t("a",{href:"#",onClick:e[18]||(e[18]=b(()=>{},["prevent"]))},"帮助中心")])])])])])}}}),Ll=Tt(wl,[["__scopeId","data-v-67272e40"]]);export{Ll as default};
