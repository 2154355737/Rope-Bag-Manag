const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["pages/Home-mi5RX4JJ.js","chunks/vue-vendor-BleHOoLr.js","chunks/tags-BVMB1T7b.js","chunks/packages-DTwnlaPG.js","chunks/settings-CQEJtwx0.js","chunks/element-plus-Cc1YNc_4.js","chunks/ThemeSwitcher-D6lf2E-3.js","css/ThemeSwitcher-aaZMmAGP.css","chunks/categories-BGQr79qD.js","chunks/announcements-CE3N8tQe.js","chunks/posts-B23axQf4.js","chunks/downloadErrorHandler-m_fOD5Af.js","chunks/utils-Dq7h7Pqt.js","css/Home-DHhb4KpD.css","pages/Category-BxTvyhTl.js","chunks/format-CUgNVY1-.js","css/Category-tm7woF5r.css","pages/ResourceDetail-VH379kOX.js","chunks/comments-CGKKo5_6.js","css/ResourceDetail-B3oRUs4-.css","pages/ResourceComment-DR17EmUf.js","css/ResourceComment-CrQfZZhY.css","pages/Posts-CdqZnNzy.js","css/Posts-DHI-jTEf.css","pages/PostDetail-jLvUaHaA.js","css/PostDetail-COQlVVnB.css","pages/Login-B54mL1-9.js","chunks/auth-BPpt1DgZ.js","css/Login-B1Ieo589.css","pages/Register-J00boEqI.js","css/Register-Cibe1dQw.css","pages/ForgotPassword-XeBPWmTq.js","css/ForgotPassword-C208nqXh.css","pages/ResetPassword-NeqGHF1c.js","css/ResetPassword-0VxkvBOC.css","pages/Dashboard-CFSYRps_.js","chunks/users-C4D58Onb.js","chunks/admin-DseeQ8_4.js","chunks/logs-BYhp7VRE.js","css/Dashboard-CzHp-lW2.css","pages/UserManage-DjlrDwnw.js","css/UserManage-BoMPMWaP.css","pages/PackageManage-DnH3KgnI.js","css/PackageManage-CdBZZk8U.css","pages/LogView-BJBAsqLK.js","css/LogView-DmD6wmE3.css","pages/Stats-Dy4csuE5.js","chunks/echarts-Bn9PLWWT.js","css/Stats-B3vUuhr1.css","pages/ThemeSettings-CbTi7D_N.js","css/ThemeSettings-evTfDO5G.css","pages/CommunitySettings-ZKtO4YgO.js","css/CommunitySettings-DbbsV9QD.css","pages/HomepageSettings-7XoRmnAE.js","css/HomepageSettings-KfO_MyT8.css","pages/ResourceReview-NOjQPbcu.js","css/ResourceReview-WGD7vmKo.css","pages/CommentManage-CmcfxgCV.js","css/CommentManage-DuzcKn6x.css","pages/PostManage-Clbsl6GA.js","css/PostManage-DRxhoeqL.css","pages/UserActions-TGdn_6b0.js","css/UserActions-Dzl9-8Jt.css","pages/ResourceRecord-Cl_tC7S0.js","css/ResourceRecord-ByVVytU0.css","pages/BackupManage-CKAwBq9I.js","css/BackupManage-B9uaqnxy.css","pages/AnnouncementManage-CEC0bqVH.js","css/AnnouncementManage-CHzUIuCc.css","pages/UserActionLog-BYlMAjY5.js","css/UserActionLog-BKEKgdm-.css","pages/MailSettings-DL05kFml.js","css/MailSettings-Cel2AGgj.css","pages/SubscriptionManage-AH8QS_DW.js","chunks/subscriptions-rsW08wEa.js","css/SubscriptionManage-C-dqJ7qv.css","pages/DownloadSecurity-BGoDoDT3.js","css/DownloadSecurity-B7kw6i5K.css","pages/IpBanManage-AaWSYPYt.js","css/IpBanManage-C5tpD61h.css","pages/TagManage-C9Qx3h_P.js","css/TagManage-D-GxENvX.css","pages/Dashboard-D04548X4.js","css/Dashboard-BXt5sfEC.css","pages/ResourceManage-CLqzrqtA.js","css/ResourceManage-BPVJ3j9x.css","pages/Profile-Bi65JlaC.js","css/Profile-DxtmCTe9.css","pages/ElderComments-vtIlnNaq.js","css/ElderComments-p_uLyMp_.css","pages/ElderMyResources-CTCAhKkF.js","css/ElderMyResources-Dh-8cqk-.css","pages/Dashboard-BntNdU2w.js","css/Dashboard-vohCZ9Ko.css","pages/UserResources-CLhXgHnr.js","css/UserResources-CzcGR2nU.css","pages/UserProfile-BWQEYLE6.js","css/UserProfile-od5L4HU4.css","pages/UserComments-ZZsp5dN0.js","css/UserComments-BFCEnUK5.css","pages/Forbidden-D08uuHYi.js","css/Forbidden-DoDhmPwf.css","pages/NotFound-DQVow2O6.js"])))=>i.map(i=>d[i]);
import{r as be,j as Kr,f as oo,x as ye,c as Ke,y as le,A as S,Q as b,al as z,I as D,O as ge,u as V,ax as io,z as F,P as Zr,a6 as en,D as tn,H as Pe,K as rn,M as Fr,ay as nn,az as Ht,L as on,J as so,ar as ao,t as Wr,aA as uo,aB as lo,au as co}from"../chunks/vue-vendor-BleHOoLr.js";import{b as Xt,c as fo,u as Ze,s as mo,E as po,g as ho,l as _o,t as vo,m as go,d as wo,a as bo,e as yo,f as Ao,h as Jt,i as ko,j as Yt,k as Eo,n as qo,o as Lo,p as So,q as Io,r as Po}from"../chunks/element-plus-Cc1YNc_4.js";import{a as Ro}from"../chunks/utils-Dq7h7Pqt.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))f(m);new MutationObserver(m=>{for(const k of m)if(k.type==="childList")for(const _ of k.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&f(_)}).observe(document,{childList:!0,subtree:!0});function u(m){const k={};return m.integrity&&(k.integrity=m.integrity),m.referrerPolicy&&(k.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?k.credentials="include":m.crossOrigin==="anonymous"?k.credentials="omit":k.credentials="same-origin",k}function f(m){if(m.ep)return;m.ep=!0;const k=u(m);fetch(m.href,k)}})();const Z={light:{name:"light",label:"浅色模式",icon:"☀️",description:"明亮清晰的界面"},dark:{name:"dark",label:"深色模式",icon:"🌙",description:"护眼舒适的深色界面"},blue:{name:"blue",label:"蓝色主题",icon:"🔵",description:"清新蓝色系界面"},green:{name:"green",label:"绿色主题",icon:"🟢",description:"自然绿色系界面"},purple:{name:"purple",label:"紫色主题",icon:"🟣",description:"优雅紫色系界面"},orange:{name:"orange",label:"橙色主题",icon:"🟠",description:"活力橙色系界面"},red:{name:"red",label:"红色主题",icon:"🔴",description:"热情红色系界面"},auto:{name:"auto",label:"跟随系统",icon:"🔄",description:"自动跟随系统主题"}},Me=be("light"),Ft=be(!1),Wt=be("light");function To(){if(typeof window<"u"&&window.matchMedia){const s=window.matchMedia("(prefers-color-scheme: dark)"),a=u=>{Wt.value=u.matches?"dark":"light",Ft.value&&Gt(Wt.value)};return s.addEventListener("change",a),()=>s.removeEventListener("change",a)}return()=>{}}function Gt(s){const a=document.documentElement,u=document.body;if(console.log("开始应用主题:",s),["light","dark","blue","green","purple","orange","red"].forEach(m=>{a.classList.remove(m),u.classList.remove(m)}),s==="auto"){Ft.value=!0;const m=Wt.value;console.log("自动主题，实际应用:",m),a.classList.add(m),Me.value=m}else Ft.value=!1,console.log("应用固定主题:",s),a.classList.add(s),Me.value=s;localStorage.setItem("theme",s),window.dispatchEvent(new CustomEvent("themechange",{detail:{theme:s}})),setTimeout(()=>{const m=a.classList.contains(Me.value);console.log("主题应用验证:",{requested:s,current:Me.value,applied:m,htmlClasses:a.className,bodyClasses:u.className})},100),console.log("主题已切换到:",s)}function Oo(){return Me.value}function Do(){const s=localStorage.getItem("theme"),a=To(),u=s&&Z[s]?s:"light";return Gt(u),a}function $o(){const s=be(!1),a=be(!1),u=be(""),f=_=>{Gt(_),s.value=!1,u.value=`已切换到${Z[_].label}`,a.value=!0,setTimeout(()=>{a.value=!1},2e3)},m=()=>{const y=Oo()==="light"?"dark":"light";f(y)},k=_=>{(_.ctrlKey||_.metaKey)&&_.key==="t"&&(_.preventDefault(),m()),(_.ctrlKey||_.metaKey)&&_.shiftKey&&_.key==="T"&&(_.preventDefault(),s.value=!s.value)};return Kr(()=>{document.addEventListener("keydown",k)}),{currentTheme:oo(Me),isThemeMenuOpen:s,showThemeNotification:a,notificationMessage:u,switchTheme:f,quickToggle:m,themeConfigs:Z}}const Qr={getResourceRecords:s=>ne.get("/v1/resource-records",{params:s}),logResourceAction:(s,a,u)=>{const f={resource_id:s,action:a,resource_type:u?.resource_type||"Package"};return u?.old_data&&(f.old_data=typeof u.old_data=="string"?u.old_data:JSON.stringify(u.old_data)),u?.new_data&&(f.new_data=typeof u.new_data=="string"?u.new_data:JSON.stringify(u.new_data)),console.log("记录资源操作:",f),ne.post("/v1/resource-records",f)},getResourceActionStats:s=>ne.get("/v1/resource-records/stats",{params:s}),deleteResourceRecord:s=>ne.delete(`/v1/resource-records/${s}`),batchDeleteResourceRecords:s=>ne.post("/v1/resource-records/batch-delete",{ids:s}),clearResourceRecords:s=>ne.post("/v1/resource-records/clear",s)};class Uo{async logAction(a,u,f="Package",m,k){try{console.log(`记录资源操作: ID=${a}, 操作=${u}, 类型=${f}`),await Qr.logResourceAction(a,u,{resource_type:f,old_data:m,new_data:k})}catch(_){console.error("记录资源操作失败:",_)}}async logResourceOperation(a,u,f,m,k){try{if(a==="Package"&&(u.toLowerCase()==="create"||u.toLowerCase()==="add")){console.log(`[跳过记录] Package创建操作已在后端记录: ID=${f}`);return}console.log(`记录${a}操作: ID=${f}, 操作=${u}`);let _;switch(u.toLowerCase()){case"create":case"add":_="Create";break;case"update":case"modify":case"edit":_="Update";break;case"delete":case"remove":_="Delete";break;case"download":_="Download";break;case"upload":_="Upload";break;case"hide":_="Hide";break;case"show":_="Show";break;default:_=u}await Qr.logResourceAction(f,_,{resource_type:a,old_data:m,new_data:k})}catch(_){console.error("记录资源操作失败:",_)}}async logCreate(a,u="Package",f){if(u==="Package"){console.log(`[跳过记录] Package创建操作已在后端记录: ID=${a}`);return}return this.logAction(a,"Create",u,null,f)}async logUpdate(a,u="Package",f,m){return this.logAction(a,"Update",u,f,m)}async logDelete(a,u="Package",f){return this.logAction(a,"Delete",u,f)}async logDownload(a,u="Package"){return this.logAction(a,"Download",u)}async logUpload(a,u="Package",f){return this.logAction(a,"Upload",u,null,f)}async logStatusChange(a,u="Package",f,m){return this.logAction(a,"StatusChange",u,f,m)}}const Kt=new Uo,xo=window.fetch;window.fetch=async function(s,a){const u=a?.method||"GET",f=typeof s=="string"?s:s instanceof URL?s.toString():s.url;typeof f=="string"&&f.includes("/api/")&&console.log(`[Fetch拦截] ${u} ${f}`);const m=await xo(s,a),k=m.clone();if(typeof f=="string"&&f.includes("/api/")){if(u==="POST"&&f.includes("/api/v1/packages")&&!f.includes("/api/v1/packages/"))return console.log("[跳过前端记录] 包创建操作已在后端记录"),m;k.json().then(_=>{_&&_.code===0&&setTimeout(()=>{try{let y=null,E="Unknown",i="Unknown";const O=f;if(O.includes("/api/v1/packages/")){i="Package";const P=O.match(/\/api\/v1\/packages\/(\d+)/);P&&(y=parseInt(P[1]))}else if(O.includes("/api/v1/users/")){i="User";const P=O.match(/\/api\/v1\/users\/(\d+)/);P&&(y=parseInt(P[1]))}else if(O.includes("/api/v1/comments/")){i="Comment";const P=O.match(/\/api\/v1\/comments\/(\d+)/);P&&(y=parseInt(P[1]))}else if(O.includes("/api/v1/categories/")){i="Category";const P=O.match(/\/api\/v1\/categories\/(\d+)/);P&&(y=parseInt(P[1]))}else{const P=O.match(/\/(\d+)(\/|$)/);P&&(y=parseInt(P[1]),O.includes("/api/v1/packages")?i="Package":O.includes("/api/v1/users")?i="User":O.includes("/api/v1/comments")?i="Comment":O.includes("/api/v1/categories")&&(i="Category"))}if(u==="POST"?E="Create":u==="PUT"?E="Update":u==="DELETE"?E="Delete":u==="GET"&&O.includes("/download")&&(E="Download"),y&&E!=="Unknown"&&i!=="Unknown"){const P={resource_type:i};_.data&&E!=="Delete"&&(P.new_data=JSON.stringify(_.data)),console.log(`[Fetch记录] ${i} ${E}：ID=${y}`),Kt.logResourceOperation(i,E,y,null,_.data).catch(W=>console.warn("记录操作失败:",W))}}catch(y){console.warn("处理响应数据失败:",y)}},0)}).catch(_=>console.warn("解析响应JSON失败:",_))}return m};const No="/api",Mo=No,we=Ro.create({baseURL:Mo,timeout:1e4,withCredentials:!0,headers:{"Content-Type":"application/json"}});we.interceptors.request.use(s=>{if(typeof window<"u"&&window.isLoggingOut&&s.url&&!s.url.includes("/auth/logout"))return Promise.reject(new Error("正在退出登录"));const a=Re();if(a&&(s.headers.Authorization=`Bearer ${a}`),s.params){const u={...s.params};Object.keys(u).forEach(f=>{u[f]===""&&delete u[f]}),s.params=u}return s},s=>Promise.reject(s));we.interceptors.response.use(s=>(s.data&&typeof s.data=="object"&&"message"in s.data&&!("msg"in s.data)&&(s.data.msg=s.data.message),s),s=>{if(s.response?.status===401){sn();const a=window.location.pathname;!a.startsWith("/login")&&!a.startsWith("/register")&&!a.startsWith("/forgot-password")&&(console.log("🚫 401错误，重定向到登录页"),window.location.href="/login")}return Promise.reject(s)});const ne={get:(s,a)=>we.get(s,a).then(u=>u.data),post:(s,a,u)=>we.post(s,a,u).then(f=>f.data),put:(s,a,u)=>we.put(s,a,u).then(f=>f.data),delete:(s,a)=>we.delete(s,a).then(u=>u.data),upload:(s,a,u)=>we.post(s,a,{...u,headers:{"Content-Type":"multipart/form-data",...u?.headers}}).then(f=>f.data)},ls=(s,a,u)=>we.post(s,a,{...u,headers:{"Content-Type":"multipart/form-data"}}).then(f=>f.data),cs=s=>{localStorage.setItem("token",s)};/*! js-cookie v3.0.5 | MIT */function _t(s){for(var a=1;a<arguments.length;a++){var u=arguments[a];for(var f in u)s[f]=u[f]}return s}var Co={read:function(s){return s[0]==='"'&&(s=s.slice(1,-1)),s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(s){return encodeURIComponent(s).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Qt(s,a){function u(m,k,_){if(!(typeof document>"u")){_=_t({},a,_),typeof _.expires=="number"&&(_.expires=new Date(Date.now()+_.expires*864e5)),_.expires&&(_.expires=_.expires.toUTCString()),m=encodeURIComponent(m).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var y="";for(var E in _)_[E]&&(y+="; "+E,_[E]!==!0&&(y+="="+_[E].split(";")[0]));return document.cookie=m+"="+s.write(k,m)+y}}function f(m){if(!(typeof document>"u"||arguments.length&&!m)){for(var k=document.cookie?document.cookie.split("; "):[],_={},y=0;y<k.length;y++){var E=k[y].split("="),i=E.slice(1).join("=");try{var O=decodeURIComponent(E[0]);if(_[O]=s.read(i,O),m===O)break}catch{}}return m?_[m]:_}}return Object.create({set:u,get:f,remove:function(m,k){u(m,"",_t({},k,{expires:-1}))},withAttributes:function(m){return Qt(this.converter,_t({},this.attributes,m))},withConverter:function(m){return Qt(_t({},this.converter,m),this.attributes)}},{attributes:{value:Object.freeze(a)},converter:{value:Object.freeze(s)}})}var Ge=Qt(Co,{path:"/"});const vt={expires:7,path:"/",secure:window.location.protocol==="https:",sameSite:"lax"},Hr={expires:1,path:"/",secure:window.location.protocol==="https:",sameSite:"strict"};class Y{static set(a,u,f){const m={...vt,...f};Ge.set(a,u,m)}static get(a){return Ge.get(a)}static remove(a,u){const f={...vt,...u};Ge.remove(a,f)}static exists(a){return Ge.get(a)!==void 0}static getAll(){return Ge.get()}static setAuthToken(a){this.set("auth_token",a,Hr),localStorage.setItem("token",a)}static getAuthToken(){const a=this.get("auth_token");return a||localStorage.getItem("token")}static clearAuthToken(){this.remove("auth_token",Hr),localStorage.removeItem("token")}static setUserInfo(a){this.set("user_info",JSON.stringify(a),{...vt,expires:7}),localStorage.setItem("userInfo",JSON.stringify(a))}static getUserInfo(){const a=this.get("user_info");if(a)try{return JSON.parse(a)}catch{return null}const u=localStorage.getItem("userInfo");if(u)try{return JSON.parse(u)}catch{return null}return null}static clearUserInfo(){this.remove("user_info"),localStorage.removeItem("userInfo")}static setLoginStatus(a){this.set("is_logged_in",a.toString(),vt),localStorage.setItem("isLoggedIn",a.toString())}static getLoginStatus(){const a=this.get("is_logged_in");return a?a==="true":localStorage.getItem("isLoggedIn")==="true"}static clearLoginStatus(){this.remove("is_logged_in"),localStorage.removeItem("isLoggedIn")}static clearAllAuthData(){this.clearAuthToken(),this.clearUserInfo(),this.clearLoginStatus(),this.remove("username"),this.remove("user_role"),localStorage.removeItem("username"),localStorage.removeItem("userRole"),localStorage.removeItem("loginToken")}static setRememberMe(a,u){a&&u?this.set("remember_credentials",JSON.stringify(u),{expires:30,path:"/",secure:window.location.protocol==="https:",sameSite:"strict"}):this.remove("remember_credentials")}static getRememberCredentials(){const a=this.get("remember_credentials");if(a)try{return JSON.parse(a)}catch{return null}return null}static clearRememberCredentials(){this.remove("remember_credentials")}}function Vo(){const s=!!Re();if(!s)return!1;const a=Y.getLoginStatus();return s&&a}function Ce(){return Y.getUserInfo()}function Re(){const s=localStorage.getItem("token");return s||Y.getAuthToken()}function sn(){localStorage.removeItem("token"),Y.clearAuthToken()}function Bo(){Y.clearAllAuthData(),localStorage.removeItem("token"),typeof window<"u"&&(window.isLoggingOut=!1)}function jo(s,a,u){Y.setLoginStatus(!0),Y.set("username",s),a&&localStorage.setItem("token",a);const f=u?{...u,loginTime:new Date().toISOString()}:{username:s,loginTime:new Date().toISOString()};Y.setUserInfo(f)}function an(){const s=Re(),a=Ce();return{hasToken:!!s,hasUserInfo:!!a,userInfo:a}}function Zt(){return Re()?ne.get("/v1/auth/user-info").then(a=>a.code===0&&a.data?(Y.setUserInfo(a.data),typeof window<"u"&&(window.lastUserInfoValid=!0),a.data):(typeof window<"u"&&(window.lastUserInfoValid=!1),Y.clearAllAuthData(),null)).catch(a=>(console.warn("获取用户信息失败:",a.response?.status),typeof window<"u"&&(window.lastUserInfoValid=!1),Y.clearAllAuthData(),null)):(console.log("🚫 无token，跳过用户信息获取"),Promise.resolve(null))}async function un(){const{hasToken:s,hasUserInfo:a,userInfo:u}=an();if(console.log("🔄 恢复认证状态:",{hasToken:s,hasUserInfo:a,userInfo:u?.username}),s&&!a){console.log("📡 Token存在但用户信息缺失，尝试从服务器获取...");try{const f=await Zt();if(f)return console.log("✅ 用户信息恢复成功:",f.username),{isAuthenticated:!0,userInfo:f}}catch(f){console.warn("⚠️ 用户信息恢复失败:",f)}}return s&&a?(console.log("✅ 本地认证信息完整，信任本地状态"),{isAuthenticated:!0,userInfo:u}):{isAuthenticated:s&&a,userInfo:u}}async function ln(){console.log("🚪 开始退出登录...");try{const s=await fetch("/api/v1/auth/logout",{method:"POST",credentials:"include"});s.ok?console.log("✅ 服务器Cookie已清除"):console.warn("⚠️ 服务器退出登录返回非200状态:",s.status)}catch(s){console.warn("⚠️ 服务器退出登录失败，但本地数据已清除:",s)}finally{Y.clearAllAuthData(),localStorage.removeItem("token"),typeof window<"u"&&(window.isLoggingOut=!0),console.log("🚀 跳转到登录页"),window.location.href="/login"}}function zo(s,a){Y.setRememberMe(s,a)}function Fo(){return Y.getRememberCredentials()}const Wo=Object.freeze(Object.defineProperty({__proto__:null,checkAuthStatus:an,clearLoginStatus:Bo,clearToken:sn,getRememberCredentials:Fo,getToken:Re,getUserInfo:Ce,isLoggedIn:Vo,logout:ln,refreshUserInfo:Zt,restoreAuthState:un,setLoginStatus:jo,setRememberMe:zo},Symbol.toStringTag,{value:"Module"})),Qo={class:"desktop-navbar"},Ho={class:"navbar-content"},Xo={class:"navbar-left"},Jo={class:"navbar-logo"},Yo={class:"navbar-title"},Go={class:"navbar-right"},Ko=["textContent"],Zo={class:"theme-label"},ei={class:"theme-option"},ti=["textContent"],ri={class:"theme-info"},ni={class:"theme-label"},oi={class:"theme-description"},ii={class:"user-info"},si=["src"],ai={class:"user-name"},ui=ye({__name:"NavBar",setup(s){const a=io(),{currentTheme:u,switchTheme:f,isThemeMenuOpen:m}=$o(),k=Ce(),_=Ke(()=>"绳圈社区管理"),y=Ke(()=>Z[u.value]?.icon||"🎨"),E=Ke(()=>Z[u.value]?.label||"未知主题"),i=[Z.light,Z.dark,Z.blue,Z.green,Z.purple,Z.orange,Z.red,Z.auto],O=()=>{a.push("/admin/profile")},P=async()=>{try{await po.confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),ln(),a.push("/auth/login")}catch{}};return(W,oe)=>{const ee=z("el-icon"),Te=z("el-button"),G=z("el-dropdown-item"),Oe=z("el-dropdown-menu"),ke=z("el-dropdown"),De=z("el-avatar"),et=z("Bottom");return F(),le("nav",Qo,[S("div",Ho,[S("div",Xo,[S("div",Jo,[b(ee,{size:24},{default:D(()=>[b(V(Xt))]),_:1}),S("span",Yo,ge(_.value),1)])]),S("div",Go,[b(ke,{trigger:"click",placement:"bottom-end",visible:V(m),onVisibleChange:oe[0]||(oe[0]=Q=>m.value=Q)},{dropdown:D(()=>[b(Oe,{class:"theme-dropdown"},{default:D(()=>[(F(),le(Zr,null,en(i,Q=>b(G,{key:Q.name,onClick:Be=>V(f)(Q.name),class:tn({active:V(u)===Q.name})},{default:D(()=>[S("div",ei,[S("span",{class:"theme-icon",textContent:ge(Q.icon)},null,8,ti),S("div",ri,[S("div",ni,ge(Q.label),1),S("div",oi,ge(Q.description),1)]),V(u)===Q.name?(F(),Pe(ee,{key:0,class:"check-icon"},{default:D(()=>[b(V(fo))]),_:1})):rn("",!0)])]),_:2},1032,["onClick","class"])),64))]),_:1})]),default:D(()=>[b(Te,{link:"",class:"theme-btn",title:`当前主题: ${E.value}`},{default:D(()=>[S("span",{class:"theme-icon",textContent:ge(y.value)},null,8,Ko),S("span",Zo,ge(E.value),1)]),_:1},8,["title"])]),_:1},8,["visible"]),b(ke,{trigger:"click",placement:"bottom-end"},{dropdown:D(()=>[b(Oe,{class:"user-dropdown"},{default:D(()=>[b(G,{onClick:O},{default:D(()=>[b(ee,null,{default:D(()=>[b(V(Ze))]),_:1}),oe[1]||(oe[1]=Fr(" 个人资料 "))]),_:1,__:[1]}),b(G,{divided:"",onClick:P},{default:D(()=>[b(ee,null,{default:D(()=>[b(V(mo))]),_:1}),oe[2]||(oe[2]=Fr(" 退出登录 "))]),_:1,__:[2]})]),_:1})]),default:D(()=>[S("div",ii,[V(k).avatar_url?(F(),Pe(De,{key:0,size:32,class:"user-avatar",src:V(k).avatar_url},{default:D(()=>[S("img",{src:V(k).avatar_url},null,8,si)]),_:1},8,["src"])):(F(),Pe(De,{key:1,size:32,class:"user-avatar"},{default:D(()=>[b(ee,null,{default:D(()=>[b(V(Ze))]),_:1})]),_:1})),S("span",ai,ge(V(k).username),1),b(ee,{class:"dropdown-icon"},{default:D(()=>[b(et)]),_:1})])]),_:1})])])])}}}),Ae=(s,a)=>{const u=s.__vccOpts||s;for(const[f,m]of a)u[f]=m;return u},er=Ae(ui,[["__scopeId","data-v-98a9366a"]]),li="modulepreload",ci=function(s){return"/"+s},Xr={},L=function(a,u,f){let m=Promise.resolve();if(u&&u.length>0){let E=function(i){return Promise.all(i.map(O=>Promise.resolve(O).then(P=>({status:"fulfilled",value:P}),P=>({status:"rejected",reason:P}))))};document.getElementsByTagName("link");const _=document.querySelector("meta[property=csp-nonce]"),y=_?.nonce||_?.getAttribute("nonce");m=E(u.map(i=>{if(i=ci(i),i in Xr)return;Xr[i]=!0;const O=i.endsWith(".css"),P=O?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${P}`))return;const W=document.createElement("link");if(W.rel=O?"stylesheet":li,O||(W.as="script"),W.crossOrigin="",W.href=i,y&&W.setAttribute("nonce",y),document.head.appendChild(W),O)return new Promise((oe,ee)=>{W.addEventListener("load",oe),W.addEventListener("error",()=>ee(new Error(`Unable to preload CSS for ${i}`)))})}))}function k(_){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=_,window.dispatchEvent(y),!y.defaultPrevented)throw _}return m.then(_=>{for(const y of _||[])y.status==="rejected"&&k(y.reason);return a().catch(k)})};var zt={exports:{}};const di={},fi=Object.freeze(Object.defineProperty({__proto__:null,default:di},Symbol.toStringTag,{value:"Module"})),Jr=ho(fi);var Yr;function mi(){return Yr||(Yr=1,function(s,a){var u=void 0,f=function(m){return u||(u=new Promise(function(k,_){var y=typeof m<"u"?m:{},E=y.onAbort;y.onAbort=function(e){_(new Error(e)),E&&E(e)},y.postRun=y.postRun||[],y.postRun.push(function(){k(y)}),s=void 0;var i;i||=typeof y<"u"?y:{};var O=typeof window=="object",P=typeof WorkerGlobalScope<"u",W=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";i.onRuntimeInitialized=function(){function e(l,p){switch(typeof p){case"boolean":ro(l,p?1:0);break;case"number":Zn(l,p);break;case"string":eo(l,p,-1,-1);break;case"object":if(p===null)Vr(l);else if(p.length!=null){var v=mt(p,ft);to(l,v,p.length,-1),pt(v)}else ht(l,"Wrong API use : tried to return a value of an unknown type ("+p+").",-1);break;default:Vr(l)}}function t(l,p){for(var v=[],A=0;A<l;A+=1){var q=de(p+4*A,"i32"),U=Xn(q);if(U===1||U===2)q=Kn(q);else if(U===3)q=Yn(q);else if(U===4){U=q,q=Jn(U),U=Gn(U);for(var se=new Uint8Array(q),re=0;re<q;re+=1)se[re]=j[U+re];q=se}else q=null;v.push(q)}return v}function r(l,p){this.Qa=l,this.db=p,this.Oa=1,this.lb=[]}function n(l,p){if(this.db=p,p=We(l)+1,this.eb=Vt(p),this.eb===null)throw Error("Unable to allocate memory for the SQL string");fe(l,$,this.eb,p),this.kb=this.eb,this.Za=this.pb=null}function o(l){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),l!=null){var p=this.filename,v="/",A=p;if(v&&(v=typeof v=="string"?v:It(v),A=p?qt(v+"/"+p):v),p=mr(!0,!0),A=En(A,p),l){if(typeof l=="string"){v=Array(l.length);for(var q=0,U=l.length;q<U;++q)v[q]=l.charCodeAt(q);l=v}ut(A,p|146),v=Ne(A,577),Rr(v,l,0,l.length,0),$t(v),ut(A,p)}}this.handleError(w(this.filename,c)),this.db=de(c,"i32"),jr(this.db),this.fb={},this.Sa={}}var c=ve(4),d=i.cwrap,w=d("sqlite3_open","number",["string","number"]),T=d("sqlite3_close_v2","number",["number"]),R=d("sqlite3_exec","number",["number","string","number","number","number"]),C=d("sqlite3_changes","number",["number"]),J=d("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Ur=d("sqlite3_sql","string",["number"]),Tn=d("sqlite3_normalized_sql","string",["number"]),xr=d("sqlite3_prepare_v2","number",["number","number","number","number","number"]),On=d("sqlite3_bind_text","number",["number","number","number","number","number"]),Nr=d("sqlite3_bind_blob","number",["number","number","number","number","number"]),Dn=d("sqlite3_bind_double","number",["number","number","number"]),$n=d("sqlite3_bind_int","number",["number","number","number"]),Un=d("sqlite3_bind_parameter_index","number",["number","string"]),xn=d("sqlite3_step","number",["number"]),Nn=d("sqlite3_errmsg","string",["number"]),Mn=d("sqlite3_column_count","number",["number"]),Cn=d("sqlite3_data_count","number",["number"]),Vn=d("sqlite3_column_double","number",["number","number"]),Mr=d("sqlite3_column_text","string",["number","number"]),Bn=d("sqlite3_column_blob","number",["number","number"]),jn=d("sqlite3_column_bytes","number",["number","number"]),zn=d("sqlite3_column_type","number",["number","number"]),Fn=d("sqlite3_column_name","string",["number","number"]),Wn=d("sqlite3_reset","number",["number"]),Qn=d("sqlite3_clear_bindings","number",["number"]),Hn=d("sqlite3_finalize","number",["number"]),Cr=d("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Xn=d("sqlite3_value_type","number",["number"]),Jn=d("sqlite3_value_bytes","number",["number"]),Yn=d("sqlite3_value_text","string",["number"]),Gn=d("sqlite3_value_blob","number",["number"]),Kn=d("sqlite3_value_double","number",["number"]),Zn=d("sqlite3_result_double","",["number","number"]),Vr=d("sqlite3_result_null","",["number"]),eo=d("sqlite3_result_text","",["number","string","number","number"]),to=d("sqlite3_result_blob","",["number","number","number","number"]),ro=d("sqlite3_result_int","",["number","number"]),ht=d("sqlite3_result_error","",["number","string","number"]),Br=d("sqlite3_aggregate_context","number",["number","number"]),jr=d("RegisterExtensionFunctions","number",["number"]),zr=d("sqlite3_update_hook","number",["number","number","number"]);r.prototype.bind=function(l){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(l)?this.Cb(l):l!=null&&typeof l=="object"?this.Db(l):!0},r.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var l=xn(this.Qa);switch(l){case 100:return!0;case 101:return!1;default:throw this.db.handleError(l)}},r.prototype.wb=function(l){return l==null&&(l=this.Oa,this.Oa+=1),Vn(this.Qa,l)},r.prototype.Gb=function(l){if(l==null&&(l=this.Oa,this.Oa+=1),l=Mr(this.Qa,l),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(l)},r.prototype.Hb=function(l){return l==null&&(l=this.Oa,this.Oa+=1),Mr(this.Qa,l)},r.prototype.getBlob=function(l){l==null&&(l=this.Oa,this.Oa+=1);var p=jn(this.Qa,l);l=Bn(this.Qa,l);for(var v=new Uint8Array(p),A=0;A<p;A+=1)v[A]=j[l+A];return v},r.prototype.get=function(l,p){p=p||{},l!=null&&this.bind(l)&&this.step(),l=[];for(var v=Cn(this.Qa),A=0;A<v;A+=1)switch(zn(this.Qa,A)){case 1:var q=p.useBigInt?this.Gb(A):this.wb(A);l.push(q);break;case 2:l.push(this.wb(A));break;case 3:l.push(this.Hb(A));break;case 4:l.push(this.getBlob(A));break;default:l.push(null)}return l},r.prototype.getColumnNames=function(){for(var l=[],p=Mn(this.Qa),v=0;v<p;v+=1)l.push(Fn(this.Qa,v));return l},r.prototype.getAsObject=function(l,p){l=this.get(l,p),p=this.getColumnNames();for(var v={},A=0;A<p.length;A+=1)v[p[A]]=l[A];return v},r.prototype.getSQL=function(){return Ur(this.Qa)},r.prototype.getNormalizedSQL=function(){return Tn(this.Qa)},r.prototype.run=function(l){return l!=null&&this.bind(l),this.step(),this.reset()},r.prototype.sb=function(l,p){p==null&&(p=this.Oa,this.Oa+=1),l=cr(l);var v=mt(l,ft);this.lb.push(v),this.db.handleError(On(this.Qa,p,v,l.length-1,0))},r.prototype.Bb=function(l,p){p==null&&(p=this.Oa,this.Oa+=1);var v=mt(l,ft);this.lb.push(v),this.db.handleError(Nr(this.Qa,p,v,l.length,0))},r.prototype.rb=function(l,p){p==null&&(p=this.Oa,this.Oa+=1),this.db.handleError((l===(l|0)?$n:Dn)(this.Qa,p,l))},r.prototype.Eb=function(l){l==null&&(l=this.Oa,this.Oa+=1),Nr(this.Qa,l,0,0,0)},r.prototype.tb=function(l,p){switch(p==null&&(p=this.Oa,this.Oa+=1),typeof l){case"string":this.sb(l,p);return;case"number":this.rb(l,p);return;case"bigint":this.sb(l.toString(),p);return;case"boolean":this.rb(l+0,p);return;case"object":if(l===null){this.Eb(p);return}if(l.length!=null){this.Bb(l,p);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+l+")."},r.prototype.Db=function(l){var p=this;return Object.keys(l).forEach(function(v){var A=Un(p.Qa,v);A!==0&&p.tb(l[v],A)}),!0},r.prototype.Cb=function(l){for(var p=0;p<l.length;p+=1)this.tb(l[p],p+1);return!0},r.prototype.reset=function(){return this.freemem(),Qn(this.Qa)===0&&Wn(this.Qa)===0},r.prototype.freemem=function(){for(var l;(l=this.lb.pop())!==void 0;)pt(l)},r.prototype.free=function(){this.freemem();var l=Hn(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,l},n.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var l=Ye(),p=ve(4);Fe(c),Fe(p);try{this.db.handleError(xr(this.db.db,this.kb,-1,c,p)),this.kb=de(p,"i32");var v=de(c,"i32");return v===0?(this.mb(),{done:!0}):(this.Za=new r(v,this.db),this.db.fb[v]=this.Za,{value:this.Za,done:!1})}catch(A){throw this.pb=Et(this.kb),this.mb(),A}finally{Je(l)}},n.prototype.mb=function(){pt(this.eb),this.eb=null},n.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:Et(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(n.prototype[Symbol.iterator]=function(){return this}),o.prototype.run=function(l,p){if(!this.db)throw"Database closed";if(p){l=this.prepare(l,p);try{l.step()}finally{l.free()}}else this.handleError(R(this.db,l,0,0,c));return this},o.prototype.exec=function(l,p,v){if(!this.db)throw"Database closed";var A=Ye(),q=null;try{var U=Mt(l),se=ve(4);for(l=[];de(U,"i8")!==0;){Fe(c),Fe(se),this.handleError(xr(this.db,U,-1,c,se));var re=de(c,"i32");if(U=de(se,"i32"),re!==0){var K=null;for(q=new r(re,this),p!=null&&q.bind(p);q.step();)K===null&&(K={columns:q.getColumnNames(),values:[]},l.push(K)),K.values.push(q.get(null,v));q.free()}}return l}catch(ae){throw q&&q.free(),ae}finally{Je(A)}},o.prototype.each=function(l,p,v,A,q){typeof p=="function"&&(A=v,v=p,p=void 0),l=this.prepare(l,p);try{for(;l.step();)v(l.getAsObject(null,q))}finally{l.free()}if(typeof A=="function")return A()},o.prototype.prepare=function(l,p){if(Fe(c),this.handleError(J(this.db,l,-1,c,0)),l=de(c,"i32"),l===0)throw"Nothing to prepare";var v=new r(l,this);return p!=null&&v.bind(p),this.fb[l]=v},o.prototype.iterateStatements=function(l){return new n(l,this)},o.prototype.export=function(){Object.values(this.fb).forEach(function(p){p.free()}),Object.values(this.Sa).forEach(_e),this.Sa={},this.handleError(T(this.db));var l=qn(this.filename);return this.handleError(w(this.filename,c)),this.db=de(c,"i32"),jr(this.db),l},o.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(l){l.free()}),Object.values(this.Sa).forEach(_e),this.Sa={},this.Ya&&(_e(this.Ya),this.Ya=void 0),this.handleError(T(this.db)),qr("/"+this.filename),this.db=null)},o.prototype.handleError=function(l){if(l===0)return null;throw l=Nn(this.db),Error(l)},o.prototype.getRowsModified=function(){return C(this.db)},o.prototype.create_function=function(l,p){Object.prototype.hasOwnProperty.call(this.Sa,l)&&(_e(this.Sa[l]),delete this.Sa[l]);var v=Xe(function(A,q,U){q=t(q,U);try{var se=p.apply(null,q)}catch(re){ht(A,re,-1);return}e(A,se)},"viii");return this.Sa[l]=v,this.handleError(Cr(this.db,l,p.length,1,0,v,0,0,0)),this},o.prototype.create_aggregate=function(l,p){var v=p.init||function(){return null},A=p.finalize||function(K){return K},q=p.step;if(!q)throw"An aggregate function must have a step function in "+l;var U={};Object.hasOwnProperty.call(this.Sa,l)&&(_e(this.Sa[l]),delete this.Sa[l]),p=l+"__finalize",Object.hasOwnProperty.call(this.Sa,p)&&(_e(this.Sa[p]),delete this.Sa[p]);var se=Xe(function(K,ae,jt){var Ie=Br(K,1);Object.hasOwnProperty.call(U,Ie)||(U[Ie]=v()),ae=t(ae,jt),ae=[U[Ie]].concat(ae);try{U[Ie]=q.apply(null,ae)}catch(no){delete U[Ie],ht(K,no,-1)}},"viii"),re=Xe(function(K){var ae=Br(K,1);try{var jt=A(U[ae])}catch(Ie){delete U[ae],ht(K,Ie,-1);return}e(K,jt),delete U[ae]},"vi");return this.Sa[l]=se,this.Sa[p]=re,this.handleError(Cr(this.db,l,q.length-1,1,0,0,se,re,0)),this},o.prototype.updateHook=function(l){this.Ya&&(zr(this.db,0,0),_e(this.Ya),this.Ya=void 0),l&&(this.Ya=Xe(function(p,v,A,q,U){switch(v){case 18:p="insert";break;case 23:p="update";break;case 9:p="delete";break;default:throw"unknown operationCode in updateHook callback: "+v}if(A=A?M($,A):"",q=q?M($,q):"",U>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";l(p,A,q,Number(U))},"viiiij"),zr(this.db,this.Ya,0))},i.Database=o};var oe={...i},ee="./this.program",Te=(e,t)=>{throw t},G="",Oe,ke;if(W){var De=Jr;G=__dirname+"/",ke=e=>(e=nt(e)?new URL(e):e,De.readFileSync(e)),Oe=async e=>(e=nt(e)?new URL(e):e,De.readFileSync(e,void 0)),!i.thisProgram&&1<process.argv.length&&(ee=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),s.exports=i,Te=(e,t)=>{throw process.exitCode=e,t}}else(O||P)&&(P?G=self.location.href:typeof document<"u"&&document.currentScript&&(G=document.currentScript.src),G=G.startsWith("blob:")?"":G.slice(0,G.replace(/[?#].*/,"").lastIndexOf("/")+1),P&&(ke=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),Oe=async e=>{if(nt(e))return new Promise((r,n)=>{var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=()=>{o.status==200||o.status==0&&o.response?r(o.response):n(o.status)},o.onerror=n,o.send(null)});var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw Error(t.status+" : "+t.url)});var et=i.print||console.log.bind(console),Q=i.printErr||console.error.bind(console);Object.assign(i,oe),oe=null,i.thisProgram&&(ee=i.thisProgram);var Be=i.wasmBinary,tt,rt=!1,gt,j,$,je,x,B,wt,ie,bt,nt=e=>e.startsWith("file://");function rr(){var e=tt.buffer;i.HEAP8=j=new Int8Array(e),i.HEAP16=je=new Int16Array(e),i.HEAPU8=$=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAP32=x=new Int32Array(e),i.HEAPU32=B=new Uint32Array(e),i.HEAPF32=wt=new Float32Array(e),i.HEAPF64=bt=new Float64Array(e),i.HEAP64=ie=new BigInt64Array(e),i.HEAPU64=new BigUint64Array(e)}var Ee=0,ze=null;function $e(e){throw i.onAbort?.(e),e="Aborted("+e+")",Q(e),rt=!0,new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info.")}var yt;async function cn(e){if(!Be)try{var t=await Oe(e);return new Uint8Array(t)}catch{}if(e==yt&&Be)e=new Uint8Array(Be);else if(ke)e=ke(e);else throw"both async and sync fetching of the wasm failed";return e}async function dn(e,t){try{var r=await cn(e);return await WebAssembly.instantiate(r,t)}catch(n){Q(`failed to asynchronously prepare wasm: ${n}`),$e(n)}}async function fn(e){var t=yt;if(!Be&&typeof WebAssembly.instantiateStreaming=="function"&&!nt(t)&&!W)try{var r=fetch(t,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(r,e)}catch(n){Q(`wasm streaming compile failed: ${n}`),Q("falling back to ArrayBuffer instantiation")}return dn(t,e)}class At{name="ExitStatus";constructor(t){this.message=`Program terminated with exit(${t})`,this.status=t}}var nr=e=>{for(;0<e.length;)e.shift()(i)},or=[],ir=[],mn=()=>{var e=i.preRun.shift();ir.unshift(e)};function de(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return j[e];case"i8":return j[e];case"i16":return je[e>>1];case"i32":return x[e>>2];case"i64":return ie[e>>3];case"float":return wt[e>>2];case"double":return bt[e>>3];case"*":return B[e>>2];default:$e(`invalid type for getValue: ${t}`)}}var kt=i.noExitRuntime||!0;function Fe(e){var t="i32";switch(t.endsWith("*")&&(t="*"),t){case"i1":j[e]=0;break;case"i8":j[e]=0;break;case"i16":je[e>>1]=0;break;case"i32":x[e>>2]=0;break;case"i64":ie[e>>3]=BigInt(0);break;case"float":wt[e>>2]=0;break;case"double":bt[e>>3]=0;break;case"*":B[e>>2]=0;break;default:$e(`invalid type for setValue: ${t}`)}}var sr=typeof TextDecoder<"u"?new TextDecoder:void 0,M=(e,t=0,r=NaN)=>{var n=t+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&sr)return sr.decode(e.subarray(t,r));for(n="";t<r;){var o=e[t++];if(o&128){var c=e[t++]&63;if((o&224)==192)n+=String.fromCharCode((o&31)<<6|c);else{var d=e[t++]&63;o=(o&240)==224?(o&15)<<12|c<<6|d:(o&7)<<18|c<<12|d<<6|e[t++]&63,65536>o?n+=String.fromCharCode(o):(o-=65536,n+=String.fromCharCode(55296|o>>10,56320|o&1023))}}else n+=String.fromCharCode(o)}return n},Et=(e,t)=>e?M($,e,t):"",ar=(e,t)=>{for(var r=0,n=e.length-1;0<=n;n--){var o=e[n];o==="."?e.splice(n,1):o===".."?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},qt=e=>{var t=e.charAt(0)==="/",r=e.slice(-1)==="/";return(e=ar(e.split("/").filter(n=>!!n),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},ur=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&=t.slice(0,-1),e+t)},ot=e=>e&&e.match(/([^\/]+|\/)\/*$/)[1],pn=()=>{if(W){var e=Jr;return t=>e.randomFillSync(t)}return t=>crypto.getRandomValues(t)},lr=e=>{(lr=pn())(e)},hn=(...e)=>{for(var t="",r=!1,n=e.length-1;-1<=n&&!r;n--){if(r=0<=n?e[n]:"/",typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";t=r+"/"+t,r=r.charAt(0)==="/"}return t=ar(t.split("/").filter(o=>!!o),!r).join("/"),(r?"/":"")+t||"."},Lt=[],We=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3}return t},fe=(e,t,r,n)=>{if(!(0<n))return 0;var o=r;n=r+n-1;for(var c=0;c<e.length;++c){var d=e.charCodeAt(c);if(55296<=d&&57343>=d){var w=e.charCodeAt(++c);d=65536+((d&1023)<<10)|w&1023}if(127>=d){if(r>=n)break;t[r++]=d}else{if(2047>=d){if(r+1>=n)break;t[r++]=192|d>>6}else{if(65535>=d){if(r+2>=n)break;t[r++]=224|d>>12}else{if(r+3>=n)break;t[r++]=240|d>>18,t[r++]=128|d>>12&63}t[r++]=128|d>>6&63}t[r++]=128|d&63}}return t[r]=0,r-o},cr=(e,t)=>{var r=Array(We(e)+1);return e=fe(e,r,0,r.length),t&&(r.length=e),r},dr=[];function fr(e,t){dr[e]={input:[],output:[],cb:t},Ot(e,_n)}var _n={open(e){var t=dr[e.node.rdev];if(!t)throw new h(43);e.tty=t,e.seekable=!1},close(e){e.tty.cb.fsync(e.tty)},fsync(e){e.tty.cb.fsync(e.tty)},read(e,t,r,n){if(!e.tty||!e.tty.cb.xb)throw new h(60);for(var o=0,c=0;c<n;c++){try{var d=e.tty.cb.xb(e.tty)}catch{throw new h(29)}if(d===void 0&&o===0)throw new h(6);if(d==null)break;o++,t[r+c]=d}return o&&(e.node.atime=Date.now()),o},write(e,t,r,n){if(!e.tty||!e.tty.cb.qb)throw new h(60);try{for(var o=0;o<n;o++)e.tty.cb.qb(e.tty,t[r+o])}catch{throw new h(29)}return n&&(e.node.mtime=e.node.ctime=Date.now()),o}},vn={xb(){e:{if(!Lt.length){var e=null;if(W){var t=Buffer.alloc(256),r=0,n=process.stdin.fd;try{r=De.readSync(n,t,0,256)}catch(o){if(o.toString().includes("EOF"))r=0;else throw o}0<r&&(e=t.slice(0,r).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`));if(!e){e=null;break e}Lt=cr(e,!0)}e=Lt.shift()}return e},qb(e,t){t===null||t===10?(et(M(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){0<e.output?.length&&(et(M(e.output)),e.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},gn={qb(e,t){t===null||t===10?(Q(M(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){0<e.output?.length&&(Q(M(e.output)),e.output=[])}},I={Wa:null,Xa(){return I.createNode(null,"/",16895,0)},createNode(e,t,r,n){if((r&61440)===24576||(r&61440)===4096)throw new h(63);return I.Wa||(I.Wa={dir:{node:{Ta:I.La.Ta,Ua:I.La.Ua,lookup:I.La.lookup,hb:I.La.hb,rename:I.La.rename,unlink:I.La.unlink,rmdir:I.La.rmdir,readdir:I.La.readdir,symlink:I.La.symlink},stream:{Va:I.Ma.Va}},file:{node:{Ta:I.La.Ta,Ua:I.La.Ua},stream:{Va:I.Ma.Va,read:I.Ma.read,write:I.Ma.write,ib:I.Ma.ib,jb:I.Ma.jb}},link:{node:{Ta:I.La.Ta,Ua:I.La.Ua,readlink:I.La.readlink},stream:{}},ub:{node:{Ta:I.La.Ta,Ua:I.La.Ua},stream:kn}}),r=gr(e,t,r,n),X(r.mode)?(r.La=I.Wa.dir.node,r.Ma=I.Wa.dir.stream,r.Na={}):(r.mode&61440)===32768?(r.La=I.Wa.file.node,r.Ma=I.Wa.file.stream,r.Ra=0,r.Na=null):(r.mode&61440)===40960?(r.La=I.Wa.link.node,r.Ma=I.Wa.link.stream):(r.mode&61440)===8192&&(r.La=I.Wa.ub.node,r.Ma=I.Wa.ub.stream),r.atime=r.mtime=r.ctime=Date.now(),e&&(e.Na[t]=r,e.atime=e.mtime=e.ctime=r.atime),r},Sb(e){return e.Na?e.Na.subarray?e.Na.subarray(0,e.Ra):new Uint8Array(e.Na):new Uint8Array(0)},La:{Ta(e){var t={};return t.dev=(e.mode&61440)===8192?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,X(e.mode)?t.size=4096:(e.mode&61440)===32768?t.size=e.Ra:(e.mode&61440)===40960?t.size=e.link.length:t.size=0,t.atime=new Date(e.atime),t.mtime=new Date(e.mtime),t.ctime=new Date(e.ctime),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},Ua(e,t){for(var r of["mode","atime","mtime","ctime"])t[r]!=null&&(e[r]=t[r]);t.size!==void 0&&(t=t.size,e.Ra!=t&&(t==0?(e.Na=null,e.Ra=0):(r=e.Na,e.Na=new Uint8Array(t),r&&e.Na.set(r.subarray(0,Math.min(t,e.Ra))),e.Ra=t)))},lookup(){throw I.vb},hb(e,t,r,n){return I.createNode(e,t,r,n)},rename(e,t,r){try{var n=qe(t,r)}catch{}if(n){if(X(e.mode))for(var o in n.Na)throw new h(55);Rt(n)}delete e.parent.Na[e.name],t.Na[r]=e,e.name=r,t.ctime=t.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,t){delete e.Na[t],e.ctime=e.mtime=Date.now()},rmdir(e,t){var r=qe(e,t),n;for(n in r.Na)throw new h(55);delete e.Na[t],e.ctime=e.mtime=Date.now()},readdir(e){return[".","..",...Object.keys(e.Na)]},symlink(e,t,r){return e=I.createNode(e,t,41471,0),e.link=r,e},readlink(e){if((e.mode&61440)!==40960)throw new h(28);return e.link}},Ma:{read(e,t,r,n,o){var c=e.node.Na;if(o>=e.node.Ra)return 0;if(e=Math.min(e.node.Ra-o,n),8<e&&c.subarray)t.set(c.subarray(o,o+e),r);else for(n=0;n<e;n++)t[r+n]=c[o+n];return e},write(e,t,r,n,o,c){if(t.buffer===j.buffer&&(c=!1),!n)return 0;if(e=e.node,e.mtime=e.ctime=Date.now(),t.subarray&&(!e.Na||e.Na.subarray)){if(c)return e.Na=t.subarray(r,r+n),e.Ra=n;if(e.Ra===0&&o===0)return e.Na=t.slice(r,r+n),e.Ra=n;if(o+n<=e.Ra)return e.Na.set(t.subarray(r,r+n),o),n}c=o+n;var d=e.Na?e.Na.length:0;if(d>=c||(c=Math.max(c,d*(1048576>d?2:1.125)>>>0),d!=0&&(c=Math.max(c,256)),d=e.Na,e.Na=new Uint8Array(c),0<e.Ra&&e.Na.set(d.subarray(0,e.Ra),0)),e.Na.subarray&&t.subarray)e.Na.set(t.subarray(r,r+n),o);else for(c=0;c<n;c++)e.Na[o+c]=t[r+c];return e.Ra=Math.max(e.Ra,o+n),n},Va(e,t,r){if(r===1?t+=e.position:r===2&&(e.node.mode&61440)===32768&&(t+=e.node.Ra),0>t)throw new h(28);return t},ib(e,t,r,n,o){if((e.node.mode&61440)!==32768)throw new h(43);if(e=e.node.Na,o&2||!e||e.buffer!==j.buffer){o=!0,n=65536*Math.ceil(t/65536);var c=Dr(65536,n);if(c&&$.fill(0,c,c+n),n=c,!n)throw new h(48);e&&((0<r||r+t<e.length)&&(e.subarray?e=e.subarray(r,r+t):e=Array.prototype.slice.call(e,r,r+t)),j.set(e,n))}else o=!1,n=e.byteOffset;return{Kb:n,Ab:o}},jb(e,t,r,n){return I.Ma.write(e,t,0,n,r,!1),0}}},mr=(e,t)=>{var r=0;return e&&(r|=365),t&&(r|=146),r},St=null,pr={},Ue=[],wn=1,pe=null,hr=!1,_r=!0,vr={},h=class{name="ErrnoError";constructor(e){this.Pa=e}},bn=class{gb={};node=null;get flags(){return this.gb.flags}set flags(e){this.gb.flags=e}get position(){return this.gb.position}set position(e){this.gb.position=e}},yn=class{La={};Ma={};ab=null;constructor(e,t,r,n){e||=this,this.parent=e,this.Xa=e.Xa,this.id=wn++,this.name=t,this.mode=r,this.rdev=n,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(e){e?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(e){e?this.mode|=146:this.mode&=-147}};function te(e,t={}){if(!e)throw new h(44);t.nb??(t.nb=!0),e.charAt(0)==="/"||(e="//"+e);var r=0;e:for(;40>r;r++){e=e.split("/").filter(w=>!!w);for(var n=St,o="/",c=0;c<e.length;c++){var d=c===e.length-1;if(d&&t.parent)break;if(e[c]!==".")if(e[c]==="..")o=ur(o),n=n.parent;else{o=qt(o+"/"+e[c]);try{n=qe(n,e[c])}catch(w){if(w?.Pa===44&&d&&t.Jb)return{path:o};throw w}if(!n.ab||d&&!t.nb||(n=n.ab.root),(n.mode&61440)===40960&&(!d||t.$a)){if(!n.La.readlink)throw new h(52);n=n.La.readlink(n),n.charAt(0)==="/"||(n=ur(o)+"/"+n),e=n+"/"+e.slice(c+1).join("/");continue e}}}return{path:o,node:n}}throw new h(32)}function It(e){for(var t;;){if(e===e.parent)return e=e.Xa.zb,t?e[e.length-1]!=="/"?`${e}/${t}`:e+t:e;t=t?`${e.name}/${t}`:e.name,e=e.parent}}function Pt(e,t){for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%pe.length}function Rt(e){var t=Pt(e.parent.id,e.name);if(pe[t]===e)pe[t]=e.bb;else for(t=pe[t];t;){if(t.bb===e){t.bb=e.bb;break}t=t.bb}}function qe(e,t){var r=X(e.mode)?(r=xe(e,"x"))?r:e.La.lookup?0:2:54;if(r)throw new h(r);for(r=pe[Pt(e.id,t)];r;r=r.bb){var n=r.name;if(r.parent.id===e.id&&n===t)return r}return e.La.lookup(e,t)}function gr(e,t,r,n){return e=new yn(e,t,r,n),t=Pt(e.parent.id,e.name),e.bb=pe[t],pe[t]=e}function X(e){return(e&61440)===16384}function wr(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t}function xe(e,t){if(_r)return 0;if(!t.includes("r")||e.mode&292){if(t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73))return 2}else return 2;return 0}function br(e,t){if(!X(e.mode))return 54;try{return qe(e,t),20}catch{}return xe(e,"wx")}function yr(e,t,r){try{var n=qe(e,t)}catch(o){return o.Pa}if(e=xe(e,"wx"))return e;if(r){if(!X(n.mode))return 54;if(n===n.parent||It(n)==="/")return 10}else if(X(n.mode))return 31;return 0}function it(e){if(!e)throw new h(63);return e}function H(e){if(e=Ue[e],!e)throw new h(8);return e}function Ar(e,t=-1){if(e=Object.assign(new bn,e),t==-1)e:{for(t=0;4096>=t;t++)if(!Ue[t])break e;throw new h(33)}return e.fd=t,Ue[t]=e}function An(e,t=-1){return e=Ar(e,t),e.Ma?.Rb?.(e),e}function Tt(e,t,r){var n=e?.Ma.Ua;e=n?e:t,n??=t.La.Ua,it(n),n(e,r)}var kn={open(e){e.Ma=pr[e.node.rdev].Ma,e.Ma.open?.(e)},Va(){throw new h(70)}};function Ot(e,t){pr[e]={Ma:t}}function kr(e,t){var r=t==="/";if(r&&St)throw new h(10);if(!r&&t){var n=te(t,{nb:!1});if(t=n.path,n=n.node,n.ab)throw new h(10);if(!X(n.mode))throw new h(54)}t={type:e,Wb:{},zb:t,Ib:[]},e=e.Xa(t),e.Xa=t,t.root=e,r?St=e:n&&(n.ab=t,n.Xa&&n.Xa.Ib.push(t))}function st(e,t,r){var n=te(e,{parent:!0}).node;if(e=ot(e),!e)throw new h(28);if(e==="."||e==="..")throw new h(20);var o=br(n,e);if(o)throw new h(o);if(!n.La.hb)throw new h(63);return n.La.hb(n,e,t,r)}function En(e,t=438){return st(e,t&4095|32768,0)}function ce(e,t=511){return st(e,t&1023|16384,0)}function at(e,t,r){typeof r>"u"&&(r=t,t=438),st(e,t|8192,r)}function Dt(e,t){if(!hn(e))throw new h(44);var r=te(t,{parent:!0}).node;if(!r)throw new h(44);t=ot(t);var n=br(r,t);if(n)throw new h(n);if(!r.La.symlink)throw new h(63);r.La.symlink(r,t,e)}function Er(e){var t=te(e,{parent:!0}).node;e=ot(e);var r=qe(t,e),n=yr(t,e,!0);if(n)throw new h(n);if(!t.La.rmdir)throw new h(63);if(r.ab)throw new h(10);t.La.rmdir(t,e),Rt(r)}function qr(e){var t=te(e,{parent:!0}).node;if(!t)throw new h(44);e=ot(e);var r=qe(t,e),n=yr(t,e,!1);if(n)throw new h(n);if(!t.La.unlink)throw new h(63);if(r.ab)throw new h(10);t.La.unlink(t,e),Rt(r)}function Qe(e,t){return e=te(e,{$a:!t}).node,it(e.La.Ta)(e)}function Lr(e,t,r,n){Tt(e,t,{mode:r&4095|t.mode&-4096,ctime:Date.now(),Fb:n})}function ut(e,t){e=typeof e=="string"?te(e,{$a:!0}).node:e,Lr(null,e,t)}function Sr(e,t,r){if(X(t.mode))throw new h(31);if((t.mode&61440)!==32768)throw new h(28);var n=xe(t,"w");if(n)throw new h(n);Tt(e,t,{size:r,timestamp:Date.now()})}function Ne(e,t,r=438){if(e==="")throw new h(44);if(typeof t=="string"){var n={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(typeof n>"u")throw Error(`Unknown file open mode: ${t}`);t=n}if(r=t&64?r&4095|32768:0,typeof e=="object")n=e;else{var o=e.endsWith("/");e=te(e,{$a:!(t&131072),Jb:!0}),n=e.node,e=e.path}var c=!1;if(t&64)if(n){if(t&128)throw new h(20)}else{if(o)throw new h(31);n=st(e,r|511,0),c=!0}if(!n)throw new h(44);if((n.mode&61440)===8192&&(t&=-513),t&65536&&!X(n.mode))throw new h(54);if(!c&&(o=n?(n.mode&61440)===40960?32:X(n.mode)&&(wr(t)!=="r"||t&576)?31:xe(n,wr(t)):44))throw new h(o);return t&512&&!c&&(o=n,o=typeof o=="string"?te(o,{$a:!0}).node:o,Sr(null,o,0)),t&=-131713,o=Ar({node:n,path:It(n),flags:t,seekable:!0,position:0,Ma:n.Ma,Lb:[],error:!1}),o.Ma.open&&o.Ma.open(o),c&&ut(n,r&511),!i.logReadFiles||t&1||e in vr||(vr[e]=1),o}function $t(e){if(e.fd===null)throw new h(8);e.ob&&(e.ob=null);try{e.Ma.close&&e.Ma.close(e)}catch(t){throw t}finally{Ue[e.fd]=null}e.fd=null}function Ir(e,t,r){if(e.fd===null)throw new h(8);if(!e.seekable||!e.Ma.Va)throw new h(70);if(r!=0&&r!=1&&r!=2)throw new h(28);e.position=e.Ma.Va(e,t,r),e.Lb=[]}function Pr(e,t,r,n,o){if(0>n||0>o)throw new h(28);if(e.fd===null)throw new h(8);if((e.flags&2097155)===1)throw new h(8);if(X(e.node.mode))throw new h(31);if(!e.Ma.read)throw new h(28);var c=typeof o<"u";if(!c)o=e.position;else if(!e.seekable)throw new h(70);return t=e.Ma.read(e,t,r,n,o),c||(e.position+=t),t}function Rr(e,t,r,n,o){if(0>n||0>o)throw new h(28);if(e.fd===null)throw new h(8);if((e.flags&2097155)===0)throw new h(8);if(X(e.node.mode))throw new h(31);if(!e.Ma.write)throw new h(28);e.seekable&&e.flags&1024&&Ir(e,0,2);var c=typeof o<"u";if(!c)o=e.position;else if(!e.seekable)throw new h(70);return t=e.Ma.write(e,t,r,n,o,void 0),c||(e.position+=t),t}function qn(e){var t,r=Ne(e,r||0);e=Qe(e).size;var n=new Uint8Array(e);return Pr(r,n,0,e,0),t=n,$t(r),t}function he(e,t,r){e=qt("/dev/"+e);var n=mr(!!t,!!r);he.yb??(he.yb=64);var o=he.yb++<<8|0;Ot(o,{open(c){c.seekable=!1},close(){r?.buffer?.length&&r(10)},read(c,d,w,T){for(var R=0,C=0;C<T;C++){try{var J=t()}catch{throw new h(29)}if(J===void 0&&R===0)throw new h(6);if(J==null)break;R++,d[w+C]=J}return R&&(c.node.atime=Date.now()),R},write(c,d,w,T){for(var R=0;R<T;R++)try{r(d[w+R])}catch{throw new h(29)}return T&&(c.node.mtime=c.node.ctime=Date.now()),R}}),at(e,n,o)}var N={};function Le(e,t,r){if(t.charAt(0)==="/")return t;if(e=e===-100?"/":H(e).path,t.length==0){if(!r)throw new h(44);return e}return e+"/"+t}function lt(e,t){x[e>>2]=t.dev,x[e+4>>2]=t.mode,B[e+8>>2]=t.nlink,x[e+12>>2]=t.uid,x[e+16>>2]=t.gid,x[e+20>>2]=t.rdev,ie[e+24>>3]=BigInt(t.size),x[e+32>>2]=4096,x[e+36>>2]=t.blocks;var r=t.atime.getTime(),n=t.mtime.getTime(),o=t.ctime.getTime();return ie[e+40>>3]=BigInt(Math.floor(r/1e3)),B[e+48>>2]=r%1e3*1e6,ie[e+56>>3]=BigInt(Math.floor(n/1e3)),B[e+64>>2]=n%1e3*1e6,ie[e+72>>3]=BigInt(Math.floor(o/1e3)),B[e+80>>2]=o%1e3*1e6,ie[e+88>>3]=BigInt(t.ino),0}var ct=void 0,dt=()=>{var e=x[+ct>>2];return ct+=4,e},Ut=0,Ln=[0,31,60,91,121,152,182,213,244,274,305,335],Sn=[0,31,59,90,120,151,181,212,243,273,304,334],He={},Tr=e=>{gt=e,kt||0<Ut||(i.onExit?.(e),rt=!0),Te(e,new At(e))},In=e=>{if(!rt)try{if(e(),!(kt||0<Ut))try{gt=e=gt,Tr(e)}catch(t){t instanceof At||t=="unwind"||Te(1,t)}}catch(t){t instanceof At||t=="unwind"||Te(1,t)}},xt={},Or=()=>{if(!Nt){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:ee||"./this.program"},t;for(t in xt)xt[t]===void 0?delete e[t]:e[t]=xt[t];var r=[];for(t in e)r.push(`${t}=${e[t]}`);Nt=r}return Nt},Nt,Mt=e=>{var t=We(e)+1,r=ve(t);return fe(e,$,r,t),r},Pn=(e,t,r,n)=>{var o={string:R=>{var C=0;return R!=null&&R!==0&&(C=Mt(R)),C},array:R=>{var C=ve(R.length);return j.set(R,C),C}};e=i["_"+e];var c=[],d=0;if(n)for(var w=0;w<n.length;w++){var T=o[r[w]];T?(d===0&&(d=Ye()),c[w]=T(n[w])):c[w]=n[w]}return r=e(...c),r=function(R){return d!==0&&Je(d),t==="string"?R?M($,R):"":t==="boolean"?!!R:R}(r)},ft=0,mt=(e,t)=>(t=t==1?ve(e.length):Vt(e.length),e.subarray||e.slice||(e=new Uint8Array(e)),$.set(e,t),t),Se,Ct=[],me,_e=e=>{Se.delete(me.get(e)),me.set(e,null),Ct.push(e)},Xe=(e,t)=>{if(!Se){Se=new WeakMap;var r=me.length;if(Se)for(var n=0;n<0+r;n++){var o=me.get(n);o&&Se.set(o,n)}}if(r=Se.get(e)||0)return r;if(Ct.length)r=Ct.pop();else{try{me.grow(1)}catch(T){throw T instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":T}r=me.length-1}try{me.set(r,e)}catch(T){if(!(T instanceof TypeError))throw T;if(typeof WebAssembly.Function=="function"){var c=WebAssembly.Function;n={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},o={parameters:[],results:t[0]=="v"?[]:[n[t[0]]]};for(var d=1;d<t.length;++d)o.parameters.push(n[t[d]]);t=new c(o,e)}else{n=[1],o=t.slice(0,1),t=t.slice(1),d={i:127,p:127,j:126,f:125,d:124,e:111},n.push(96);var w=t.length;128>w?n.push(w):n.push(w%128|128,w>>7);for(c of t)n.push(d[c]);o=="v"?n.push(0):n.push(1,d[o]),t=[0,97,115,109,1,0,0,0,1],c=n.length,128>c?t.push(c):t.push(c%128|128,c>>7),t.push(...n),t.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),t=new WebAssembly.Module(new Uint8Array(t)),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f}me.set(r,t)}return Se.set(e,r),r};pe=Array(4096),kr(I,"/"),ce("/tmp"),ce("/home"),ce("/home/web_user"),function(){ce("/dev"),Ot(259,{read:()=>0,write:(n,o,c,d)=>d,Va:()=>0}),at("/dev/null",259),fr(1280,vn),fr(1536,gn),at("/dev/tty",1280),at("/dev/tty1",1536);var e=new Uint8Array(1024),t=0,r=()=>(t===0&&(lr(e),t=e.byteLength),e[--t]);he("random",r),he("urandom",r),ce("/dev/shm"),ce("/dev/shm/tmp")}(),function(){ce("/proc");var e=ce("/proc/self");ce("/proc/self/fd"),kr({Xa(){var t=gr(e,"fd",16895,73);return t.Ma={Va:I.Ma.Va},t.La={lookup(r,n){r=+n;var o=H(r);return r={parent:null,Xa:{zb:"fake"},La:{readlink:()=>o.path},id:r+1},r.parent=r},readdir(){return Array.from(Ue.entries()).filter(([,r])=>r).map(([r])=>r.toString())}},t}},"/proc/self/fd")}(),I.vb=new h(44),I.vb.stack="<generic error, no stack>";var Rn={a:(e,t,r,n)=>$e(`Assertion failed: ${e?M($,e):""}, at: `+[t?t?M($,t):"":"unknown filename",r,n?n?M($,n):"":"unknown function"]),i:function(e,t){try{return e=e?M($,e):"",ut(e,t),0}catch(r){if(typeof N>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},L:function(e,t,r){try{if(t=t?M($,t):"",t=Le(e,t),r&-8)return-28;var n=te(t,{$a:!0}).node;return n?(e="",r&4&&(e+="r"),r&2&&(e+="w"),r&1&&(e+="x"),e&&xe(n,e)?-2:0):-44}catch(o){if(typeof N>"u"||o.name!=="ErrnoError")throw o;return-o.Pa}},j:function(e,t){try{var r=H(e);return Lr(r,r.node,t,!1),0}catch(n){if(typeof N>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},h:function(e){try{var t=H(e);return Tt(t,t.node,{timestamp:Date.now(),Fb:!1}),0}catch(r){if(typeof N>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},b:function(e,t,r){ct=r;try{var n=H(e);switch(t){case 0:var o=dt();if(0>o)break;for(;Ue[o];)o++;return An(n,o).fd;case 1:case 2:return 0;case 3:return n.flags;case 4:return o=dt(),n.flags|=o,0;case 12:return o=dt(),je[o+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(c){if(typeof N>"u"||c.name!=="ErrnoError")throw c;return-c.Pa}},g:function(e,t){try{var r=H(e),n=r.node,o=r.Ma.Ta;e=o?r:n,o??=n.La.Ta,it(o);var c=o(e);return lt(t,c)}catch(d){if(typeof N>"u"||d.name!=="ErrnoError")throw d;return-d.Pa}},H:function(e,t){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var r=H(e);if(0>t||(r.flags&2097155)===0)throw new h(28);return Sr(r,r.node,t),0}catch(n){if(typeof N>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},G:function(e,t){try{if(t===0)return-28;var r=We("/")+1;return t<r?-68:(fe("/",$,e,t),r)}catch(n){if(typeof N>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},K:function(e,t){try{return e=e?M($,e):"",lt(t,Qe(e,!0))}catch(r){if(typeof N>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},C:function(e,t,r){try{return t=t?M($,t):"",t=Le(e,t),ce(t,r),0}catch(n){if(typeof N>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},J:function(e,t,r,n){try{t=t?M($,t):"";var o=n&256;return t=Le(e,t,n&4096),lt(r,o?Qe(t,!0):Qe(t))}catch(c){if(typeof N>"u"||c.name!=="ErrnoError")throw c;return-c.Pa}},x:function(e,t,r,n){ct=n;try{t=t?M($,t):"",t=Le(e,t);var o=n?dt():0;return Ne(t,r,o).fd}catch(c){if(typeof N>"u"||c.name!=="ErrnoError")throw c;return-c.Pa}},v:function(e,t,r,n){try{if(t=t?M($,t):"",t=Le(e,t),0>=n)return-28;var o=te(t).node;if(!o)throw new h(44);if(!o.La.readlink)throw new h(28);var c=o.La.readlink(o),d=Math.min(n,We(c)),w=j[r+d];return fe(c,$,r,n+1),j[r+d]=w,d}catch(T){if(typeof N>"u"||T.name!=="ErrnoError")throw T;return-T.Pa}},u:function(e){try{return e=e?M($,e):"",Er(e),0}catch(t){if(typeof N>"u"||t.name!=="ErrnoError")throw t;return-t.Pa}},f:function(e,t){try{return e=e?M($,e):"",lt(t,Qe(e))}catch(r){if(typeof N>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},r:function(e,t,r){try{return t=t?M($,t):"",t=Le(e,t),r===0?qr(t):r===512?Er(t):$e("Invalid flags passed to unlinkat"),0}catch(n){if(typeof N>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},q:function(e,t,r){try{t=t?M($,t):"",t=Le(e,t,!0);var n=Date.now(),o,c;if(r){var d=B[r>>2]+4294967296*x[r+4>>2],w=x[r+8>>2];w==1073741823?o=n:w==1073741822?o=null:o=1e3*d+w/1e6,r+=16,d=B[r>>2]+4294967296*x[r+4>>2],w=x[r+8>>2],w==1073741823?c=n:w==1073741822?c=null:c=1e3*d+w/1e6}else c=o=n;if((c??o)!==null){e=o;var T=te(t,{$a:!0}).node;it(T.La.Ua)(T,{atime:e,mtime:c})}return 0}catch(R){if(typeof N>"u"||R.name!=="ErrnoError")throw R;return-R.Pa}},m:()=>$e(""),l:()=>{kt=!1,Ut=0},A:function(e,t){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),e=new Date(1e3*e),x[t>>2]=e.getSeconds(),x[t+4>>2]=e.getMinutes(),x[t+8>>2]=e.getHours(),x[t+12>>2]=e.getDate(),x[t+16>>2]=e.getMonth(),x[t+20>>2]=e.getFullYear()-1900,x[t+24>>2]=e.getDay();var r=e.getFullYear();x[t+28>>2]=(r%4!==0||r%100===0&&r%400!==0?Sn:Ln)[e.getMonth()]+e.getDate()-1|0,x[t+36>>2]=-(60*e.getTimezoneOffset()),r=new Date(e.getFullYear(),6,1).getTimezoneOffset();var n=new Date(e.getFullYear(),0,1).getTimezoneOffset();x[t+32>>2]=(r!=n&&e.getTimezoneOffset()==Math.min(n,r))|0},y:function(e,t,r,n,o,c,d){o=-9007199254740992>o||9007199254740992<o?NaN:Number(o);try{if(isNaN(o))return 61;var w=H(n);if((t&2)!==0&&(r&2)===0&&(w.flags&2097155)!==2)throw new h(2);if((w.flags&2097155)===1)throw new h(2);if(!w.Ma.ib)throw new h(43);if(!e)throw new h(28);var T=w.Ma.ib(w,e,o,t,r),R=T.Kb;return x[c>>2]=T.Ab,B[d>>2]=R,0}catch(C){if(typeof N>"u"||C.name!=="ErrnoError")throw C;return-C.Pa}},z:function(e,t,r,n,o,c){c=-9007199254740992>c||9007199254740992<c?NaN:Number(c);try{var d=H(o);if(r&2){if(r=c,(d.node.mode&61440)!==32768)throw new h(43);if(!(n&2)){var w=$.slice(e,e+t);d.Ma.jb&&d.Ma.jb(d,w,r,t,n)}}}catch(T){if(typeof N>"u"||T.name!=="ErrnoError")throw T;return-T.Pa}},n:(e,t)=>{if(He[e]&&(clearTimeout(He[e].id),delete He[e]),!t)return 0;var r=setTimeout(()=>{delete He[e],In(()=>$r(e,performance.now()))},t);return He[e]={id:r,Xb:t},0},B:(e,t,r,n)=>{var o=new Date().getFullYear(),c=new Date(o,0,1).getTimezoneOffset();o=new Date(o,6,1).getTimezoneOffset(),B[e>>2]=60*Math.max(c,o),x[t>>2]=+(c!=o),t=d=>{var w=Math.abs(d);return`UTC${0<=d?"-":"+"}${String(Math.floor(w/60)).padStart(2,"0")}${String(w%60).padStart(2,"0")}`},e=t(c),t=t(o),o<c?(fe(e,$,r,17),fe(t,$,n,17)):(fe(e,$,n,17),fe(t,$,r,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:e=>{var t=$.length;if(e>>>=0,2147483648<e)return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+100663296);e:{n=(Math.min(2147483648,65536*Math.ceil(Math.max(e,n)/65536))-tt.buffer.byteLength+65535)/65536|0;try{tt.grow(n),rr();var o=1;break e}catch{}o=void 0}if(o)return!0}return!1},E:(e,t)=>{var r=0;return Or().forEach((n,o)=>{var c=t+r;for(o=B[e+4*o>>2]=c,c=0;c<n.length;++c)j[o++]=n.charCodeAt(c);j[o]=0,r+=n.length+1}),0},F:(e,t)=>{var r=Or();B[e>>2]=r.length;var n=0;return r.forEach(o=>n+=o.length+1),B[t>>2]=n,0},e:function(e){try{var t=H(e);return $t(t),0}catch(r){if(typeof N>"u"||r.name!=="ErrnoError")throw r;return r.Pa}},p:function(e,t){try{var r=H(e);return j[t]=r.tty?2:X(r.mode)?3:(r.mode&61440)===40960?7:4,je[t+2>>1]=0,ie[t+8>>3]=BigInt(0),ie[t+16>>3]=BigInt(0),0}catch(n){if(typeof N>"u"||n.name!=="ErrnoError")throw n;return n.Pa}},w:function(e,t,r,n){try{e:{var o=H(e);e=t;for(var c,d=t=0;d<r;d++){var w=B[e>>2],T=B[e+4>>2];e+=8;var R=Pr(o,j,w,T,c);if(0>R){var C=-1;break e}if(t+=R,R<T)break;typeof c<"u"&&(c+=R)}C=t}return B[n>>2]=C,0}catch(J){if(typeof N>"u"||J.name!=="ErrnoError")throw J;return J.Pa}},D:function(e,t,r,n){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var o=H(e);return Ir(o,t,r),ie[n>>3]=BigInt(o.position),o.ob&&t===0&&r===0&&(o.ob=null),0}catch(c){if(typeof N>"u"||c.name!=="ErrnoError")throw c;return c.Pa}},I:function(e){try{var t=H(e);return t.Ma?.fsync?t.Ma.fsync(t):0}catch(r){if(typeof N>"u"||r.name!=="ErrnoError")throw r;return r.Pa}},t:function(e,t,r,n){try{e:{var o=H(e);e=t;for(var c,d=t=0;d<r;d++){var w=B[e>>2],T=B[e+4>>2];e+=8;var R=Rr(o,j,w,T,c);if(0>R){var C=-1;break e}if(t+=R,R<T)break;typeof c<"u"&&(c+=R)}C=t}return B[n>>2]=C,0}catch(J){if(typeof N>"u"||J.name!=="ErrnoError")throw J;return J.Pa}},k:Tr},g;(async function(){function e(r){return g=r.exports,tt=g.M,rr(),me=g.O,Ee--,i.monitorRunDependencies?.(Ee),Ee==0&&ze&&(r=ze,ze=null,r()),g}Ee++,i.monitorRunDependencies?.(Ee);var t={a:Rn};return i.instantiateWasm?new Promise(r=>{i.instantiateWasm(t,(n,o)=>{e(n),r(n.exports)})}):(yt??=i.locateFile?i.locateFile("sql-wasm.wasm",G):G+"sql-wasm.wasm",e((await fn(t)).instance))})(),i._sqlite3_free=e=>(i._sqlite3_free=g.P)(e),i._sqlite3_value_text=e=>(i._sqlite3_value_text=g.Q)(e),i._sqlite3_prepare_v2=(e,t,r,n,o)=>(i._sqlite3_prepare_v2=g.R)(e,t,r,n,o),i._sqlite3_step=e=>(i._sqlite3_step=g.S)(e),i._sqlite3_reset=e=>(i._sqlite3_reset=g.T)(e),i._sqlite3_exec=(e,t,r,n,o)=>(i._sqlite3_exec=g.U)(e,t,r,n,o),i._sqlite3_finalize=e=>(i._sqlite3_finalize=g.V)(e),i._sqlite3_column_name=(e,t)=>(i._sqlite3_column_name=g.W)(e,t),i._sqlite3_column_text=(e,t)=>(i._sqlite3_column_text=g.X)(e,t),i._sqlite3_column_type=(e,t)=>(i._sqlite3_column_type=g.Y)(e,t),i._sqlite3_errmsg=e=>(i._sqlite3_errmsg=g.Z)(e),i._sqlite3_clear_bindings=e=>(i._sqlite3_clear_bindings=g._)(e),i._sqlite3_value_blob=e=>(i._sqlite3_value_blob=g.$)(e),i._sqlite3_value_bytes=e=>(i._sqlite3_value_bytes=g.aa)(e),i._sqlite3_value_double=e=>(i._sqlite3_value_double=g.ba)(e),i._sqlite3_value_int=e=>(i._sqlite3_value_int=g.ca)(e),i._sqlite3_value_type=e=>(i._sqlite3_value_type=g.da)(e),i._sqlite3_result_blob=(e,t,r,n)=>(i._sqlite3_result_blob=g.ea)(e,t,r,n),i._sqlite3_result_double=(e,t)=>(i._sqlite3_result_double=g.fa)(e,t),i._sqlite3_result_error=(e,t,r)=>(i._sqlite3_result_error=g.ga)(e,t,r),i._sqlite3_result_int=(e,t)=>(i._sqlite3_result_int=g.ha)(e,t),i._sqlite3_result_int64=(e,t)=>(i._sqlite3_result_int64=g.ia)(e,t),i._sqlite3_result_null=e=>(i._sqlite3_result_null=g.ja)(e),i._sqlite3_result_text=(e,t,r,n)=>(i._sqlite3_result_text=g.ka)(e,t,r,n),i._sqlite3_aggregate_context=(e,t)=>(i._sqlite3_aggregate_context=g.la)(e,t),i._sqlite3_column_count=e=>(i._sqlite3_column_count=g.ma)(e),i._sqlite3_data_count=e=>(i._sqlite3_data_count=g.na)(e),i._sqlite3_column_blob=(e,t)=>(i._sqlite3_column_blob=g.oa)(e,t),i._sqlite3_column_bytes=(e,t)=>(i._sqlite3_column_bytes=g.pa)(e,t),i._sqlite3_column_double=(e,t)=>(i._sqlite3_column_double=g.qa)(e,t),i._sqlite3_bind_blob=(e,t,r,n,o)=>(i._sqlite3_bind_blob=g.ra)(e,t,r,n,o),i._sqlite3_bind_double=(e,t,r)=>(i._sqlite3_bind_double=g.sa)(e,t,r),i._sqlite3_bind_int=(e,t,r)=>(i._sqlite3_bind_int=g.ta)(e,t,r),i._sqlite3_bind_text=(e,t,r,n,o)=>(i._sqlite3_bind_text=g.ua)(e,t,r,n,o),i._sqlite3_bind_parameter_index=(e,t)=>(i._sqlite3_bind_parameter_index=g.va)(e,t),i._sqlite3_sql=e=>(i._sqlite3_sql=g.wa)(e),i._sqlite3_normalized_sql=e=>(i._sqlite3_normalized_sql=g.xa)(e),i._sqlite3_changes=e=>(i._sqlite3_changes=g.ya)(e),i._sqlite3_close_v2=e=>(i._sqlite3_close_v2=g.za)(e),i._sqlite3_create_function_v2=(e,t,r,n,o,c,d,w,T)=>(i._sqlite3_create_function_v2=g.Aa)(e,t,r,n,o,c,d,w,T),i._sqlite3_update_hook=(e,t,r)=>(i._sqlite3_update_hook=g.Ba)(e,t,r),i._sqlite3_open=(e,t)=>(i._sqlite3_open=g.Ca)(e,t);var Vt=i._malloc=e=>(Vt=i._malloc=g.Da)(e),pt=i._free=e=>(pt=i._free=g.Ea)(e);i._RegisterExtensionFunctions=e=>(i._RegisterExtensionFunctions=g.Fa)(e);var Dr=(e,t)=>(Dr=g.Ga)(e,t),$r=(e,t)=>($r=g.Ha)(e,t),Je=e=>(Je=g.Ia)(e),ve=e=>(ve=g.Ja)(e),Ye=()=>(Ye=g.Ka)();i.stackSave=()=>Ye(),i.stackRestore=e=>Je(e),i.stackAlloc=e=>ve(e),i.cwrap=(e,t,r,n)=>{var o=!r||r.every(c=>c==="number"||c==="boolean");return t!=="string"&&o&&!n?i["_"+e]:(...c)=>Pn(e,t,r,c)},i.addFunction=Xe,i.removeFunction=_e,i.UTF8ToString=Et,i.ALLOC_NORMAL=ft,i.allocate=mt,i.allocateUTF8OnStack=Mt;function Bt(){function e(){if(i.calledRun=!0,!rt){if(!i.noFSInit&&!hr){var t,r;hr=!0,n??=i.stdin,t??=i.stdout,r??=i.stderr,n?he("stdin",n):Dt("/dev/tty","/dev/stdin"),t?he("stdout",null,t):Dt("/dev/tty","/dev/stdout"),r?he("stderr",null,r):Dt("/dev/tty1","/dev/stderr"),Ne("/dev/stdin",0),Ne("/dev/stdout",1),Ne("/dev/stderr",1)}if(g.N(),_r=!1,i.onRuntimeInitialized?.(),i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;){var n=i.postRun.shift();or.unshift(n)}nr(or)}}if(0<Ee)ze=Bt;else{if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)mn();nr(ir),0<Ee?ze=Bt:i.setStatus?(i.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>i.setStatus(""),1),e()},1)):e()}}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);0<i.preInit.length;)i.preInit.pop()();return Bt(),y}),u)};s.exports=f,s.exports.default=f}(zt)),zt.exports}mi();const pi={class:"desktop-sidebar"},hi={class:"sidebar-content"},_i={class:"sidebar-nav"},vi={class:"nav-icon"},gi={class:"nav-text"},wi={key:0,class:"nav-badge"},bi=ye({__name:"SideBar",setup(s){const a=nn();Kr(()=>{const y=Ce()?.role||"user";m.value=f.filter(E=>!E.roles||E.roles.includes(y))});const u=Ke(()=>a.path),f=[{path:"/admin",title:"仪表盘",icon:"House",badge:0},{path:"/admin/users",title:"用户管理",icon:"User",badge:0,roles:["admin"]},{path:"/admin/packages",title:"资源管理",icon:"Box",badge:0,roles:["admin","moderator"]},{path:"/admin/resource-review",title:"资源审核",icon:"DocumentChecked",badge:0,roles:["admin","elder"]},{path:"/admin/comments",title:"评论管理",icon:"ChatDotRound",badge:0,roles:["admin","moderator"]},{path:"/admin/user-actions",title:"行为记录",icon:"Monitor",badge:0,roles:["admin"]},{path:"/admin/resource-records",title:"资源记录",icon:"Files",badge:0,roles:["admin"]},{path:"/admin/backup",title:"数据备份",icon:"Download",badge:0,roles:["admin"]},{path:"/admin/announcements",title:"公告管理",icon:"Bell",badge:0,roles:["admin","moderator"]},{path:"/admin/logs",title:"日志查看",icon:"Document",badge:0,roles:["admin"]},{path:"/admin/stats",title:"统计信息",icon:"DataAnalysis",badge:0,roles:["admin","moderator"]},{path:"/admin/homepage-settings",title:"主页设置",icon:"Setting",badge:0,roles:["admin"]},{path:"/admin/system-settings",title:"系统设置",icon:"Setting",badge:0,roles:["admin"]}],m=be([]),k={House:So,User:Ze,Box:Xt,Document:Lo,DataAnalysis:qo,Setting:Eo,ChatDotRound:Yt,Monitor:ko,Files:Jt,Download:Ao,Bell:yo,UserFilled:bo,DocumentChecked:wo,Message:go,Tickets:vo,Lock:_o};return(_,y)=>{const E=z("el-icon"),i=z("el-badge"),O=z("router-link");return F(),le("aside",pi,[S("div",hi,[S("nav",_i,[(F(!0),le(Zr,null,en(m.value,P=>(F(),Pe(O,{key:P.path,to:P.path,class:tn(["nav-item",{active:u.value===P.path}]),title:P.title},{default:D(()=>[S("div",vi,[b(E,{size:20},{default:D(()=>[(F(),Pe(on(k[P.icon])))]),_:2},1024)]),S("span",gi,ge(P.title),1),P.badge&&P.badge>0?(F(),le("div",wi,[b(i,{value:P.badge,hidden:P.badge===0},null,8,["value","hidden"])])):rn("",!0)]),_:2},1032,["to","class","title"]))),128))]),y[0]||(y[0]=Ht('<div class="sidebar-footer" data-v-022986e9><div class="footer-info" data-v-022986e9><div class="version-info" data-v-022986e9><span class="version-text" data-v-022986e9>v1.0.0</span></div><div class="status-info" data-v-022986e9><div class="status-item" data-v-022986e9><span class="status-dot online" data-v-022986e9></span><span class="status-text" data-v-022986e9>系统正常</span></div></div></div></div>',1))])])}}}),yi=Ae(bi,[["__scopeId","data-v-022986e9"]]),Ai={class:"desktop-layout"},ki={class:"desktop-main"},Ei={class:"content-wrapper","element-loading-text":"加载中..."},qi=ye({__name:"DesktopLayout",setup(s){const a=be(!1);return Wr("globalLoading",a),Wr("setGlobalLoading",u=>{a.value=u}),(u,f)=>{const m=z("router-view"),k=ao("loading");return F(),le("div",Ai,[b(er),b(yi),S("main",ki,[so((F(),le("div",Ei,[b(m)])),[[k,a.value]])])])}}}),Li=Ae(qi,[["__scopeId","data-v-9f101d90"]]),Si={class:"desktop-sidebar"},Ii={class:"sidebar-content"},Pi={class:"sidebar-nav"},Ri={class:"nav-icon"},Ti={class:"nav-icon"},Oi={class:"nav-icon"},Di=ye({__name:"UserSideBar",setup(s){return(a,u)=>{const f=z("el-icon"),m=z("router-link");return F(),le("aside",Si,[S("div",Ii,[S("nav",Pi,[b(m,{to:"/user/profile",class:"nav-item","active-class":"active",title:"个人信息"},{default:D(()=>[S("div",Ri,[b(f,{size:20},{default:D(()=>[b(V(Ze))]),_:1})]),u[0]||(u[0]=S("span",{class:"nav-text"},"个人信息",-1))]),_:1,__:[0]}),b(m,{to:"/user/comments",class:"nav-item","active-class":"active",title:"我的评论"},{default:D(()=>[S("div",Ti,[b(f,{size:20},{default:D(()=>[b(V(Yt))]),_:1})]),u[1]||(u[1]=S("span",{class:"nav-text"},"我的评论",-1))]),_:1,__:[1]}),b(m,{to:"/user/resources",class:"nav-item","active-class":"active",title:"我的资源"},{default:D(()=>[S("div",Oi,[b(f,{size:20},{default:D(()=>[b(V(Jt))]),_:1})]),u[2]||(u[2]=S("span",{class:"nav-text"},"我的资源",-1))]),_:1,__:[2]})]),u[3]||(u[3]=Ht('<div class="sidebar-footer" data-v-e80b1ea7><div class="footer-info" data-v-e80b1ea7><div class="version-info" data-v-e80b1ea7><span class="version-text" data-v-e80b1ea7>v1.0.0</span></div><div class="status-info" data-v-e80b1ea7><div class="status-item" data-v-e80b1ea7><span class="status-dot online" data-v-e80b1ea7></span><span class="status-text" data-v-e80b1ea7>系统正常</span></div></div></div></div>',1))])])}}}),$i=Ae(Di,[["__scopeId","data-v-e80b1ea7"]]),Ui={class:"user-layout"},xi={class:"user-main"},Ni={class:"content-wrapper"},Mi=ye({__name:"UserLayout",setup(s){return(a,u)=>{const f=z("router-view");return F(),le("div",Ui,[b(er),b($i),S("main",xi,[S("div",Ni,[b(f)])])])}}}),Ci=Ae(Mi,[["__scopeId","data-v-f15f18bf"]]),Vi={class:"desktop-sidebar"},Bi={class:"sidebar-content"},ji={class:"sidebar-nav"},zi={class:"nav-icon"},Fi={class:"nav-icon"},Wi={class:"nav-icon"},Qi={class:"nav-icon"},Hi=ye({__name:"ElderSideBar",setup(s){return(a,u)=>{const f=z("el-icon"),m=z("router-link");return F(),le("aside",Vi,[S("div",Bi,[S("nav",ji,[b(m,{to:"/elder/profile",class:"nav-item","active-class":"active",title:"个人信息"},{default:D(()=>[S("div",zi,[b(f,{size:20},{default:D(()=>[b(V(Ze))]),_:1})]),u[0]||(u[0]=S("span",{class:"nav-text"},"个人信息",-1))]),_:1,__:[0]}),b(m,{to:"/elder/comments",class:"nav-item","active-class":"active",title:"我的评论"},{default:D(()=>[S("div",Fi,[b(f,{size:20},{default:D(()=>[b(V(Yt))]),_:1})]),u[1]||(u[1]=S("span",{class:"nav-text"},"我的评论",-1))]),_:1,__:[1]}),b(m,{to:"/elder/resources",class:"nav-item","active-class":"active",title:"资源管理"},{default:D(()=>[S("div",Wi,[b(f,{size:20},{default:D(()=>[b(V(Xt))]),_:1})]),u[2]||(u[2]=S("span",{class:"nav-text"},"资源管理",-1))]),_:1,__:[2]}),b(m,{to:"/elder/my-resources",class:"nav-item","active-class":"active",title:"我的资源"},{default:D(()=>[S("div",Qi,[b(f,{size:20},{default:D(()=>[b(V(Jt))]),_:1})]),u[3]||(u[3]=S("span",{class:"nav-text"},"我的资源",-1))]),_:1,__:[3]})]),u[4]||(u[4]=Ht('<div class="sidebar-footer" data-v-0edf3093><div class="footer-info" data-v-0edf3093><div class="version-info" data-v-0edf3093><span class="version-text" data-v-0edf3093>v1.0.0</span></div><div class="status-info" data-v-0edf3093><div class="status-item" data-v-0edf3093><span class="status-dot online" data-v-0edf3093></span><span class="status-text" data-v-0edf3093>系统正常</span></div></div></div></div>',1))])])}}}),Xi=Ae(Hi,[["__scopeId","data-v-0edf3093"]]),Ji={class:"elder-layout"},Yi={class:"elder-main"},Gi={class:"content-wrapper"},Ki=ye({__name:"ElderLayout",setup(s){return(a,u)=>{const f=z("router-view");return F(),le("div",Ji,[b(er),b(Xi),S("main",Yi,[S("div",Gi,[b(f)])])])}}}),Zi=Ae(Ki,[["__scopeId","data-v-41144556"]]),es=ye({__name:"App",setup(s){const a=nn(),u=Ke(()=>{const f=a.meta.layout;return!f||f==="independent"?null:f==="user"?Ci:f==="elder"?Zi:f==="desktop"?Li:null});return(f,m)=>{const k=z("router-view");return u.value?(F(),Pe(on(u.value),{key:V(a).fullPath})):(F(),Pe(k,{key:1}))}}}),ts=Ae(es,[["__scopeId","data-v-26b8f137"]]),ue={getUserActions:s=>ne.get("/v1/user-actions",{params:s}),logUserAction:(s,a,u,f)=>ne.post("/v1/user-actions",{action_type:s,details:a,target_type:u,target_id:f}),deleteUserAction:s=>ne.delete(`/v1/user-actions/${s}`),batchDeleteUserActions:s=>ne.delete("/v1/user-actions/batch",{data:{action_ids:s}}),getActionStats:s=>ne.get("/v1/user-actions/stats",{params:s})};typeof window<"u"&&(window.lastUserInfoValid=!1);const rs={logLogin:(s,a,u)=>ue.logUserAction("Login",u||`用户 ${s} ${a?"成功":"失败"}登录`,"Auth",void 0),logLogout:s=>ue.logUserAction("Logout",`用户 ${s} 登出系统`,"Auth",void 0),logRegister:(s,a,u)=>ue.logUserAction("Register",u||`用户 ${s} ${a?"成功":"失败"}注册`,"Auth",void 0),logView:(s,a,u)=>ue.logUserAction("View",u||`查看${s}`,s,a),logDownload:(s,a,u)=>ue.logUserAction("Download",u||`下载${s}`,s,a),logUpload:(s,a,u)=>ue.logUserAction("Upload",u||`上传${s}`,s,a),logComment:(s,a,u)=>ue.logUserAction("Comment",u||`评论${s}`,s,a),logSearch:(s,a,u)=>ue.logUserAction("Search",u||`搜索${a?`${a}分类下的`:""}关键词: ${s}`,"Search",void 0),logAdminAction:(s,a)=>ue.logUserAction("Admin",a,s,void 0),logPageView:s=>ue.logUserAction("PageView",`访问页面: ${s}`,"Navigation",void 0),logAction:(s,a,u,f)=>ue.logUserAction(s,a,u,f)},ns=s=>{const a=s.path,u=s.meta.title||a;try{const f=Ce(),m=Re(),k=!!m&&!!f;console.log(`路由导航: ${a}, 页面: ${u}`),console.log("认证状态:",{isAuthenticated:k,hasToken:!!m,hasUserInfo:!!f}),k&&f.username?(console.log("记录页面访问:",a),rs.logPageView(a).catch(_=>console.error("记录页面访问失败:",_))):console.log("跳过记录页面访问：用户未完全登录")}catch(f){console.error("记录路由导航失败:",f)}},os=[{path:"/",redirect:"/home",meta:{title:"首页"}},{path:"/home",component:()=>L(()=>import("../pages/Home-mi5RX4JJ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])),meta:{title:"资源主站",layout:"independent",device:"all",preload:!0}},{path:"/category/:category",component:()=>L(()=>import("../pages/Category-BxTvyhTl.js"),__vite__mapDeps([14,1,5,8,3,15,11,12,16])),meta:{title:"资源分类",layout:"independent",device:"all"}},{path:"/resource/:id",component:()=>L(()=>import("../pages/ResourceDetail-VH379kOX.js"),__vite__mapDeps([17,1,5,6,7,18,3,15,12,19])),meta:{title:"资源详情",layout:"independent",device:"all"}},{path:"/resource/:id/comments",component:()=>L(()=>import("../pages/ResourceComment-DR17EmUf.js"),__vite__mapDeps([20,1,5,3,18,12,21])),meta:{title:"资源评论",layout:"independent",device:"all"}},{path:"/posts",component:()=>L(()=>import("../pages/Posts-CdqZnNzy.js"),__vite__mapDeps([22,1,5,8,10,2,15,12,23])),meta:{title:"社区帖子",layout:"independent",device:"all"}},{path:"/posts/:id",component:()=>L(()=>import("../pages/PostDetail-jLvUaHaA.js"),__vite__mapDeps([24,1,5,18,10,2,15,12,25])),meta:{title:"帖子详情",layout:"independent",device:"all"}},{path:"/login",name:"Login",component:()=>L(()=>import("../pages/Login-B54mL1-9.js"),__vite__mapDeps([26,1,5,27,12,28])),meta:{title:"登录",layout:"independent",device:"all"}},{path:"/register",name:"Register",component:()=>L(()=>import("../pages/Register-J00boEqI.js"),__vite__mapDeps([29,1,5,27,12,30])),meta:{title:"注册",layout:"independent",device:"all"}},{path:"/forgot-password",name:"ForgotPassword",component:()=>L(()=>import("../pages/ForgotPassword-XeBPWmTq.js"),__vite__mapDeps([31,1,27,5,12,32])),meta:{title:"忘记密码",layout:"independent",device:"all"}},{path:"/auth/reset-password",name:"ResetPassword",component:()=>L(()=>import("../pages/ResetPassword-NeqGHF1c.js"),__vite__mapDeps([33,1,27,5,12,34])),meta:{title:"重置密码",layout:"independent",device:"all"}},{path:"/admin",component:()=>L(()=>import("../pages/Dashboard-CFSYRps_.js"),__vite__mapDeps([35,1,5,36,37,38,12,39])),meta:{title:"管理员后台",requiresAuth:!0,requiresAdmin:!0,layout:"desktop",device:"desktop",preload:!0,roles:["admin"]}},{path:"/admin/users",component:()=>L(()=>import("../pages/UserManage-DjlrDwnw.js"),__vite__mapDeps([40,5,1,36,12,41])),meta:{title:"用户管理",requiresAuth:!0,requiresAdmin:!0,layout:"desktop",device:"desktop",roles:["admin"]}},{path:"/admin/packages",component:()=>L(()=>import("../pages/PackageManage-DnH3KgnI.js"),__vite__mapDeps([42,1,5,3,8,10,12,43])),meta:{title:"资源管理",requiresAuth:!0,requiresAdmin:!0,layout:"desktop",device:"desktop",roles:["admin","moderator"]}},{path:"/admin/logs",component:()=>L(()=>import("../pages/LogView-BJBAsqLK.js"),__vite__mapDeps([44,1,5,38,12,45])),meta:{title:"日志查看",requiresAuth:!0,requiresAdmin:!0,layout:"desktop",device:"desktop",roles:["admin"]}},{path:"/admin/stats",component:()=>L(()=>import("../pages/Stats-Dy4csuE5.js"),__vite__mapDeps([46,5,1,36,8,37,47,12,48])),meta:{title:"统计信息",requiresAuth:!0,requiresAdmin:!0,layout:"desktop",device:"desktop",roles:["admin","moderator"]}},{path:"/admin/theme-settings",component:()=>L(()=>import("../pages/ThemeSettings-CbTi7D_N.js"),__vite__mapDeps([49,5,1,4,12,50])),meta:{title:"系统设置",requiresAuth:!0,requiresAdmin:!0,layout:"desktop",device:"desktop",roles:["admin"]}},{path:"/admin/community-settings",component:()=>L(()=>import("../pages/CommunitySettings-ZKtO4YgO.js"),__vite__mapDeps([51,5,1,4,12,52])),meta:{title:"社区设置",requiresAuth:!0,requiresAdmin:!0,layout:"desktop",device:"desktop",roles:["admin"]}},{path:"/admin/homepage-settings",component:()=>L(()=>import("../pages/HomepageSettings-7XoRmnAE.js"),__vite__mapDeps([53,5,1,4,12,54])),meta:{title:"主页设置",requiresAuth:!0,requiresAdmin:!0,layout:"desktop",device:"desktop",roles:["admin"]}},{path:"/admin/resource-review",component:()=>L(()=>import("../pages/ResourceReview-NOjQPbcu.js"),__vite__mapDeps([55,5,1,3,8,15,12,56])),meta:{title:"资源审核",requiresAuth:!0,requiresAdmin:!0,layout:"desktop",device:"desktop",roles:["admin","elder"]}},{path:"/admin/comments",component:()=>L(()=>import("../pages/CommentManage-CmcfxgCV.js"),__vite__mapDeps([57,5,1,18,3,12,58])),meta:{title:"评论管理",requiresAuth:!0,requiresAdmin:!0,layout:"desktop",device:"desktop",roles:["admin","moderator"]}},{path:"/admin/posts",component:()=>L(()=>import("../pages/PostManage-Clbsl6GA.js"),__vite__mapDeps([59,1,5,8,10,2,15,12,60])),meta:{title:"帖子管理",requiresAuth:!0,requiresAdmin:!0,layout:"desktop",device:"desktop",roles:["admin","elder"]}},{path:"/admin/user-actions",component:()=>L(()=>import("../pages/UserActions-TGdn_6b0.js"),__vite__mapDeps([61,5,1,12,62])),meta:{title:"用户行为记录",requiresAuth:!0,requiresAdmin:!0,layout:"desktop",device:"desktop",roles:["admin"]}},{path:"/admin/resource-records",component:()=>L(()=>import("../pages/ResourceRecord-Cl_tC7S0.js"),__vite__mapDeps([63,5,1,12,64])),meta:{title:"资源记录",requiresAuth:!0,requiresAdmin:!0,layout:"desktop",device:"desktop",roles:["admin"]}},{path:"/admin/backup",component:()=>L(()=>import("../pages/BackupManage-CKAwBq9I.js"),__vite__mapDeps([65,5,1,12,66])),meta:{title:"备份管理",requiresAuth:!0,requiresAdmin:!0,layout:"desktop",device:"desktop",roles:["admin"]}},{path:"/admin/announcements",component:()=>L(()=>import("../pages/AnnouncementManage-CEC0bqVH.js"),__vite__mapDeps([67,5,1,9,12,68])),meta:{title:"公告管理",requiresAuth:!0,requiresAdmin:!0,layout:"desktop",device:"desktop"}},{path:"/admin/user-action-log",component:()=>L(()=>import("../pages/UserActionLog-BYlMAjY5.js"),__vite__mapDeps([69,5,1,12,70])),meta:{title:"用户操作日志",requiresAuth:!0,requiresAdmin:!0,layout:"desktop",device:"desktop"}},{path:"/admin/mail-settings",component:()=>L(()=>import("../pages/MailSettings-DL05kFml.js"),__vite__mapDeps([71,37,5,1,12,72])),meta:{title:"邮件设置",requiresAuth:!0,requiresAdmin:!0,layout:"desktop",device:"desktop",roles:["admin"]}},{path:"/admin/subscriptions",component:()=>L(()=>import("../pages/SubscriptionManage-AH8QS_DW.js"),__vite__mapDeps([73,5,1,8,74,12,75])),meta:{title:"订阅管理",requiresAuth:!0,requiresAdmin:!0,layout:"desktop",device:"desktop",roles:["admin"]}},{path:"/admin/download-security",component:()=>L(()=>import("../pages/DownloadSecurity-BGoDoDT3.js"),__vite__mapDeps([76,5,1,37,12,77])),meta:{title:"下载安全监控",requiresAuth:!0,requiresAdmin:!0,layout:"desktop",device:"desktop",roles:["admin"]}},{path:"/admin/ip-ban",component:()=>L(()=>import("../pages/IpBanManage-AaWSYPYt.js"),__vite__mapDeps([78,1,5,37,12,79])),meta:{title:"IP封禁管理",requiresAuth:!0,requiresAdmin:!0,layout:"desktop",device:"desktop",roles:["admin"]}},{path:"/admin/tags",component:()=>L(()=>import("../pages/TagManage-C9Qx3h_P.js"),__vite__mapDeps([80,2,5,1,12,81])),meta:{title:"标签管理",requiresAuth:!0,requiresAdmin:!0,layout:"desktop",device:"desktop",roles:["admin","elder"]}},{path:"/elder",component:()=>L(()=>import("../pages/Dashboard-D04548X4.js"),__vite__mapDeps([82,1,5,3,18,12,83])),meta:{title:"元老后台",requiresAuth:!0,layout:"elder",device:"desktop",roles:["elder"]}},{path:"/elder/resources",component:()=>L(()=>import("../pages/ResourceManage-CLqzrqtA.js"),__vite__mapDeps([84,1,5,3,12,85])),meta:{title:"资源管理",requiresAuth:!0,layout:"elder",device:"desktop",roles:["elder"]}},{path:"/elder/profile",component:()=>L(()=>import("../pages/Profile-Bi65JlaC.js"),__vite__mapDeps([86,36,5,1,12,87])),meta:{title:"个人信息",requiresAuth:!0,layout:"elder",device:"desktop",roles:["elder"]}},{path:"/elder/comments",component:()=>L(()=>import("../pages/ElderComments-vtIlnNaq.js"),__vite__mapDeps([88,1,5,18,12,89])),meta:{title:"我的评论",requiresAuth:!0,layout:"elder",device:"desktop",roles:["elder"]}},{path:"/elder/my-resources",component:()=>L(()=>import("../pages/ElderMyResources-CTCAhKkF.js"),__vite__mapDeps([90,1,5,3,8,10,12,91])),meta:{title:"我的资源",requiresAuth:!0,layout:"elder",device:"desktop",roles:["elder"]}},{path:"/user",component:()=>L(()=>import("../pages/Dashboard-BntNdU2w.js"),__vite__mapDeps([92,5,1,3,36,12,93])),meta:{title:"个人中心",requiresAuth:!0,layout:"user",device:"desktop",roles:["user"]}},{path:"/user/resources",component:()=>L(()=>import("../pages/UserResources-CLhXgHnr.js"),__vite__mapDeps([94,1,5,3,36,8,10,12,95])),meta:{title:"我的资源",requiresAuth:!0,layout:"user",device:"desktop",roles:["user"]}},{path:"/user/profile",component:()=>L(()=>import("../pages/UserProfile-BWQEYLE6.js"),__vite__mapDeps([96,5,1,36,8,74,12,97])),meta:{title:"个人信息",requiresAuth:!0,layout:"user",device:"desktop",roles:["user"]}},{path:"/user/comments",component:()=>L(()=>import("../pages/UserComments-ZZsp5dN0.js"),__vite__mapDeps([98,1,5,18,12,99])),meta:{title:"我的评论",requiresAuth:!0,layout:"user",device:"desktop",roles:["user"]}},{path:"/403",component:()=>L(()=>import("../pages/Forbidden-D08uuHYi.js"),__vite__mapDeps([100,1,5,12,101])),meta:{title:"无权限",layout:"independent",device:"all"}},{path:"/:pathMatch(.*)*",component:()=>L(()=>import("../pages/NotFound-DQVow2O6.js"),__vite__mapDeps([102,1,5,12])),meta:{title:"页面未找到",layout:"independent",device:"all"}}],tr=uo({history:lo("/"),routes:os});tr.beforeEach(async(s,a,u)=>{if(typeof window<"u"&&window.isLoggingOut)return s.path==="/login"?(console.log("🚪 正在退出登录，允许访问登录页"),u()):(console.log("🚪 正在退出登录，重定向到登录页"),u("/login"));s.meta.title?document.title=`${s.meta.title} - 绳包管理系统`:document.title="绳包管理系统";let f=!1,m=null;const k=a.path.startsWith("/login")||a.path.startsWith("/register")||a.path.startsWith("/forgot-password")||a.path.startsWith("/auth/");if(!a.name&&!k&&s.meta.requiresAuth){console.log("🔄 检测到页面刷新/首次访问，尝试恢复认证状态...");try{const E=await un();f=E.isAuthenticated,m=E.userInfo,console.log("🔄 认证状态恢复结果:",{isAuthenticated:f,userInfo:m?.username})}catch(E){console.warn("⚠️ 认证状态恢复失败:",E),f=!1,m=null}}else{const E=Re();m=Ce(),f=!!E&&!!m}const y=s.matched.some(E=>E.meta.requiresAuth);if(console.log("🔍 路由守卫调试:",{to:s.path,from:a.path,fromName:a.name,isPageRefresh:!a.name,userInfo:m?`${m.username}(${m.role})`:"无",isAuthenticated:f,requiresAuth:y}),s.path==="/login")if(f&&m?.role){let E="/user";return m.role==="admin"?E="/admin":m.role==="elder"&&(E="/elder"),console.log(`✅ 已登录用户重定向: ${m.role} -> ${E}`),u({path:E,replace:!0})}else return u();if(y){if(!f)return console.warn(`🚫 未认证访问被拦截: ${s.path}`),u({path:"/login",query:{redirect:s.fullPath},replace:!0});const E=m?.ban_status?.toLowerCase();if(E&&E!=="normal"&&E!=="")return console.warn(`🚫 封禁用户访问被拦截: ${m.username} (${m.ban_status})`),await is(),u({path:"/login",query:{error:"banned",message:m.ban_status==="suspended"?"账户已被暂停":"账户已被封禁"},replace:!0});const i=s.meta.roles;if(i&&i.length>0){const O=m?.role||"guest";if(!i.includes(O))return console.warn(`🚫 角色权限不足: 需要 ${i.join("|")}, 当前 ${O}`),u({path:"/403",replace:!0})}if(s.meta.requiresAdmin&&m?.role!=="admin")return console.warn(`🚫 管理员权限不足: 当前角色 ${m?.role}`),u({path:"/403",replace:!0})}f&&m?.username&&ns(s),console.log(`✅ 路由访问允许: ${s.path}`),u()});tr.afterEach((s,a)=>{});async function is(){const{logout:s}=await L(async()=>{const{logout:a}=await Promise.resolve().then(()=>Wo);return{logout:a}},void 0);await s()}const Ve=co(ts);for(const[s,a]of Object.entries(Io))Ve.component(s,a);Ve.use(Po);Ve.use(tr);const Gr=Do();Ve.config.globalProperties.$resourceLogger=Kt;Ve.provide("resourceLogger",Kt);Zt().then(()=>{console.log("用户信息刷新完成")}).catch(()=>{console.warn("用户信息刷新失败")});Ve.mount("#app");window.addEventListener("beforeunload",()=>{Gr&&Gr()});export{Ae as _,ne as a,$o as b,Bo as c,Fo as d,jo as e,Re as f,Ce as g,zo as h,Vo as i,ue as j,Qr as k,ls as l,Zt as m,ln as n,Kt as r,cs as s,Z as t,rs as u};
